<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT, Frank_Lyan,  Blog, Node.js, Git, JS, JAVASCRIPT, HTML, CSS, jQuery,Stylus" />








  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.0.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="Frank_Lyan's Blog">
<meta property="og:url" content="https://yanlee26.github.io/index.html">
<meta property="og:site_name" content="Frank_Lyan's Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Frank_Lyan's Blog">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"hide"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 6382889515761010000,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="https://yanlee26.github.io/"/>

  <title> Frank_Lyan's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Frank_Lyan's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">progressive programing</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-guestbook">
          <a href="/guestbook" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-commenting"></i> <br />
            
            留言
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search fa-lg"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/24/react/" itemprop="url">
                  react学习及原理分析
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-01-23T23:15:24Z" content="2017-01-23">
              2017-01-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/01/24/react/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/24/react/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>草稿。。。</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/04/front-end-career/" itemprop="url">
                  Becoming a Great Web Front-end Developer
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-01-03T19:28:20Z" content="2017-01-03">
              2017-01-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术译文/" itemprop="url" rel="index">
                    <span itemprop="name">技术译文</span>
                  </a>
                </span>

                
                

              
            </span>
          

          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="成就一名卓越的前端开发者"><a href="#成就一名卓越的前端开发者" class="headerlink" title="成就一名卓越的前端开发者"></a><center>成就一名卓越的前端开发者</center></h1><blockquote>
<p>本文记录了两位工程师为web开发者们所提出的多条建议，其中一位推荐了多种实用的工具与技术，而另一位则对于如何克服浏览器开发时所面临的挑战提出了诸多建议。<br>Rebecca Murphey是来自于Bazaarvoice的一位软件工程师。今年早些时候，她发布了一篇博客文章<a href="http://rmurphey.com/blog/2015/03/23/a-baseline-for-front-end-developers-2015" target="_blank" rel="external">“前端（JS）开发者的基本素质之2015版”</a>，为JavaScript开发者在进行客户端web开发时使用的工具与开发方式提出了一些建议。她在文章的总结中写道：</p>
</blockquote>
<h3 id="1-学习ECMAScript-2015"><a href="#1-学习ECMAScript-2015" class="headerlink" title="1. 学习ECMAScript 2015"></a>1. 学习ECMAScript 2015</h3><p>推荐的参考资料有：<a href="https://www.infoq.com/news/2015/06/ecmascript-2015-es6" target="_blank" rel="external">《Understanding ES6》</a>、ES6 Rocks以及BabelJS。我们在此还要加上一条，即Axel Rauschmayer的著作<a href="http://www.infoq.com/cn/news/2015/07/exploring-es6" target="_blank" rel="external">《探索ES6》</a>。考虑到在当前这个时间点上似乎还没有必要了解ECMAScript 2015的所有细节，Murphey建议开发者更深入地了解如何使用异步调用、回调以及promise。</p>
<h3 id="2-使用模块"><a href="#2-使用模块" class="headerlink" title="2.使用模块"></a>2.使用模块</h3><p>Murphey相信，模块毫无疑问应当作为客户端web应用程序的构建块。她最近在使用webpack以实现模块化的效果，但她希望让每个人都能够使用ECMAScript标准模块的那一天能够早日到来。</p>
<h3 id="3-测试你的代码"><a href="#3-测试你的代码" class="headerlink" title="3.测试你的代码"></a>3.测试你的代码</h3><p>在Murphey看来，为你的代码编写测试，并且保证代码的可测试性是至关重要的。<br>虽然她对于Intern“非常中意”，但出于习惯，她还是坚持使用Mocha。关于这一方面，<br>她也强烈推荐Michael Feathers的著作<a href="http://philipwalton.com/articles/how-to-become-a-great-front-end-engineer/" target="_blank" rel="external">《修改代码的艺术》</a>。</p>
<h3 id="4-实现流程自动化"><a href="#4-实现流程自动化" class="headerlink" title="4.实现流程自动化"></a>4.实现流程自动化</h3><p>Murphey曾经尝试使用Grunt与Gulp，但她最终还是选择了Yeoman。因为在“使用不熟悉的技术开始一个全新的项目”，或是对第三方JavaScript应用的开发进行标准化时，Yeoman的表现“非常出色”。Murphey也提到了Broccoli，认为它将来或许能够取代Grunt和Yeoman。</p>
<h3 id="5-编写高质量的代码"><a href="#5-编写高质量的代码" class="headerlink" title="5.编写高质量的代码"></a>5.编写高质量的代码</h3><p>她的建议是，对“违反了项目中经过良好定义的风格指南”的代码进行重构，还应当使用lint工具，例如JSCS或ESLint。</p>
<h3 id="6-使用Git"><a href="#6-使用Git" class="headerlink" title="6.使用Git"></a>6.使用Git</h3><p>Murphey建议在Git中使用特性分支，因此得以“通过交互式rebase，在与他人分享提交时对提交进行清理，并且尽可能地在较小的单元上进行工作，以减少冲突的发生机率”。此外还应当通过ghooks在push操作与commit操作前运行钩子操作。</p>
<h3 id="7-在服务端生成HTML"><a href="#7-在服务端生成HTML" class="headerlink" title="7.在服务端生成HTML"></a>7.在服务端生成HTML</h3><p>出于性能方面的考虑，Murphey推荐在大型项目中尽可能在服务端生成HTML。“预先生成这些文件，将其作为静态文件保存，以加快处理请求的速度。随后在客户端的相应事件中可通过客户端代码操作这些HTML文件，并在客户端模板中修改。”</p>
<h3 id="8-拥抱Node"><a href="#8-拥抱Node" class="headerlink" title="8. 拥抱Node"></a>8. 拥抱Node</h3><p>Murphey建议web开发者熟练掌握Node.js的相关知识，至少要了解如何初始化一个Node项目、如何搭建一台Express服务器、以及如何使用request模块转发请求。<br>Philip Walton是来自Google的一位软件工程师，他最近撰写了一篇博客文章<a href="https://www.amazon.com/Working-Effectively-Legacy-Michael-Feathers/dp/0131177052" target="_blank" rel="external">Working-Effectively-Legacy-Michael-Feathers</a>。这篇文章的观点另辟蹊径，他并没有向读者推荐任何工具或框架，而是专注于如何处理这一领域中的某些挑战。在他看来，优秀员工与真正杰出的人才的差别不在于他们的知识量，而在于他们的思考方式。他是这样描述开发者的智慧的：</p>
<h3 id="9-真正理解背后的过程"><a href="#9-真正理解背后的过程" class="headerlink" title="9.真正理解背后的过程"></a>9.真正理解背后的过程</h3><p>对于Walton来说，仅仅编写出可以运行的代码算不得优秀。他见过许多编写CSS与JavaScript的人，他们 “只求找到能够运行的代码，然后就继续下一步工作了。”很多时候，开发者并不了解某段代码运行的机制。Walton建议开发者进行深入钻研：</p>
<blockquote>
<p>要充分理解代码的工作原理或许会很耗时间，但我向你保证，从长远来说，这种方式最终将节省你大量的时间。一旦你充分理解你所参与的系统是如何运作的，你就无需不断地进行猜测与检验这些费时的工作了。<br>预先了解浏览器将产生的改动。Web开发者应当持续了解有哪些浏览器的改动会破坏现有的代码。以下代码在IE10中必然会导致整个JavaScript框架的方法出错：<br>var isIE6 = !isIE7 &amp;&amp; !isIE8 &amp;&amp; !isIE9;</p>
</blockquote>
<h3 id="10仔细阅读规范"><a href="#10仔细阅读规范" class="headerlink" title="10仔细阅读规范"></a>10仔细阅读规范</h3><p>Walton指出，虽然阅读规范是一项艰辛的任务，但一旦出现浏览器对某个页面的渲染不同的情况，这一任务就是不可避免的了。他为此特别举例说明：</p>
<blockquote>
<p>最近我遇到这样一个例子，与可伸缩（flex）元素的默认最小尺寸有关。根据规范所说，可伸缩元素的min-width与min-height的初始值是auto，而不是0，这就意味着在默认情况下，这些元素不可能收缩到比其中的内容尺寸还小。而在过去8个月中，Firefox是唯一一个正确地实现了这一特性的浏览器。<br>如果你遇到了这个跨浏览器的不一致性问题，并且注意到你的网站在Chrome、IE、Opera和Safari上的展现完全相同，只在Firefox上有所差别，那你很可能会认为是Firefox的问题。实际上，我曾多次发现这一情况，在我的Flexbugs项目中，有许多由用户报告的bug其实都是由这种不一致性所导致的。而如果我按照用户所提议的那些临时方案来改变实现方式，那么在两周前所发布的Chrome 44中又会产生问题。由于这些临时方案选择了违背规范的方式，它们在无形中起到了提倡不正确行为的负面作用。</p>
</blockquote>
<h3 id="11-代码审查"><a href="#11-代码审查" class="headerlink" title="11.代码审查"></a>11.代码审查</h3><p>Walton表示，从阅读他人的代码中可以学到很多知识，它可以拓宽你的思路，了解“新的工作方法”，同时也有助于你在团队中的工作。实际上，这一点确实相当必要，因为“作为一位工程师来说，你的时间大部分都是在一个现有的代码库中添加或修改代码”，而不是从头开始编写全新的代码。</p>
<h3 id="12-与更聪明的人一起工作"><a href="#12-与更聪明的人一起工作" class="headerlink" title="12.与更聪明的人一起工作"></a>12.与更聪明的人一起工作</h3><p>Walton“强烈”建议你至少在职业生涯的初期阶段要尽量在某个团队中进行工作，向更有经验的团队成员学习，并让他们审查你的代码。如果之后选择了自由职业者这条职业路线，那么Walton建议你参与开源项目，这同样可以感受到在团队中工作的益处。</p>
<h3 id="13-重复发明轮子"><a href="#13-重复发明轮子" class="headerlink" title="13.重复发明轮子"></a>13.重复发明轮子</h3><p>Walton相信，虽然“重复发明轮子对于业务来说是有害的”，但它对于学习很有好处。在有些情况下，他建议你自己编写代码，而不是依赖于第三方的代码，因为这一过程将让你学到许多东西。当然这也要看情况而定。</p>
<h3 id="14-将你的经验记录下来"><a href="#14-将你的经验记录下来" class="headerlink" title="14.将你的经验记录下来"></a>14.将你的经验记录下来</h3><p>Walton的最后一条建议是将你所学到的东西用文字记录下来：“按我的经验来看，写作、演讲以及开发demo，这些方法能够迫使我对知识点进行充分的挖掘，并做到从内到外的完全理解。哪怕你写的东西完全没人看，但写作的过程本身就已经值得你付出的努力了。”</p>
<p><a href="https://www.infoq.com/news/2015/08/great-front-end-developer" target="_blank" rel="external">参考链接</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/24/three/" itemprop="url">
                  three学习总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-12-23T23:45:24Z" content="2016-12-23">
              2016-12-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/three/" itemprop="url" rel="index">
                    <span itemprop="name">three</span>
                  </a>
                </span>

                
                

              
            </span>
          

          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><ul>
<li><p>Creating the scene</p>
<blockquote>
<p>想让three展现任何东西，需要三样东西：A scene, a camera, and a renderer</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">var scene = new THREE.Scene();</div><div class="line">var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );</div><div class="line">//renderer</div><div class="line">var renderer = new THREE.WebGLRenderer();</div><div class="line">renderer.setSize( window.innerWidth, window.innerHeight );</div><div class="line">document.body.appendChild( renderer.domElement );</div><div class="line">//cube</div><div class="line">var geometry = new THREE.BoxGeometry( 1, 1, 1 );</div><div class="line">var material = new THREE.MeshBasicMaterial( &#123; color: 0x00ff00 &#125; );</div><div class="line">var cube = new THREE.Mesh( geometry, material );</div><div class="line">scene.add( cube );</div><div class="line"></div><div class="line">camera.position.z = 5;</div><div class="line">//rendering the scene</div><div class="line">function render() &#123;</div><div class="line">	requestAnimationFrame( render );</div><div class="line">	renderer.render( scene, camera );</div><div class="line">	//Animating the cube</div><div class="line">    cube.rotation.x += 0.1;</div><div class="line">    cube.rotation.y += 0.1;</div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;</div><div class="line">render();</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Detecting WebGL and Browser compatibility</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">if (Detector.webgl) &#123;</div><div class="line">    init();</div><div class="line">    animate();</div><div class="line">&#125; else &#123;</div><div class="line">    var warning = Detector.getWebGLErrorMessage();</div><div class="line">    document.getElementById(&apos;container&apos;).appendChild(warning);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Drawing lines</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">var renderer = new THREE.WebGLRenderer();</div><div class="line">renderer.setSize(window.innerWidth, window.innerHeight);</div><div class="line">document.body.appendChild(renderer.domElement);</div><div class="line"></div><div class="line">var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 500);</div><div class="line">camera.position.set(0, 0, 100);</div><div class="line">camera.lookAt(new THREE.Vector3(0, 0, 0));</div><div class="line"></div><div class="line">var scene = new THREE.Scene();</div><div class="line">//create a blue LineBasicMaterial</div><div class="line">var material = new THREE.LineBasicMaterial(&#123; color: 0x0000ff &#125;);</div><div class="line">var geometry = new THREE.Geometry();</div><div class="line">geometry.vertices.push(new THREE.Vector3(-10, 0, 0));</div><div class="line">geometry.vertices.push(new THREE.Vector3(0, 10, 0));</div><div class="line">geometry.vertices.push(new THREE.Vector3(10, 0, 0));</div><div class="line"></div><div class="line">var line = new THREE.Line(geometry, material);</div><div class="line">scene.add(line);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
</li>
<li><p>Creating Text:很多时候three.js应用程序要用到文字，有以下几种方式可选</p>
<ul>
<li>DOM+CSS</li>
<li>Draw text to canvas and use as a Texture: 在canvas上绘制文本作为质地</li>
<li>Create a model in your favourite 3D application and export to three.js：在3D app中构建并暴露给three</li>
<li>Procedural Text Geometry：文本程序的几何<h2 id="Next-Steps"><a href="#Next-Steps" class="headerlink" title="Next Steps"></a>Next Steps</h2></li>
</ul>
</li>
<li><p>How to update things</p>
<blockquote>
<p>所有对象若被添加到scene上则默认自动更新它们的矩阵;且可继承</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var object = new THREE.Object3D;</div><div class="line">scene.add( object )</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Matrix transformations:矩阵变换</p>
<blockquote>
<p>Three利用矩阵3D变换—translations(position),rotations,and scaling。每个3D实例都有一个<br>存储了其位置，旋转及缩放的矩阵。</p>
<h2 id="Building-tools"><a href="#Building-tools" class="headerlink" title="Building tools"></a>Building tools</h2><p>Node环境用通过npm引入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ npm install three --save-dev</div><div class="line">//文件中引入</div><div class="line">var THREE = require(&apos;three&apos;);</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><h3 id="AnimationAction"><a href="#AnimationAction" class="headerlink" title="AnimationAction"></a>AnimationAction</h3><h3 id="Cameras"><a href="#Cameras" class="headerlink" title="Cameras"></a>Cameras</h3><h3 id="Lights"><a href="#Lights" class="headerlink" title="Lights"></a>Lights</h3><h3 id="Lights-Shadows"><a href="#Lights-Shadows" class="headerlink" title="Lights/Shadows"></a>Lights/Shadows</h3><h3 id="Loaders"><a href="#Loaders" class="headerlink" title="Loaders"></a>Loaders</h3><h3 id="Materials"><a href="#Materials" class="headerlink" title="Materials"></a>Materials</h3><h3 id="Math"><a href="#Math" class="headerlink" title="Math"></a>Math</h3><h3 id="Objects"><a href="#Objects" class="headerlink" title="Objects"></a>Objects</h3><h3 id="Renderers"><a href="#Renderers" class="headerlink" title="Renderers"></a>Renderers</h3><h3 id="Renderers-Shaders"><a href="#Renderers-Shaders" class="headerlink" title="Renderers/Shaders"></a>Renderers/Shaders</h3><h3 id="Scene"><a href="#Scene" class="headerlink" title="Scene"></a>Scene</h3>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/24/vue/" itemprop="url">
                  vue(2.0)全家桶 总结及源码分析
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-12-23T19:41:24Z" content="2016-12-23">
              2016-12-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/vue/" itemprop="url" rel="index">
                    <span itemprop="name">vue</span>
                  </a>
                </span>

                
                

              
            </span>
          

          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Essentials"><a href="#Essentials" class="headerlink" title="Essentials"></a>Essentials</h1><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><blockquote>
<p>Vue does not support IE8 and below</p>
</blockquote>
<ul>
<li><p>Direct <figure class="highlight plain"><figcaption><span>```Include</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- CDN:[ https://unpkg.com/vue]( https://unpkg.com/vue)</div><div class="line"></div><div class="line">- NPM </div><div class="line"></div><div class="line">``` </div><div class="line">$ npm install vue</div></pre></td></tr></table></figure></p>
</li>
<li><p>CLI </p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ npm install --global vue-cli</div><div class="line"># create a new project using the &quot;webpack&quot; template</div><div class="line">$ vue init webpack my-project</div><div class="line"># install dependencies and go!</div><div class="line">$ cd my-project</div><div class="line">$ npm install</div><div class="line">$ npm run dev</div></pre></td></tr></table></figure>
<h3 id="Runtime-Compiler-vs-Runtime-only"><a href="#Runtime-Compiler-vs-Runtime-only" class="headerlink" title="Runtime+Compiler vs. Runtime-only"></a>Runtime+Compiler vs. Runtime-only</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// this requires the compiler</div><div class="line">new Vue(&#123;</div><div class="line">  template: `&lt;div&gt;&#123;&#123; hi &#125;&#125;&lt;/div&gt;`</div><div class="line">&#125;)</div><div class="line">// this does not</div><div class="line">new Vue(&#123;</div><div class="line">  render (h) &#123;</div><div class="line">    return h(&apos;div&apos;, this.hi)</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="Development-vs-Production-Mode"><a href="#Development-vs-Production-Mode" class="headerlink" title="Development vs. Production Mode"></a>Development vs. Production Mode</h3><blockquote>
<p>开发/生产模式对于UMD构建是硬编码的：未缩小的文件用于开发，缩小的文件用于生产。<br>  CommonJS和ES Module构建是针对捆绑包的，因此我们不为它们提供缩减版本。 你将负责自己最终捆绑。<br>  CommonJS和ES Module构建还保存process.env.NODE_ENV的原始检查以确定它们应该运行的模式。<br>  您应该使用适当的bundler配置来替换这些环境变量，以便控制Vue将运行的模式。替换process.env .NODE_ENV与字符串字面值也允许像UglifyJS这样的缩略器完全删除仅开发的代码块，减少最终文件大小。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">//Using Webpack DefinePlugin</div><div class="line"> var webpack = require(&apos;webpack&apos;)</div><div class="line"> module.exports = &#123;</div><div class="line">   // ...</div><div class="line">   plugins: [</div><div class="line">     // ...</div><div class="line">     new webpack.DefinePlugin(&#123;</div><div class="line">       &apos;process.env&apos;: &#123;</div><div class="line">         NODE_ENV: JSON.stringify(&apos;production&apos;)</div><div class="line">       &#125;</div><div class="line">     &#125;)</div><div class="line">   ]</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><h3 id="What’s-Vue-js-Vue-is-a-progressive-framework-for-building-user-interfaces"><a href="#What’s-Vue-js-Vue-is-a-progressive-framework-for-building-user-interfaces" class="headerlink" title="What’s Vue.js:Vue is a progressive framework for building user interfaces."></a>What’s Vue.js:Vue is a progressive framework for building user interfaces.</h3><h3 id="Declarative-Rendering-声明式渲染"><a href="#Declarative-Rendering-声明式渲染" class="headerlink" title="Declarative Rendering 声明式渲染"></a>Declarative Rendering 声明式渲染</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//html</div><div class="line">&lt;div id=&quot;app&quot;&gt;</div><div class="line">  &#123;&#123; message &#125;&#125;</div><div class="line">&lt;/div&gt;</div><div class="line">//js</div><div class="line">var app = new Vue(&#123;</div><div class="line">  el: &apos;#app&apos;,</div><div class="line">  data: &#123;</div><div class="line">    message: &apos;Hello Vue!&apos;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="Conditionals-and-Loops"><a href="#Conditionals-and-Loops" class="headerlink" title="Conditionals and Loops"></a>Conditionals and Loops</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">//html</div><div class="line">&lt;div id=&quot;app-3&quot;&gt;</div><div class="line">  &lt;p v-if=&quot;seen&quot;&gt;Now you see me&lt;/p&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;div id=&quot;app-4&quot;&gt;</div><div class="line">  &lt;ol&gt;</div><div class="line">    &lt;li v-for=&quot;todo in todos&quot;&gt;</div><div class="line">      &#123;&#123; todo.text &#125;&#125;</div><div class="line">    &lt;/li&gt;</div><div class="line">  &lt;/ol&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">//js</div><div class="line">var app3 = new Vue(&#123;</div><div class="line">  el: &apos;#app-3&apos;,</div><div class="line">  data: &#123;</div><div class="line">    seen: true</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line">var app4 = new Vue(&#123;</div><div class="line">  el: &apos;#app-4&apos;,</div><div class="line">  data: &#123;</div><div class="line">    todos: [</div><div class="line">      &#123; text: &apos;Learn JavaScript&apos; &#125;,</div><div class="line">      &#123; text: &apos;Learn Vue&apos; &#125;,</div><div class="line">      &#123; text: &apos;Build something awesome&apos; &#125;</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="Handling-User-Input"><a href="#Handling-User-Input" class="headerlink" title="Handling User Input"></a>Handling User Input</h3><blockquote>
<p>To let users interact with your app, we can use the v-on directive to attach event<br>listeners that invoke methods on our Vue instances:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;app-5&quot;&gt;</div><div class="line">  &lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</div><div class="line">  &lt;button v-on:click=&quot;reverseMessage&quot;&gt;Reverse Message&lt;/button&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;div id=&quot;app-6&quot;&gt;</div><div class="line">  &lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</div><div class="line">  &lt;input v-model=&quot;message&quot;&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">//js</div><div class="line">var app5 = new Vue(&#123;</div><div class="line">  el: &apos;#app-5&apos;,</div><div class="line">  data: &#123;</div><div class="line">    message: &apos;Hello Vue.js!&apos;</div><div class="line">  &#125;,</div><div class="line">  methods: &#123;</div><div class="line">    reverseMessage: function () &#123;</div><div class="line">      this.message = this.message.split(&apos;&apos;).reverse().join(&apos;&apos;)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line">var app6 = new Vue(&#123;</div><div class="line">  el: &apos;#app-6&apos;,</div><div class="line">  data: &#123;</div><div class="line">    message: &apos;Hello Vue!&apos;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="Composing-with-Components"><a href="#Composing-with-Components" class="headerlink" title="Composing with Components"></a>Composing with Components</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//js</div><div class="line">// Define a new component called todo-item</div><div class="line">Vue.component(&apos;todo-item&apos;, &#123;</div><div class="line">  template: &apos;&lt;li&gt;This is a todo&lt;/li&gt;&apos;</div><div class="line">&#125;)</div><div class="line">//html</div><div class="line">&lt;ol&gt;</div><div class="line">  &lt;!-- Create an instance of the todo-item component --&gt;</div><div class="line">  &lt;todo-item&gt;&lt;/todo-item&gt;</div><div class="line">&lt;/ol&gt;</div></pre></td></tr></table></figure>
<blockquote>
<p>Relation to Custom Elements—区别</p>
<ol>
<li>Web Components Spec 一直是草案,而Vue components 不依赖任何处理可以工作在任何浏览器(IE9以上)<br>且可嵌入到原生element。</li>
<li>Vue组件提供了在纯自定义元素中不可用的重要功能，最突出的是跨组件数据流，自定义事件通信和构建工具集成。<h2 id="The-Vue-Instance"><a href="#The-Vue-Instance" class="headerlink" title="The Vue Instance"></a>The Vue Instance</h2><h3 id="Constructor"><a href="#Constructor" class="headerlink" title="Constructor"></a>Constructor</h3>Although not strictly associated with the MVVM pattern, Vue’s design was partly inspired by it. <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var data = &#123; a: 1 &#125;</div><div class="line">var vm = new Vue(&#123;</div><div class="line">  el: &apos;#example&apos;,</div><div class="line">  data: data</div><div class="line">&#125;)</div><div class="line">vm.$data === data // -&gt; true</div><div class="line">vm.$el === document.getElementById(&apos;example&apos;) // -&gt; true</div><div class="line">// $watch is an instance method</div><div class="line">vm.$watch(&apos;a&apos;, function (newVal, oldVal) &#123;</div><div class="line">  // this callback will be called when `vm.a` changes</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<h3 id="Instance-Lifecycle-Hooks"><a href="#Instance-Lifecycle-Hooks" class="headerlink" title="Instance Lifecycle Hooks"></a>Instance Lifecycle Hooks</h3><p>![<a href="http://vuejs.org/images/lifecycle.png][http://vuejs.org/images/lifecycle.png" target="_blank" rel="external">http://vuejs.org/images/lifecycle.png][http://vuejs.org/images/lifecycle.png</a>]</p>
<h2 id="Template-Syntax"><a href="#Template-Syntax" class="headerlink" title="Template Syntax"></a>Template Syntax</h2><blockquote>
<p>Vue.js uses an HTML-based template syntax that allows you to declaratively bind the rendered DOM<br>to the underlying Vue instance’s data. All Vue.js templates are valid HTML that can be parsed by<br>spec-compliant browsers and HTML parsers.<br>Under the hood, Vue compiles the templates into Virtual DOM render functions(虚拟DOM渲染函数).<br>Combined with the reactivity system, Vue is able to intelligently figure out the minimal amount of components to<br>re-render and apply the minimal amount of DOM manipulations when the app state changes.</p>
<h3 id="Interpolations-插值"><a href="#Interpolations-插值" class="headerlink" title="Interpolations(插值)"></a>Interpolations(插值)</h3><ul>
<li>Text:<figure class="highlight plain"><figcaption><span>&#123;&#123; msg &#125;&#125;</span> ```</figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- Raw HTML:```&lt;div v-html=&quot;rawHtml&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<ul>
<li>Attributes:<figure class="highlight plain"><figcaption><span>v-bind:id="dynamicId">```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- Using JS Expressions:```&lt;div v-bind:id=&quot;&apos;list-&apos; + id&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure></li>
</ul>
<h3 id="Directions—Directives-are-special-attributes-with-the-v-prefix"><a href="#Directions—Directives-are-special-attributes-with-the-v-prefix" class="headerlink" title="Directions—Directives are special attributes with the v- prefix."></a>Directions—Directives are special attributes with the v- prefix.</h3><ul>
<li><p>Arguments:Some directives can take an “argument”, denoted by a colon after the directive name. </p>
<figure class="highlight plain"><figcaption><span>v-on:click="doSomething">```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">- Modifiers: indicate that a directive should be bound in some special way. </div><div class="line">```  &lt;form v-on:submit.prevent=&quot;onSubmit&quot;&gt;&lt;/form&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>Filters: apply common text formatting.</p>
<blockquote>
<p>Vue 2.x过滤器只能在胡子插值和v绑定表达式（后者自2.1.0以来支持）内使用，因为过滤器主要设计用于文本转换目的。<br>对于其他指令中更复杂的数据变换，应该使用计算属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">//html</div><div class="line">&#123;&#123; message | capitalize &#125;&#125;</div><div class="line">//js</div><div class="line">new Vue(&#123;</div><div class="line">  // ...</div><div class="line">  filters: &#123;</div><div class="line">    capitalize: function (value) &#123;</div><div class="line">      if (!value) return &apos;&apos;</div><div class="line">      value = value.toString()</div><div class="line">      return value.charAt(0).toUpperCase() + value.slice(1)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>Shorthands:<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;!-- full syntax --&gt;</div><div class="line">&lt;a v-bind:href=&quot;url&quot;&gt;&lt;/a&gt;</div><div class="line">&lt;!-- shorthand --&gt;</div><div class="line">&lt;a :href=&quot;url&quot;&gt;&lt;/a&gt;</div><div class="line">&lt;!-- full syntax --&gt;</div><div class="line">&lt;a v-on:click=&quot;doSomething&quot;&gt;&lt;/a&gt;</div><div class="line">&lt;!-- shorthand --&gt;</div><div class="line">&lt;a @click=&quot;doSomething&quot;&gt;&lt;/a&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="Computed-Properties-and-Watchers"><a href="#Computed-Properties-and-Watchers" class="headerlink" title="Computed Properties and Watchers"></a>Computed Properties and Watchers</h2><h3 id="Computed-Properties"><a href="#Computed-Properties" class="headerlink" title="Computed Properties"></a>Computed Properties</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">computed: &#123;</div><div class="line">   // a computed getter</div><div class="line">   reversedMessage: function () &#123;</div><div class="line">     // `this` points to the vm instance</div><div class="line">     return this.message.split(&apos;&apos;).reverse().join(&apos;&apos;)</div><div class="line">   &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<ul>
<li>Computed Caching vs Methods: the computed properties are cached based on their dependencies</li>
<li>Computed vs Watched Property:better to use a computed property</li>
<li>Computed Setter:you can provide a setter when you need it:<h3 id="Watchers"><a href="#Watchers" class="headerlink" title="Watchers"></a>Watchers</h3><blockquote>
<p>when you want to perform asynchronous or expensive operations in response to changing data.</p>
<h2 id="Class-and-Style-Bindings"><a href="#Class-and-Style-Bindings" class="headerlink" title="Class and Style Bindings"></a>Class and Style Bindings</h2><h3 id="Binding-HTML-Classes"><a href="#Binding-HTML-Classes" class="headerlink" title="Binding HTML Classes"></a>Binding HTML Classes</h3></blockquote>
</li>
<li><p>Object Syntax </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;div v-bind:class=&quot;&#123; active: isActive &#125;&quot;&gt;&lt;/div&gt;</div><div class="line"> &lt;div class=&quot;static&quot;</div><div class="line">      v-bind:class=&quot;&#123; active: isActive, &apos;text-danger&apos;: hasError &#125;&quot;&gt;</div><div class="line"> &lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>Array Syntax</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div v-bind:class=&quot;[activeClass, errorClass]&quot;&gt;</div><div class="line">&lt;div v-bind:class=&quot;[isActive ? activeClass : &apos;&apos;, errorClass]&quot;&gt;</div><div class="line">&lt;div v-bind:class=&quot;[&#123; active: isActive &#125;, errorClass]&quot;&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>With Components</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;my-component v-bind:class=&quot;&#123; active: isActive &#125;&quot;&gt;&lt;/my-component&gt;</div><div class="line">//When isActive is truthy, the rendered HTML will be:</div><div class="line">&lt;p class=&quot;foo bar active&quot;&gt;Hi&lt;/p&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Binding-Inline-Styles"><a href="#Binding-Inline-Styles" class="headerlink" title="Binding Inline Styles"></a>Binding Inline Styles</h3><ul>
<li><p>Object Syntax/Array Syntax</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;div v-bind:style=&quot;&#123; color: activeColor, fontSize: fontSize + &apos;px&apos; &#125;&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;div v-bind:style=&quot;[baseStyles, overridingStyles]&quot;&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>Auto-prefixing:Vue已替你考虑CSS的浏览器兼容性</p>
<h2 id="List-Rending"><a href="#List-Rending" class="headerlink" title="List Rending"></a>List Rending</h2><h3 id="v-if-v-else-if"><a href="#v-if-v-else-if" class="headerlink" title="v-if/v-else-if"></a>v-if/v-else-if</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;div v-if=&quot;type === &apos;A&apos;&quot;&gt;</div><div class="line">  A</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;div v-else-if=&quot;type === &apos;B&apos;&quot;&gt;</div><div class="line">  B</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;div v-else-if=&quot;type === &apos;C&apos;&quot;&gt;</div><div class="line">  C</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;div v-else&gt;</div><div class="line">  Not A/B/C</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>Controlling Reusable Elements with key</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;template v-if=&quot;loginType === &apos;username&apos;&quot;&gt;</div><div class="line">  &lt;label&gt;Username&lt;/label&gt;</div><div class="line">  &lt;input placeholder=&quot;Enter your username&quot;&gt;</div><div class="line">&lt;/template&gt;</div><div class="line">&lt;template v-else&gt;</div><div class="line">  &lt;label&gt;Email&lt;/label&gt;</div><div class="line">  &lt;input placeholder=&quot;Enter your email address&quot;&gt;</div><div class="line">&lt;/template&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>v-show <figure class="highlight plain"><figcaption><span>v-show="ok">Hello!```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">- v-if vs v-show</div><div class="line">v-if is “real” conditional rendering because it ensures that event listeners and child components inside the </div><div class="line">conditional block are properly destroyed and re-created during toggles.</div><div class="line"></div><div class="line">v-if is also lazy: if the condition is false on initial render, it will not do anything - the conditional block won’t </div><div class="line">be rendered until the condition becomes true for the first time.</div><div class="line"></div><div class="line">In comparison, v-show is much simpler - the element is always rendered regardless of initial condition, </div><div class="line">with just simple CSS-based toggling.And Please note that v-show doesn’t support the &lt;template&gt; syntax, </div><div class="line">nor does it work with v-else</div><div class="line"></div><div class="line">Generally speaking, v-if has higher toggle costs while v-show has higher initial render costs. So prefer v-show if </div><div class="line">you need to toggle something very often, and prefer v-if if the condition is unlikely to change at runtime.</div><div class="line">- v-if vs v-show:v-for has a higher priority than v-if</div><div class="line">## List Rendering</div><div class="line">###  v-for:We can use the v-for directive to render a list of items based on an array.</div><div class="line">- Basic use</div><div class="line">&gt;You can also use of as the delimiter instead of in, so that it is closer to JavaScript’s syntax for iterators:</div></pre></td></tr></table></figure></p>
</li>
</ul>
<p>//html</p>
<p><ul id="example-1"><br>  <li v-for="item of items"><br>    <br>  </li><br></ul></p>
<p><ul id="example-2"><br>  <li v-for="(item, index) in items"><br>     -  - <br>  </li><br></ul><br>//js<br>var example1 = new Vue({<br>  el: ‘#example-1’,<br>  data: {<br>    items: [<br>      { message: ‘Foo’ },<br>      { message: ‘Bar’ }<br>    ]<br>  }<br>});<br>var example2 = new Vue({<br>  el: ‘#example-2’,<br>  data: {<br>    parentMessage: ‘Parent’,<br>    items: [<br>      { message: ‘Foo’ },<br>      { message: ‘Bar’ }<br>    ]<br>  }<br>});<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- Template v-for:```&lt;template v-for=&quot;item in items&quot;&gt;</div></pre></td></tr></table></figure></p>
<ul>
<li>Object v-for:<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;li v-for=&quot;value in object&quot;&gt;</div><div class="line">//You can also provide a second argument for the key:</div><div class="line">&lt;div v-for=&quot;(value, key) in object&quot;&gt;</div><div class="line">//And another for the index:</div><div class="line">&lt;div v-for=&quot;(value, key, index) in object&quot;&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>When iterating over an object, the order is based on the key enumeration order of Object.keys()<br>不保证所有JS引擎里边都表现一致。</p>
<ul>
<li>Range v-for:<figure class="highlight plain"><figcaption><span>v-for="n in 10">&#123;&#123; n &#125;&#125;</span>```</figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- Components and v-for:</div></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<p><my-component v-for="(item, index) in items" v-bind:item="item" v-bind:index="index" v-bind:key="item.id"><br></my-component><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt;In 2.2.0+, when using v-for with a component, a key is now required.It is recommended to provide a key with v-for whenever possible</div><div class="line">###  Array Change Detection</div><div class="line">- Mutation Methods:突变方法</div><div class="line">    + push()</div><div class="line">    + pop()</div><div class="line">    + shift()</div><div class="line">    + unshift()</div><div class="line">    + splice()</div><div class="line">    + sort()</div><div class="line">    + reverse()</div><div class="line">- Replacing an Array:  do not mutate the original array but always return a new array</div><div class="line">    + filter()</div><div class="line">    + concat()</div><div class="line">    + slice()</div></pre></td></tr></table></figure></p>
<pre><code>example1.items = example1.items.filter(function (item) {
  return item.message.match(/Foo/)
})
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">- Caveats:Due to limitations in JavaScript, Vue cannot detect the following changes to an array:</div><div class="line">    + When you directly set an item with the index, e.g. vm.items[indexOfItem] = newValue</div></pre></td></tr></table></figure>

// Vue.set
Vue.set(example1.items, indexOfItem, newValue)
// Array.prototype.splice`
example1.items.splice(indexOfItem, 1, newValue)
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">+ When you modify the length of the array, e.g. vm.items.length = newLength</div><div class="line">```example1.items.splice(newLength)</div></pre></td></tr></table></figure>
</code></pre><h3 id="Displaying-Filtered-Sorted-Results"><a href="#Displaying-Filtered-Sorted-Results" class="headerlink" title="Displaying Filtered/Sorted Results"></a>Displaying Filtered/Sorted Results</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//create a computed property </div><div class="line">&lt;li v-for=&quot;n in evenNumbers&quot;&gt;&#123;&#123; n &#125;&#125;&lt;/li&gt;</div><div class="line">// use a method where computed properties are not feasible (e.g. inside nested v-for loops):</div><div class="line">&lt;li v-for=&quot;n in even(numbers)&quot;&gt;&#123;&#123; n &#125;&#125;&lt;/li&gt;</div></pre></td></tr></table></figure>
<h2 id="Event-Handing"><a href="#Event-Handing" class="headerlink" title="Event Handing"></a>Event Handing</h2><h3 id="Listening-to-Events-use-the-v-on-directive"><a href="#Listening-to-Events-use-the-v-on-directive" class="headerlink" title="Listening to Events:use the v-on directive"></a>Listening to Events:use the v-on directive</h3><figure class="highlight plain"><figcaption><span>v-on:click="counter += 1">Add 1```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">###  Method Event Handlers:when event handlers are more complex</div><div class="line">```&lt;button v-on:click=&quot;counter += 1&quot;&gt;Add 1&lt;/button&gt;</div></pre></td></tr></table></figure>
<h3 id="Methods-in-Inline-Handlers"><a href="#Methods-in-Inline-Handlers" class="headerlink" title="Methods in Inline Handlers"></a>Methods in Inline Handlers</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;button v-on:click=&quot;say(&apos;hi&apos;)&quot;&gt;Say hi&lt;/button&gt;</div><div class="line">//Sometimes we also need to access the original DOM event in an inline statement handler. </div><div class="line">&lt;button v-on:click=&quot;warn(&apos;Form cannot be submitted yet.&apos;, $event)&quot;&gt;Submit&lt;/button&gt;</div><div class="line">//js</div><div class="line">methods: &#123;</div><div class="line">  warn: function (message, event) &#123;</div><div class="line">    // now we have access to the native event</div><div class="line">    if (event) event.preventDefault()</div><div class="line">    alert(message)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Event-Modifiers-To-address-the-problem-of-purely-dealing-with-data-logic-rather-than-DOM-event-details"><a href="#Event-Modifiers-To-address-the-problem-of-purely-dealing-with-data-logic-rather-than-DOM-event-details" class="headerlink" title="Event Modifiers:To address the problem of purely dealing with data logic rather than  DOM event details"></a>Event Modifiers:To address the problem of purely dealing with data logic rather than  DOM event details</h3><ul>
<li>.stop</li>
<li>.prevent</li>
<li>.capture</li>
<li>.self</li>
<li>.once:New in 2.1.4<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;!-- the click event&apos;s propagation will be stopped --&gt;</div><div class="line">&lt;a v-on:click.stop=&quot;doThis&quot;&gt;&lt;/a&gt;</div><div class="line">&lt;!-- the submit event will no longer reload the page --&gt;</div><div class="line">&lt;form v-on:submit.prevent=&quot;onSubmit&quot;&gt;&lt;/form&gt;</div><div class="line">&lt;!-- modifiers can be chained --&gt;</div><div class="line">&lt;a v-on:click.stop.prevent=&quot;doThat&quot;&gt;&lt;/a&gt;</div><div class="line">&lt;!-- just the modifier --&gt;</div><div class="line">&lt;form v-on:submit.prevent&gt;&lt;/form&gt;</div><div class="line">&lt;!-- use capture mode when adding the event listener --&gt;</div><div class="line">&lt;div v-on:click.capture=&quot;doThis&quot;&gt;...&lt;/div&gt;</div><div class="line">&lt;!-- only trigger handler if event.target is the element itself --&gt;</div><div class="line">&lt;!-- i.e. not from a child element --&gt;</div><div class="line">&lt;div v-on:click.self=&quot;doThat&quot;&gt;...&lt;/div&gt;</div><div class="line">&lt;!-- the click event will be triggered at most once --&gt;</div><div class="line">&lt;a v-on:click.once=&quot;doThis&quot;&gt;&lt;/a&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Key-Modifiers-Modifier-Keys"><a href="#Key-Modifiers-Modifier-Keys" class="headerlink" title="Key Modifiers/Modifier Keys"></a>Key Modifiers/Modifier Keys</h3><h2 id="Form-Input-Bindings"><a href="#Form-Input-Bindings" class="headerlink" title="Form Input Bindings"></a>Form Input Bindings</h2><h3 id="Basic-Usage"><a href="#Basic-Usage" class="headerlink" title="Basic Usage"></a>Basic Usage</h3><ul>
<li>Text <figure class="highlight plain"><figcaption><span>v-model="message" placeholder="edit me">```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- Multiline text</div></pre></td></tr></table></figure></li>
</ul>
<p>//Interpolation on textareas (<textarea></textarea>) won’t work. Use v-model instead.</p>
<p><textarea v-model="message" placeholder="add multiple lines"></textarea><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- Checkbox ```&lt;input type=&quot;checkbox&quot; id=&quot;checkbox&quot; v-model=&quot;checked&quot;&gt;</div></pre></td></tr></table></figure></p>
<ul>
<li>Radio <figure class="highlight plain"><figcaption><span>type="radio" id="one" v-model="picked">```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- Select:</div></pre></td></tr></table></figure></li>
</ul>
<p>//Single select</p>
<select v-model="selected"><br>//Multiple select<br></select><select v-model="selected" multiple><br><option v-for="option in options" v-bind:value="option.value"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">###  Value Bindings</div><div class="line">&gt;For radio, checkbox and select options, the v-model binding values are usually static strings (or booleans for checkbox):</div><div class="line">We can use v-bind to bind the value to a dynamic property on the Vue instance.</div></pre></td></tr></table></figure><br><br><!-- `picked` is a string "a" when checked --><br></option></select><input type="radio" v-model="picked" value="a"><br><!-- `toggle` is either true or false --><br><input type="checkbox" v-model="toggle"><br><!-- `selected` is a string "abc" when selected --><br><select v-model="selected"><br>  <option value="abc">ABC</option><br></select>

<p><input type="checkbox" v-model="toggle" v-bind:true-value="a" v-bind:false-value="b"><br>// when checked:<br>vm.toggle === vm.a<br>// when unchecked:<br>vm.toggle === vm.b<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">###  Modifiers</div><div class="line">- .lazy```&lt;input v-model.lazy=&quot;msg&quot; &gt;</div></pre></td></tr></table></figure></p>
<ul>
<li>.number <figure class="highlight plain"><figcaption><span>v-model.number="age" type="number">```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- .trim ```&lt;input v-model.trim=&quot;msg&quot;&gt;</div></pre></td></tr></table></figure></li>
</ul>
<h3 id="v-model-with-Components"><a href="#v-model-with-Components" class="headerlink" title="v-model with Components"></a>v-model with Components</h3><h2 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h2><h3 id="Using-Components"><a href="#Using-Components" class="headerlink" title="Using Components"></a>Using Components</h3><ul>
<li><p>Registration</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Vue.component(&apos;my-component&apos;, &#123;</div><div class="line">  // options</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>Local Registration</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var Child = &#123;</div><div class="line">  template: &apos;&lt;div&gt;A custom component!&lt;/div&gt;&apos;</div><div class="line">&#125;</div><div class="line">new Vue(&#123;</div><div class="line">  // ...</div><div class="line">  components: &#123;</div><div class="line">    // &lt;my-component&gt; will only be available in parent&apos;s template</div><div class="line">    &apos;my-component&apos;: Child</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
<li><p>DOM Template Parsing Caveats</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//A workaround is to use the is special attribute:</div><div class="line">&lt;table&gt;</div><div class="line">  &lt;tr is=&quot;my-row&quot;&gt;&lt;/tr&gt;</div><div class="line">&lt;/table&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>data Must Be a Function</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">data: function () &#123;</div><div class="line">    return data</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Composing Components<br>![<a href="http://vuejs.org/images/props-events.png][http://vuejs.org/images/props-events.png" target="_blank" rel="external">http://vuejs.org/images/props-events.png][http://vuejs.org/images/props-events.png</a>]</p>
<h3 id="Props"><a href="#Props" class="headerlink" title="Props"></a>Props</h3></li>
<li><p>Passing Data with Props</p>
<blockquote>
<p>Every component instance has its own isolated scope. Data can be passed down to child components using props.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//html</div><div class="line">&lt;child message=&quot;hello!&quot;&gt;&lt;/child&gt;</div><div class="line">//js</div><div class="line">Vue.component(&apos;child&apos;, &#123;</div><div class="line">  // declare the props</div><div class="line">  props: [&apos;message&apos;],</div><div class="line">  // just like data, the prop can be used inside templates</div><div class="line">  // and is also made available in the vm as this.message</div><div class="line">  template: &apos;&lt;span&gt;&#123;&#123; message &#125;&#125;&lt;/span&gt;&apos;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Dynamic Props</p>
<figure class="highlight plain"><figcaption><span>:my-message="parentMsg">```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- Literal vs Dynamic</div></pre></td></tr></table></figure>
</li>
</ul>
<p>//初学者常犯的错误是试图利用仔面了语法传值。<br><!-- this passes down a plain string "1" --></p>
<p><comp some-prop="1"></comp><br>//事实上，若想传值我们需要用v-bind以便值被认定为JS表达式<br><!-- this passes down an actual number --></p>
<p><comp v-bind:some-prop="1"></comp><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">- One-Way Data Flow</div><div class="line">&gt; 注意对象和数组在JS中是按引用传递的，故当prop是对象或数组时改变子组件数据会影响父组件状态</div></pre></td></tr></table></figure></p>
<p>/<em>1. Define a local data property that uses the prop’s initial value as its initial value:<br>定义一个利用props值作为初始值的本地数据属性</em>/<br>props: [‘initialCounter’],<br>data: function () {<br>  return { counter: this.initialCounter }<br>}<br>/<em>2.Define a computed property that is computed from the prop’s value:<br>定义一个将props值计算过的计算属性
</em>/<br>props: [‘size’],<br>computed: {<br>  normalizedSize: function () {<br>    return this.size.trim().toLowerCase()<br>  }<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- Prop Validation</div></pre></td></tr></table></figure></p>
<p>Vue.component(‘example’, {<br>  props: {<br>    // basic type check (<code>null</code> means accept any type)<br>    propA: Number,<br>    // multiple possible types<br>    propB: [String, Number],<br>    // a required string<br>    propC: {<br>      type: String,<br>      required: true<br>    },<br>    // a number with default value<br>    propD: {<br>      type: Number,<br>      default: 100<br>    },<br>    // object/array defaults should be returned from a<br>    // factory function<br>    propE: {<br>      type: Object,<br>      default: function () {<br>        return { message: ‘hello’ }<br>      }<br>    },<br>    // custom validator function<br>    propF: {<br>      validator: function (value) {<br>        return value &gt; 10<br>      }<br>    }<br>  }<br>})<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">###  Custom Events</div><div class="line">&gt; 父组件可以像子组件单向传递数据，反之呢？此即custom events应用之处。</div><div class="line">注意事件系统，Vue的独立于浏览器的即便看起来很像；不能利用$on监听子组件事件分发，必须在template上直接用</div><div class="line">v-on，见如下实例</div><div class="line">- Using v-on with Custom Events</div><div class="line">    + Listen to an event using $on(eventName)</div><div class="line">    + Trigger an event using $emit(eventName)</div></pre></td></tr></table></figure></p>
<p><div id="counter-event-example"><br>  <p></p><br>  <button-counter v-on:increment="incrementTotal"></button-counter><br>  <button-counter v-on:increment="incrementTotal"></button-counter><br></div><br>//js<br>Vue.component(‘button-counter’, {<br>  template: ‘<button v-on:click="increment"></button>‘,<br>  data: function () {<br>    return {<br>      counter: 0<br>    }<br>  },<br>  methods: {<br>    increment: function () {<br>      this.counter += 1<br>      this.$emit(‘increment’)<br>    }<br>  },<br>})<br>new Vue({<br>  el: ‘#counter-event-example’,<br>  data: {<br>    total: 0<br>  },<br>  methods: {<br>    incrementTotal: function () {<br>      this.total += 1<br>    }<br>  }<br>})<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- Binding Native Events to Components</div></pre></td></tr></table></figure></p>
<p><my-component v-on:click.native="doTheThing"></my-component><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- Form Input Components using Custom Events</div></pre></td></tr></table></figure></p>
<p><input v-model="something"><br>//is just syntactic sugar for:</p>
<p><input v-bind:value="something" v-on:input="something = $event.target.value"><br>//When used with a component, this simplifies to:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- Customizing Component v-model:New in 2.2.0</div></pre></td></tr></table></figure></p>
<p>//html</p>
<p><my-checkbox v-model="foo" value="some value"></my-checkbox>//or</p>
<p><my-checkbox :checked="foo" @change="val => { foo = val }" value="some value"><br></my-checkbox><br>//js<br>Vue.component(‘my-checkbox’, {<br>  model: {<br>    prop: ‘checked’,<br>    event: ‘change’<br>  },<br>  props: {<br>    // this allows using the <code>value</code> prop for a different purpose<br>    value: String<br>  },<br>  // …<br>});<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- Non Parent-Child Communication</div></pre></td></tr></table></figure></p>
<p>var bus = new Vue()<br>// in component A’s method<br>bus.$emit(‘id-selected’, 1)<br>// in component B’s created hook<br>bus.$on(‘id-selected’, function (id) {<br>  // …<br>})<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">###  Content Distribution with Slots</div><div class="line">###  Dynamic Components</div></pre></td></tr></table></figure></p>
<p>//html</p>
<p><keep-alive><br>  <component :is="currentView"><br>    <!-- inactive components will be cached! --><br>  </component><br></keep-alive><br>//js<br>var vm = new Vue({<br>  el: ‘#example’,<br>  data: {<br>    currentView: ‘home’<br>  },<br>  components: {<br>    home: { /<em> … </em>/ },<br>    posts: { /<em> … </em>/ },<br>    archive: { /<em> … </em>/ }<br>  }<br>})<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">###  Misc</div><div class="line">- Authoring Reusable Components</div><div class="line">&gt;The API for a Vue component comes in three parts - props, events, and slots:</div><div class="line">    </div><div class="line">    + Props :allow the external environment to pass data into the component</div><div class="line">        允许外部环境向组件内传数据</div><div class="line">    + Events :allow the component to trigger side effects in the external environment</div><div class="line">        允许组件触发边际响应到外部环境</div><div class="line">    + Slots :allow the external environment to compose the component with extra content.</div><div class="line">        允许外部环境用额外内容完善组件</div></pre></td></tr></table></figure></p>
<p><my-component :foo="baz" :bar="qux" @event-a="doThis" @event-b="doThat"><br>  <img slot="icon" src="..."><br>  <p slot="main-text">Hello!</p><br></my-component><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- Child Component Refs:directly access a child component in JS.</div></pre></td></tr></table></figure></p>
<p>//html</p>
<p><div id="parent"><br>  <user-profile ref="profile"></user-profile><br></div><br>//js<br>var parent = new Vue({ el: ‘#parent’ })<br>// access child component instance<br>var child = parent.$refs.profile<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; 小心坑：$refs are only populated after the component has been rendered, and it is not reactive. </div><div class="line">It is only meant as an escape hatch for direct child manipulation - you should avoid using $refs in templates or computed properties.</div><div class="line">- Async Components</div></pre></td></tr></table></figure></p>
<p>Vue.component(‘async-example’, function (resolve, reject) {<br>  setTimeout(function () {<br>    // Pass the component definition to the resolve callback<br>    resolve({<br>      template: ‘<div>I am async!</div>‘<br>    })<br>  }, 1000)<br>})<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">- Component Naming Conventions</div><div class="line">- Recursive(递归) Components</div><div class="line">- Circular References Between Components</div><div class="line">- Inline Templates</div><div class="line">- X-Templates</div><div class="line">- Cheap Static Components with v-once</div><div class="line"># Advanced</div><div class="line">## Reactivity in </div><div class="line">&gt; Models are just plain JavaScript objects. When you modify them, the view updates. It makes state management very</div><div class="line"> simple and intuitive, but it’s also important to understand how it works to avoid some common gotchas. </div><div class="line">模型层(model)只是普通 JavaScript 对象，修改它则更新视图(view)。这会让状态管理变得非常简单且直观</div><div class="line">### How Changes Are Tracked</div><div class="line">&gt; 把一个普通 Javascript 对象传给 Vue 实例的 data 选项，Vue 将遍历此对象所有的属性，并使用 Object.defineProperty </div><div class="line">把这些属性全部转为 getter/setter。</div><div class="line"></div><div class="line">![https://vuefe.cn/images/data.png][https://vuefe.cn/images/data.png]</div><div class="line">###  Change Detection Caveats 变化检测局限</div><div class="line">&gt; Vue cannot detect property addition or deletion.Since Vue performs the getter/setter conversion process</div><div class="line"> during instance initialization, a property must be present in the data object in order for Vue to convert it and make it reactive.</div></pre></td></tr></table></figure></p>
<p>var vm = new Vue({<br>  data: {<br>    a: 1<br>  }<br>})<br>// <code>vm.a</code> is now reactive<br>vm.b = 2<br>// <code>vm.b</code> is NOT reactive<br>Vue.set(vm.someObject, ‘b’, 2);<br>//<br>this.$set(this.someObject, ‘b’, 2)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">###  Declaring Reactive Properties</div><div class="line">###  Async Update Queue</div><div class="line">&gt;Vue performs DOM updates asynchronously. Whenever a data change is observed, </div><div class="line">it will open a queue and buffer all the data changes that happen in the same event loop.</div><div class="line"> Internally Vue tries native Promise.then </div><div class="line"> and MutationObserver for the asynchronous queuing and falls back to setTimeout(fn, 0).</div><div class="line">- In order to wait until Vue.js has finished updating the DOM after a data change, you can use Vue.nextTick(callback) immediately after the data is changed.</div></pre></td></tr></table></figure></p>
<p>Vue.component(‘example’, {<br>  template: ‘<span></span>‘,<br>  data: function () {<br>    return {<br>      message: ‘not updated’<br>    }<br>  },<br>  methods: {<br>    updateMessage: function () {<br>      this.message = ‘updated’<br>      console.log(this.$el.textContent) // =&gt; ‘not updated’<br>      this.$nextTick(function () {<br>        console.log(this.$el.textContent) // =&gt; ‘updated’<br>      })<br>    }<br>  }<br>})<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">## Transition Effects</div><div class="line">&gt; Vue provides a variety of ways to apply transition effects when items are inserted, updated, or removed from the DOM. This includes tools to:</div><div class="line">  - automatically apply classes for CSS transitions and animations</div><div class="line">  - integrate 3rd-party CSS animation libraries, such as Animate.css</div><div class="line">  - use JavaScript to directly manipulate the DOM during transition hooks</div><div class="line">  - integrate 3rd-party JavaScript animation libraries, such as Velocity.js</div><div class="line">###  Transitioning Single Elements/Components</div><div class="line">- transitions for any element or component in the following contexts:</div><div class="line">    + Conditional rendering (using v-if)</div><div class="line">    + Conditional display (using v-show)</div><div class="line">    + Dynamic components</div><div class="line">    + Component root nodes</div></pre></td></tr></table></figure></p>
<p>//html</p>
<p><div id="demo"><br>  <button v-on:click="show = !show"><br>    Toggle<br>  </button><br>  <transition name="fade"><br>    <p v-if="show">hello</p><br>  </transition><br></div><br>//js<br>new Vue({<br>  el: ‘#demo’,<br>  data: {<br>    show: true<br>  }<br>})<br>//css<br>.fade-enter-active, .fade-leave-active {<br>  transition: opacity .5s<br>}<br>.fade-enter, .fade-leave-to /<em> .fade-leave-active in &lt;2.1.8 </em>/ {<br>  opacity: 0<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- Transition Classes</div><div class="line">    1. v-enter</div><div class="line">    2. v-enter-active</div><div class="line">    3. v-enter-to</div><div class="line">    4. v-leave</div><div class="line">    5. v-leave-active</div><div class="line">    6. v-leave-to</div><div class="line">- CSS Transitions</div><div class="line">&gt;One of the most common transition types uses CSS transitions</div></pre></td></tr></table></figure></p>
<p>//html</p>
<p><div id="example-1"><br>  <button @click="show = !show"><br>    Toggle render<br>  </button><br>  <transition name="slide-fade"><br>    <p v-if="show">hello</p><br>  </transition><br></div><br>//js<br>new Vue({<br>  el: ‘#example-1’,<br>  data: {<br>    show: true<br>  }<br>})<br>//css<br>/<em> Enter and leave animations can use different </em>/<br>/<em> durations and timing functions.              </em>/<br>.slide-fade-enter-active {<br>  transition: all .3s ease;<br>}<br>.slide-fade-leave-active {<br>  transition: all .8s cubic-bezier(1.0, 0.5, 0.8, 1.0);<br>}<br>.slide-fade-enter, .slide-fade-leave-to<br>/<em> .slide-fade-leave-active for &lt;2.1.8 </em>/ {<br>  transform: translateX(10px);<br>  opacity: 0;<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- CSS Animations</div></pre></td></tr></table></figure></p>
<p>//html</p>
<p><div id="example-2"><br>  <button @click="show = !show">Toggle show</button><br>  <transition name="bounce"><br>    <p v-if="show">Look at me!</p><br>  </transition><br></div><br>//js<br>new Vue({<br>  el: ‘#example-2’,<br>  data: {<br>    show: true<br>  }<br>})<br>//css<br>.bounce-enter-active {<br>  animation: bounce-in .5s;<br>}<br>.bounce-leave-active {<br>  animation: bounce-out .5s;<br>}<br>@keyframes bounce-in {<br>  0% {<br>    transform: scale(0);<br>  }<br>  50% {<br>    transform: scale(1.5);<br>  }<br>  100% {<br>    transform: scale(1);<br>  }<br>}<br>@keyframes bounce-out {<br>  0% {<br>    transform: scale(1);<br>  }<br>  50% {<br>    transform: scale(1.5);<br>  }<br>  100% {<br>    transform: scale(0);<br>  }<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">- Custom Transition Classes</div><div class="line">    + enter-class</div><div class="line">    + enter-active-class</div><div class="line">    + enter-to-class (&gt;= 2.1.8 only)</div><div class="line">    + leave-class</div><div class="line">    + leave-active-class</div><div class="line">    + leave-to-class (&gt;= 2.1.8 only)</div><div class="line">- Using Transitions and Animations Together</div><div class="line">- Explicit Transition Durations:显式转换持续时间</div><div class="line">- JS Hooks</div><div class="line">###  Transitions on Initial Render</div><div class="line">###  Transitioning Between Elements</div><div class="line">- Transition Modes</div><div class="line">###  Transitioning Between Components</div><div class="line">## Transitioning State</div><div class="line">&gt;Vue’s transition system offers many simple ways to animate entering, </div><div class="line">leaving, and lists, but what about animating your data itself? For example: </div><div class="line">    </div><div class="line">    - numbers and calculations</div><div class="line">    - colors displayed</div><div class="line">    - the positions of SVG nodes</div><div class="line">    - the sizes and other properties of elements</div><div class="line">## Render Functions</div><div class="line">###  Basic</div><div class="line">&gt; Vue推荐用template构建html在多数场景。当真需要JS的全编程能力时再用render函数--一个接近编译器的可选的template.</div></pre></td></tr></table></figure></p>
<p>//小示例<br>Vue.component(‘anchored-heading’, {<br>  render: function (createElement) {<br>    return createElement(<br>      ‘h’ + this.level,   // tag name<br>      this.$slots.default // array of children<br>    )<br>  },<br>  props: {<br>    level: {<br>      type: Number,<br>      required: true<br>    }<br>  }<br>})<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">*Much simpler! Sort of. The code is shorter, but also requires greater familiarity with Vue instance properties.*</div><div class="line">###  createElement Arguments</div></pre></td></tr></table></figure></p>
<p>// @returns {VNode}<br>createElement(<br>  // {String | Object | Function}<br>  // An HTML tag name, component options, or function<br>  // returning one of these. Required.<br>  ‘div’,<br>  // {Object}<br>  // A data object corresponding to the attributes<br>  // you would use in a template. Optional.<br>  {<br>    // (see details in the next section below)<br>  },<br>  // {String | Array}<br>  // Children VNodes. Optional.<br>  [<br>    createElement(‘h1’, ‘hello world’),<br>    createElement(MyComponent, {<br>      props: {<br>        someProp: ‘foo’<br>      }<br>    }),<br>    ‘bar’<br>  ]<br>)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- The Data Object In-Depth</div></pre></td></tr></table></figure></p>
<p>{<br>  // Same API as <code>v-bind:class</code><br>  ‘class’: {<br>    foo: true,<br>    bar: false<br>  },<br>  // Same API as <code>v-bind:style</code><br>  style: {<br>    color: ‘red’,<br>    fontSize: ‘14px’<br>  },<br>  // Normal HTML attributes<br>  attrs: {<br>    id: ‘foo’<br>  },<br>  // Component props<br>  props: {<br>    myProp: ‘bar’<br>  },<br>  // DOM properties<br>  domProps: {<br>    innerHTML: ‘baz’<br>  },<br>  // Event handlers are nested under “on”, though<br>  // modifiers such as in v-on:keyup.enter are not<br>  // supported. You’ll have to manually check the<br>  // keyCode in the handler instead.<br>  on: {<br>    click: this.clickHandler<br>  },<br>  // For components only. Allows you to listen to<br>  // native events, rather than events emitted from<br>  // the component using vm.$emit.<br>  nativeOn: {<br>    click: this.nativeClickHandler<br>  },<br>  // Custom directives. Note that the binding’s<br>  // oldValue cannot be set, as Vue keeps track<br>  // of it for you.<br>  directives: [<br>    {<br>      name: ‘my-custom-directive’,<br>      value: ‘2’<br>      expression: ‘1 + 1’,<br>      arg: ‘foo’,<br>      modifiers: {<br>        bar: true<br>      }<br>    }<br>  ],<br>  // Scoped slots in the form of<br>  // { name: props =&gt; VNode | Array<vnode> }<br>  scopedSlots: {<br>    default: props =&gt; createElement(‘span’, props.text)<br>  },<br>  // The name of the slot, if this component is the<br>  // child of another component<br>  slot: ‘name-of-slot’<br>  // Other special top-level properties<br>  key: ‘myKey’,<br>  ref: ‘myRef’<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- Constraints: VNodes Must Be Unique</div><div class="line">###  Replacing Template Features with Plain JavaScript</div><div class="line">- v-if and v-for</div></pre></td></tr></table></figure></vnode></p>
<p>render: function (createElement) {<br>  if (this.items.length) {<br>    return createElement(‘ul’, this.items.map(function (item) {<br>      return createElement(‘li’, item.name)<br>    }))<br>  } else {<br>    return createElement(‘p’, ‘No items found.’)<br>  }<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- v-model:There is no direct v-model counterpart in render functions - you will have to implement the logic yourself:</div></pre></td></tr></table></figure></p>
<p>render: function (createElement) {<br>  var self = this<br>  return createElement(‘input’, {<br>    domProps: {<br>      value: self.value<br>    },<br>    on: {<br>      input: function (event) {<br>        self.value = event.target.value<br>      }<br>    }<br>  })<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- Event &amp; Key Modifiers</div><div class="line">- Slots</div><div class="line">###  JSX</div></pre></td></tr></table></figure></p>
<p>import AnchoredHeading from ‘./AnchoredHeading.vue’<br>new Vue({<br>  el: ‘#demo’,<br>  render (h) {<br>    return (<br>      <anchoredheading level="{1}"><br>        <span>Hello</span> world!<br>      </anchoredheading><br>    )<br>  }<br>})<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">###  Functional Components</div><div class="line">&gt; The anchored heading component we created earlier is relatively simple. It doesn’t manage any state, watch any </div><div class="line">state passed to it, and it has no lifecycle methods. Really, it’s just a function with some props.</div><div class="line">In cases like this, we can mark components as functional, which means that they’re stateless (no data) </div><div class="line">and instanceless (no this context). A functional component looks like this:</div></pre></td></tr></table></figure></p>
<p>Vue.component(‘my-component’, {<br>  functional: true,<br>  // To compensate for the lack of an instance,<br>  // we are now provided a 2nd context argument.<br>  render: function (createElement, context) {<br>    // …<br>  },<br>  // Props are optional<br>  props: {<br>    // …<br>  }<br>})<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">- slots() vs children</div><div class="line">## Custom Directives</div><div class="line">###  Intro</div><div class="line">&gt;In addition to the default set of directives shipped in core (v-model and v-show), Vue also allows you to register </div><div class="line">your own custom directives.</div><div class="line">###  Hook Functions:A directive definition object can provide several hook functions (all optional):</div><div class="line">- bind:called only once, when the directive is first bound to the element</div><div class="line">- inserted:called when the bound element has been inserted into its parent node</div><div class="line">- update:called after the containing component has updated, but possibly before its children have updated.</div><div class="line">- componentUpdated:called after the containing component and its children have updated.</div><div class="line">- unbind:called only once, when the directive is unbound from the element.</div><div class="line">###  Directive Hook Arguments</div><div class="line">&gt;Directive hooks are passed these arguments:</div><div class="line">- el:The element the directive is bound to. This can be used to directly manipulate the DOM.</div><div class="line">- binding:An object containing the following properties.</div><div class="line">    + name:The name of the directive, without the v- prefix.</div><div class="line">    + value: The value passed to the directive(v-my-directive=&quot;1 + 1&quot;)</div><div class="line">    + oldValue:The previous value, only available in update and componentUpdated. </div><div class="line">    + expression:he expression of the binding as a string(v-my-directive=&quot;1 + 1&quot;,).</div><div class="line">    + arg:he argument passed to the directive, if any(v-my-directive:foo).</div><div class="line">    + modifiers:n object containing modifiers, if any(v-my-directive.foo.bar, the modifiers object would be &#123; foo: true, bar: true &#125;).</div><div class="line">- vnode:The virtual node produced by Vue’s compiler. </div><div class="line">- oldVnode:The previous virtual node, only available in the update and componentUpdated hooks.</div></pre></td></tr></table></figure></p>
<p>//html</p>
<p><div id="hook-arguments-example" v-demo:foo.a.b="message"></div><br>//js<br>Vue.directive(‘demo’, {<br>  bind: function (el, binding, vnode) {<br>    var s = JSON.stringify<br>    el.innerHTML =<br>      ‘name: ‘       + s(binding.name) + ‘<br>‘ +<br>      ‘value: ‘      + s(binding.value) + ‘<br>‘ +<br>      ‘expression: ‘ + s(binding.expression) + ‘<br>‘ +<br>      ‘argument: ‘   + s(binding.arg) + ‘<br>‘ +<br>      ‘modifiers: ‘  + s(binding.modifiers) + ‘<br>‘ +<br>      ‘vnode keys: ‘ + Object.keys(vnode).join(‘, ‘)<br>  }<br>})<br>new Vue({<br>  el: ‘#hook-arguments-example’,<br>  data: {<br>    message: ‘hello!’<br>  }<br>});<br>/<em><br>name:”demo”<br>value:”hello!”<br>expression:”message”<br>argument:”foo”<br>modifiers:{“a”:true,”b”:true}<br>vnode keys:tag,data,children,elem,ns,context<br>functionalContext,key,componentOptions,componentInstance,parent,<br>raw,isStatic,isRootInsert,isComent,isCloned,isOnce
</em>/<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">###  Function Shorthand</div><div class="line">###  Object Literals</div><div class="line">&gt;如果指令需要多个值，可以传入一个 JavaScript 对象字面量。记住，指令函数能够接受所有合法类型的 Javascript 表达式。</div><div class="line">## Mixins</div><div class="line">###  Basics</div><div class="line">&gt;Mixins are a flexible way to distribute reusable functionalities for Vue components.</div><div class="line"> A mixin object can contain any component options. When a component uses a mixin, all options in the mixin will be </div><div class="line"> “mixed” into the component’s own options.</div></pre></td></tr></table></figure></p>
<p>// define a mixin object<br>var myMixin = {<br>  created: function () {<br>    this.hello()<br>  },<br>  methods: {<br>    hello: function () {<br>      console.log(‘hello from mixin!’)<br>    }<br>  }<br>}<br>// define a component that uses this mixin<br>var Component = Vue.extend({<br>  mixins: [myMixin]<br>})<br>var component = new Component() // -&gt; “hello from mixin!”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">###  Option Merging</div><div class="line">###  Global Mixin</div><div class="line">&gt;Use global mixins sparsely and carefully, </div><div class="line">because it affects every single Vue instance created, including third party components.</div><div class="line">###  Custom Option Merge Strategies</div><div class="line">## Plugins</div><div class="line">## Single File Components</div><div class="line">&gt; 在JS只用于增强相应view的中小型项目中传统写法凑效，在更复杂的项目或者前端完全由JS驱动，如下特色将会彰显</div><div class="line">- Global definitions force unique names for every component</div><div class="line">- String templates lack syntax highlighting and require ugly slashes for multiline HTML</div><div class="line">- No CSS support means that while HTML and JavaScript are modularized into components, CSS is conspicuously left out</div><div class="line">- No build step restricts us to HTML and ES5 JavaScript, rather than preprocessors like Pug (formerly Jade) and Babel</div><div class="line">All of these are solved by single-file components with a .vue extension, made possible with build tools such as Webpack or Browserify.</div><div class="line">## Production Deployment Tips：生产环境部署</div><div class="line">###  Turn on Production Mode</div><div class="line">- Without Build Tools ```vue.min.js</div></pre></td></tr></table></figure></p>
<ul>
<li>With Build Tools<blockquote>
<p>When using a build tool like Webpack or Browserify, the production mode will be determined by process.env.NODE_ENV<br>inside Vue’s source code, and it will be in development mode by default.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">var webpack = require(&apos;webpack&apos;)</div><div class="line">module.exports = &#123;</div><div class="line">  // ...</div><div class="line">  plugins: [</div><div class="line">    // ...</div><div class="line">    new webpack.DefinePlugin(&#123;</div><div class="line">      &apos;process.env&apos;: &#123;</div><div class="line">        NODE_ENV: &apos;&quot;production&quot;&apos;</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<h3 id="Pre-Compiling-Templates"><a href="#Pre-Compiling-Templates" class="headerlink" title="Pre-Compiling Templates"></a>Pre-Compiling Templates</h3><h2 id="Routing"><a href="#Routing" class="headerlink" title="Routing"></a>Routing</h2><h2 id="State-Management"><a href="#State-Management" class="headerlink" title="State Management"></a>State Management</h2><blockquote>
<p>Large applications can often grow in complexity, due to multiple pieces of state scattered across many<br>components and the interactions between them. To solve this problem, Vue offers vuex:<br>![<a href="http://vuejs.org/images/state.png][http://vuejs.org/images/state.png" target="_blank" rel="external">http://vuejs.org/images/state.png][http://vuejs.org/images/state.png</a>]</p>
<h2 id="Unit-Testing"><a href="#Unit-Testing" class="headerlink" title="Unit Testing"></a>Unit Testing</h2><h2 id="Server-Side-Rendering"><a href="#Server-Side-Rendering" class="headerlink" title="Server-Side Rendering"></a>Server-Side Rendering</h2><h2 id="TypeScript-Surport"><a href="#TypeScript-Surport" class="headerlink" title="TypeScript Surport"></a>TypeScript Surport</h2></blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/04/php/" itemprop="url">
                  php get started
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-03T23:25:10Z" content="2016-11-03">
              2016-11-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/php/" itemprop="url" rel="index">
                    <span itemprop="name">php</span>
                  </a>
                </span>

                
                

              
            </span>
          

          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><blockquote>
<p>PHP 是一种创建动态交互性站点的强有力的服务器端脚本语言。</p>
</blockquote>
<ul>
<li><p>php 是什么</p>
<ul>
<li><p>PHP（全称：PHP：Hypertext Preprocessor，即”PHP：超文本预处理器”）是一种通用开源脚本语言。</p>
</li>
<li><p>PHP 脚本在服务器上执行。</p>
</li>
<li><p>PHP 可免费下载使用。</p>
</li>
</ul>
</li>
<li>PHP 文件是什么？<ul>
<li>PHP 文件可包含文本、HTML、JavaScript代码和 PHP 代码</li>
<li>PHP 代码在服务器上执行，结果以纯 HTML 形式返回给浏览器</li>
<li>PHP 文件的默认文件扩展名是 “.php”</li>
</ul>
</li>
<li>PHP 能做什么？<ul>
<li>PHP 可以生成动态页面内容</li>
<li>PHP 可以创建、打开、读取、写入、关闭服务器上的文件</li>
<li>PHP 可以收集表单数据</li>
<li>PHP 可以发送和接收 cookies</li>
<li>PHP 可以添加、删除、修改您的数据库中的数据</li>
<li>PHP 可以限制用户访问您的网站上的一些页面</li>
<li>PHP 可以加密数据</li>
</ul>
</li>
</ul>
<h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">// PHP 代码</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$x=5;</div><div class="line">$y=6;</div><div class="line">$z=$x+$y;</div><div class="line">echo $z;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<ul>
<li>PHP 变量规则：<ul>
<li>变量以 $ 符号开始，后面跟着变量的名称</li>
<li>变量名必须以字母或者下划线字符开始</li>
<li>变量名只能包含字母数字字符以及下划线（A-z、0-9 和 _ ）</li>
<li>变量名不能包含空格</li>
<li>变量名是区分大小写的（$y 和 $Y 是两个不同的变量）</li>
</ul>
</li>
<li>PHP 是一门弱类型语言</li>
<li>PHP 变量作用域<ul>
<li>local</li>
<li>global(函数内访问全局变量)</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$x=5;</div><div class="line">$y=10;</div><div class="line"></div><div class="line">function myTest()</div><div class="line">&#123;</div><div class="line">global $x,$y;</div><div class="line">$y=$x+$y;</div><div class="line">&#125;</div><div class="line"></div><div class="line">myTest();</div><div class="line">echo $y; // 输出 15</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<pre><code>- static(保证函数内变量执行完后不被删除)
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"></div><div class="line">function myTest()</div><div class="line">&#123;</div><div class="line">static $x=0;</div><div class="line">echo $x;</div><div class="line">$x++;</div><div class="line">&#125;</div><div class="line"></div><div class="line">myTest();</div><div class="line">myTest();</div><div class="line">myTest();</div><div class="line"></div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<pre><code>- parameter(通过调用代码将值传递给函数的局部变量)
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"></div><div class="line">function myTest($x)</div><div class="line">&#123;</div><div class="line">echo $x;</div><div class="line">&#125;</div><div class="line"></div><div class="line">myTest(5);</div><div class="line"></div><div class="line">?&gt;</div><div class="line">```	</div><div class="line"></div><div class="line"># PHP 5 echo 和 print 语句</div><div class="line"># 数据类型</div><div class="line">- String</div><div class="line">- Integer</div><div class="line">- Float</div><div class="line">- Boolean</div><div class="line">- Array</div><div class="line">- Object</div><div class="line">- NULL</div><div class="line"></div><div class="line"># 常量</div></pre></td></tr></table></figure>
<p>bool define ( string $name , mixed $value [, bool $case_insensitive = false ] )<br>```</p>
<ul>
<li>该函数有三个参数:<ul>
<li>name：必选参数，常量名称，即标志符。</li>
<li>value：必选参数，常量的值。</li>
<li>case_insensitive ：可选参数，如果设置为 TRUE，该常量则大小写不敏感。默认是大小写敏感的。</li>
</ul>
</li>
</ul>
<h1 id="超级全局变量-系统中自带的变量，在一个脚本的全部作用域中都可用。"><a href="#超级全局变量-系统中自带的变量，在一个脚本的全部作用域中都可用。" class="headerlink" title="超级全局变量(系统中自带的变量，在一个脚本的全部作用域中都可用。)"></a>超级全局变量(系统中自带的变量，在一个脚本的全部作用域中都可用。)</h1><ul>
<li>PHP 超级全局变量列表:<ul>
<li>$GLOBALS</li>
<li>$_SERVER</li>
<li>$_REQUEST</li>
<li>$_POST</li>
<li>$_GET</li>
<li>$_FILES</li>
<li>$_ENV</li>
<li>$_COOKIE</li>
<li>$_SESSION</li>
</ul>
</li>
</ul>
<h1 id="条件，循环，选择，数组，函数-类JS"><a href="#条件，循环，选择，数组，函数-类JS" class="headerlink" title="条件，循环，选择，数组，函数(类JS)"></a>条件，循环，选择，数组，函数(类JS)</h1><h1 id="魔术变量"><a href="#魔术变量" class="headerlink" title="魔术变量"></a>魔术变量</h1><blockquote>
<p>PHP 向它运行的任何脚本提供了大量的预定义常量。<br>不过很多常量都是由不同的扩展库定义的，只有在加载了这些扩展库时才会出现，或者动态加载后，或者在编译时已经包括进去了。</p>
</blockquote>
<ul>
<li><strong>LINE</strong> : 文件中的当前行号</li>
<li><strong>FILE</strong> : 文件的完整路径和文件名</li>
<li><strong>DIR</strong> : 文件所在的目录</li>
<li><strong>FUNCTION</strong> : 函数名称</li>
<li><strong>CLASS</strong> : 返回该类被定义时的名字</li>
<li><strong>TRAIT</strong> : Trait 名包括其被声明的作用区域</li>
<li><strong>METHOD</strong> : 返回该方法被定义时的名字（区分大小写）</li>
<li><strong>NAMESPACE</strong>: 当前命名空间的名称（区分大小写）</li>
</ul>
<h1 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h1><p>PHP 命名空间可以解决以下两类问题：</p>
<ol>
<li><p>用户编写的代码与PHP内部的类/函数/常量或第三方类/函数/常量之间的名字冲突。</p>
</li>
<li><p>为很长的标识符名称(通常是为了缓解第一类问题而定义的)创建一个别名（或简短）的名称，提高源代码的可读性。</p>
</li>
</ol>
<h1 id="OOP"><a href="#OOP" class="headerlink" title="OOP"></a>OOP</h1><ul>
<li><p>类 − 定义了一件事物的抽象特点。类的定义包含了数据的形式以及对数据的操作。</p>
</li>
<li><p>对象 − 是类的实例。</p>
</li>
<li><p>成员变量 − 定义在类内部的变量。该变量的值对外是不可见的，但是可以通过成员函数访问，在类被实例化为对象后，该变量即可称为对象的属性。</p>
</li>
<li><p>成员函数 − 定义在类的内部，可用于访问对象的数据。</p>
</li>
<li><p>继承 − 继承性是子类自动共享父类数据结构和方法的机制，这是类之间的一种关系。在定义和实现一个类的时候，可以在一个已经存在的类的基础之上来进行，把这个已经存在的类所定义的内容作为自己的内容，并加入若干新的内容。</p>
</li>
<li><p>父类 − 一个类被其他类继承，可将该类称为父类，或基类，或超类。</p>
</li>
<li><p>子类 − 一个类继承其他类称为子类，也可称为派生类。</p>
</li>
<li><p>多态 − 多态性是指相同的操作或函数、过程可作用于多种类型的对象上并获得不同的结果。不同的对象，收到同一消息可以产生不同的结果，这种现象称为多态性。</p>
</li>
<li><p>重载 − 简单说，就是函数或者方法有同样的名称，但是参数列表不相同的情形，这样的同名不同参数的函数或者方法之间，互相称之为重载函数或者方法。</p>
</li>
<li><p>抽象性 − 抽象性是指将具有一致的数据结构（属性）和行为（操作）的对象抽象成类。一个类就是这样一种抽象，它反映了与应用有关的重要性质，而忽略其他一些无关内容。任何类的划分都是主观的，但必须与具体的应用有关。</p>
</li>
<li><p>封装 − 封装是指将现实世界中存在的某个客体的属性与行为绑定在一起，并放置在一个逻辑单元内。</p>
</li>
<li><p>构造函数 − 主要用来在创建对象时初始化对象， 即为对象成员变量赋初始值，总与new运算符一起使用在创建对象的语句中。</p>
</li>
<li><p>析构函数 − 析构函数(destructor) 与构造函数相反，当对象结束其生命周期时（例如对象所在的函数已调用完毕），系统自动执行析构函数。析构函数往往用来做”清理善后” 的工作（例如在建立对象时用new开辟了一片内存空间，应在退出前在析构函数中用delete释放）。</p>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/01/commonJS/" itemprop="url">
                  CommonJS规范
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-01T13:05:24Z" content="2016-11-01">
              2016-11-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/CommonJS/" itemprop="url" rel="index">
                    <span itemprop="name">CommonJS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>Node应用有采用CommonJS规范的模块组成，据此每个文件就是一模块，有自己的作用域。其内定义的<br>变量，函数，类都是私有的，对其它文件不可见。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// example.js</div><div class="line">var x = 5;</div><div class="line">var addX = function (value) &#123;</div><div class="line">  return value + x;</div><div class="line">&#125;;</div><div class="line">//分享变量</div><div class="line">global.warning = true;//不推荐</div></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li><p>CommonJS规定，每个模块内部module变量代表当前模块，其exports属性是对外接口，加载某个模块即是加载其module.exports<br>属性。特点如下：</p>
<ol>
<li>所有代码运行在模块作用域，不污染全局作用域；</li>
<li>模块可以多次加载但一次运行，结果缓存以后再加载便直接读取缓存结果；若想让模块再次运行必须清除缓存；</li>
<li>模块加载顺序，与其在代码中出现的位置一致。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var x = 5;</div><div class="line">var addX = function (value) &#123;</div><div class="line">  return value + x;</div><div class="line">&#125;;</div><div class="line">module.exports.x = x;</div><div class="line">module.exports.addX = addX;</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>require 方法也可用于加载模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var example = require(&apos;./example.js&apos;);</div><div class="line">console.log(example.x); // 5</div><div class="line">console.log(example.addX(1)); // 6</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="module对象"><a href="#module对象" class="headerlink" title="module对象"></a>module对象</h2><blockquote>
<p>Node内部提供一个Module构造函数，所有模块都是Module的实例;每个模块内部都有一个代表当前模块的module<br>对象</p>
<ul>
<li>有以下属性：<ul>
<li>module.id: 标识符，常为带有绝对路径的模块文件名</li>
<li>module.filename: 模块文件名，带有绝对路径</li>
<li>module.loaded: 返回布尔值，表示模块是否已经加载完成</li>
<li>module.parent：返回一个对象，表示调用该模块的模块</li>
<li>module.children： 返回一个数组，表示该模块要调用到的其它模块</li>
<li>module.exports； 表示模块对外输出的值<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">//main.js</div><div class="line">var http = require(&apos;./package.json&apos;);</div><div class="line">console.log(module);</div><div class="line">//输出如下</div><div class="line">Module &#123;</div><div class="line">  id: &apos;.&apos;,</div><div class="line">  exports: &#123;&#125;,</div><div class="line">  parent: null,</div><div class="line">  filename: &apos;D:\\me\\webpack\\webpack-demo\\main.js&apos;,</div><div class="line">  loaded: false,</div><div class="line">  children:</div><div class="line">   [ Module &#123;</div><div class="line">       id: &apos;D:\\me\\webpack\\webpack-demo\\package.json&apos;,</div><div class="line">       exports: [Object],</div><div class="line">       parent: [Circular],</div><div class="line">       filename: &apos;D:\\me\\webpack\\webpack-demo\\package.json&apos;,</div><div class="line">       loaded: true,</div><div class="line">       children: [],</div><div class="line">       paths: [Object] &#125; ],</div><div class="line">  paths:</div><div class="line">   [ &apos;D:\\me\\webpack\\webpack-demo\\node_modules&apos;,</div><div class="line">     &apos;D:\\me\\webpack\\node_modules&apos;,</div><div class="line">     &apos;D:\\me\\node_modules&apos;,</div><div class="line">     &apos;D:\\node_modules&apos; ] &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li><p>module.exports属性:表示当前模块对外输出(module.exports变量)的接口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var EventEmitter = require(&apos;events&apos;).EventEmitter;</div><div class="line">module.exports = new EventEmitter();</div><div class="line"></div><div class="line">setTimeout(function() &#123;</div><div class="line">  module.exports.emit(&apos;ready&apos;);</div><div class="line">&#125;, 1000);</div><div class="line">//也可以写成</div><div class="line">var a = require(&apos;./a&apos;);</div><div class="line">a.on(&apos;ready&apos;, function() &#123;</div><div class="line">  console.log(&apos;module a is ready&apos;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>exports变量: Node为每个模块提供一个指向module.exports的exports变量，等同于在每个模块头部加入</p>
<figure class="highlight plain"><figcaption><span>exports=module.exports```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">### AMD规范与CommonJS规范的兼容性</div><div class="line">&gt; CommonJS规范加载模块是同步的，AMD规范则是非同步加载模块，允许指定回调函数。</div><div class="line">因Node主要用于服务器编程，模块文件一般已经存于本地硬盘，故加载起来较快，无需考虑非同步加载方式，</div><div class="line">所以较适用CommonJS规范。若是浏览器环境，则一般考虑AMD规范。</div></pre></td></tr></table></figure>
</li>
</ul>
<p>//AMD 使用define定义模块<br>define([‘package/lib’], function(lib){<br>  function foo(){<br>    lib.log(‘hello world!’);<br>  }<br>  return {<br>    foo: foo<br>  };<br>});<br>//兼容CommonJS规范时写成。。。<br>define(function (require, exports, module){<br>  var someModule = require(“someModule”);<br>  var anotherModule = require(“anotherModule”);</p>
<p>  someModule.doTehAwesome();<br>  anotherModule.doMoarAwesome();</p>
<p>  exports.asplode = function (){<br>    someModule.doTehAwesome();<br>    anotherModule.doMoarAwesome();<br>  };<br>});<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">### require命令</div><div class="line">- 基本用法</div><div class="line">&gt; Node使用CommonJS模块规范，内置require命令加载文件。其基本功能是读入并执行一个js文件</div><div class="line">，然后返回该模块的exports对象，无则报错。</div><div class="line">- 加载规则</div><div class="line">&gt; require命令用于加载文件，默认后缀.js</div></pre></td></tr></table></figure></p>
<p>var foo = require(‘foo’);<br>//  等同于<br>var foo = require(‘foo.js’);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">根据参数不同，require命令去不同路径寻找模块文件</div><div class="line">    1 . &apos;/&apos;:加载的是一个位于绝对路径的模块文件```require(&apos;/home/marco/foo.js&apos;)</div></pre></td></tr></table></figure></p>
<pre><code>2. &apos;./&apos;:加载相对路径文件
3. &apos;&apos;:加载默认提供的核心模块(Node系统安装目录中)或者位于各级node_modules目录的已安装模块。
旨在使不同的模块可以将所依赖的模块本地化。
4. &apos;example-module/path/to/file&apos;：从前到后加载路径
5. 若指定模块文件未发现则尝试为文件名添加.js,.json,.node后再去搜索
6. 若想得到require命令加载的文件的确切名使用<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- 目录加载规则</div><div class="line">&gt; 为便于组织我们常把相关文件放于一个目录里边，此时最好为该目录设置一个入口文件，让require</div><div class="line">方法可以据此加载整个目录。</div></pre></td></tr></table></figure>
</code></pre><p>// package.json<br>{ “name” : “some-library”,<br>  “main” : “./lib/some-library.js” }<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">require发现参数字符串指向一个目录以后，会自动查看该目录的package.json文件，然后加载main字段指定的入口文件。</div><div class="line">如果package.json文件没有main字段，或者根本就没有package.json文件，则会加载该目录下的index.js文件或index.node文件。</div><div class="line">- 模块缓存</div><div class="line">&gt; 首次加载某模块时，Node会缓存；而后加载便直接从缓存读取该模块的module.exports属性</div><div class="line">- 环境变量NODE_PATH</div><div class="line">&gt; Node执行一个脚本时，会先查看其环境变量(以冒号分割的绝对路径)。在其它位置找不到指定模块时，Node会</div><div class="line">去这些路径查找。</div><div class="line">- 模块的循环加载</div><div class="line">&gt;第二次加载a.js和b.js时，会直接从缓存读取exports属性，所以a.js和b.js内部的console.log语句都不会执行了。</div><div class="line">- require.main</div><div class="line">&gt; 判断模块是直接执行还是调用执行，直接执行则```require.main===module</div></pre></td></tr></table></figure></p>
<h3 id="模块的加载机制"><a href="#模块的加载机制" class="headerlink" title="模块的加载机制"></a>模块的加载机制</h3><blockquote>
<p>CommonJS模块的加载机制是：输入的是被输出值的拷贝。<br>即一旦输出，一个值模块内部的变化就影响不到该值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//lib.js</div><div class="line">var c = 3;</div><div class="line">function add() &#123;return c++;&#125;</div><div class="line">module.exports = &#123;c,add,&#125;</div><div class="line">//main.js</div><div class="line">var c = require(&apos;./lib&apos;).c;</div><div class="line">var add = require(&apos;./lib&apos;).add;</div><div class="line">console.log(c);</div><div class="line">add();</div><div class="line">console.log(add());</div><div class="line">console.log(c);//3 4 3</div></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li>require的内部处理流程<blockquote>
<p>require在CommonJS中用于加载其它模块的命令。其实不是一全局命令，而是指向当前模块的<br>调用了Node内部命令Module._load的module.require命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">Module._load = function(request, parent, isMain) &#123;</div><div class="line">  // 1. 检查 Module._cache，是否缓存之中有指定模块</div><div class="line">  // 2. 如果缓存之中没有，就创建一个新的Module实例</div><div class="line">        //require(): 加载外部模块</div><div class="line">        //require.resolve()：将模块名解析到一个绝对路径</div><div class="line">        //require.main：指向主模块</div><div class="line">        //require.cache：指向所有缓存的模块</div><div class="line">        //require.extensions：根据文件的后缀名，调用不同的执行函数</div><div class="line">  // 3. 将它保存到缓存</div><div class="line">  // 4. 使用 module.load() 加载指定的模块文件，</div><div class="line">  //    读取文件内容之后，使用 module.compile() 执行文件代码</div><div class="line">  // 5. 如果加载/解析过程报错，就从缓存删除该模块</div><div class="line">  // 6. 返回该模块的 module.exports</div><div class="line">&#125;;</div><div class="line">Module.prototype._compile = function(content, filename) &#123;</div><div class="line">  // 1. 生成一个require函数，指向module.require</div><div class="line">  // 2. 加载其他辅助方法到require</div><div class="line">  // 3. 将文件内容放到一个函数之中，该函数可调用 require</div><div class="line">  // 4. 执行该函数</div><div class="line">&#125;;</div><div class="line"></div><div class="line">(function (exports, require, module, __filename, __dirname) &#123;</div><div class="line">  // YOUR CODE INJECTED HERE!</div><div class="line">&#125;);</div><div class="line">/*一旦require函数准备完毕，整个所要加载的脚本被放到一个新函数中以避免全局污染。</div><div class="line">Module._compile方法是同步执行的，所以Module._load要等它执行完成，才会向用户返回module.exports的值。</div><div class="line">*/</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/01/node/" itemprop="url">
                  Node7.7.2--explore
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-01T13:05:24Z" content="2016-11-01">
              2016-11-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/NODE/" itemprop="url" rel="index">
                    <span itemprop="name">NODE</span>
                  </a>
                </span>

                
                

              
            </span>
          

          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><blockquote>
<p>Node是一个基于Chrome的V8JS引擎的JS运行时。Node运用事件驱动(event-driven)，非阻塞I/O模型(non-blocking I/O)使其轻量和高效。Node的包管理器npm，是世界上生态系统最大的开源库。</p>
</blockquote>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>作为异步事件驱动的JS运行时，Node旨在构建大型网络应用。如下示例中，可以并发(concurrently)处理很多连接。<br>每次连接中，回调都被触发(fired)，但如果没有事做Node保持休眠。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">const http = require(&apos;http&apos;);</div><div class="line">const hostname = &apos;127.0.0.1&apos;;</div><div class="line">const port = 3000;</div><div class="line">const server = http.createServer((req, res) =&gt; &#123;</div><div class="line">  res.statusCode = 200;</div><div class="line">  res.setHeader(&apos;Content-Type&apos;, &apos;text/plain&apos;);</div><div class="line">  res.end(&apos;Hello World\n&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">server.listen(port, hostname, () =&gt; &#123;</div><div class="line">  console.log(`Server running at http://$&#123;hostname&#125;:$&#123;port&#125;/`);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>这点与当今使用OS线程(OS threads)的更常见并发模型对比鲜明。基于线程(Thread-based)的网络相对低效且难以使用。<br>此外，Node的用户不必担心死锁(dead-locking)过程因为压根没有。几乎没有函数在Node中直接执行I/O<br>所以进程永不阻塞。因此，大规模系统在Node中可以非常合理地开发。</p>
<p>Node设计上类似Ruby的Event Machine或Python的Twisted等系统。Node在事件模型( event model)上更进一步。<br>它提供一个事件循环(event loop)而非库(library)作为运行时的构建(runtime construct)。其它系统中事件循<br>环启动之初经常存在阻塞的调用(blocking call)。通常行为(behavior)通过脚本起初的回调来定义,且最终通过启动一个阻塞<br>的回调(如EventMachine::run())启动一个服务。在Node中不存在如此的start-the-event-loop调用。Node中执行了<br>输入脚本便直接进入事件循环。当没有更多回调去执行时，Node存在event loop；此举正如浏览器JS—event loop对用户隐藏。</p>
<p>HTTP是Node中的头等公民，设计时考虑流和低延迟。这使得Node非常适合于Web库或框架的基础。</p>
<p>只因Node旨在无线程，并非不能利用环境中的多核。子进程可以过使用我们的child_process.fork（）API生成，并且设计为<br>易于与之通信。基于同一接口的是集群模块，它允许您在进程之间共享套接字，以便通过内核实现负载平衡。</p>
<h2 id="Node-js-v7-7-2-Documentation"><a href="#Node-js-v7-7-2-Documentation" class="headerlink" title="Node.js v7.7.2 Documentation"></a>Node.js v7.7.2 Documentation</h2><blockquote>
<p>Throughout the documentation, you will see indications of a section’s stability.<br> The Node.js API is still somewhat changing, and as it matures, certain parts are more reliable than others.<br>Some are so proven, and so relied upon, that they are unlikely to ever change at all. Others are brand new and<br>experimental, or known to be hazardous and in the process of being redesigned.</p>
</blockquote>
<p>用法和示例：</p>
<figure class="highlight plain"><figcaption><span>[options] [v8 options] [script.js | -e "script"] [arguments]```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">### Assertion Testing断言测试</div><div class="line"></div><div class="line">&gt; Node内置模块，用于断言。若表达式不符预期则抛出错误。种类很多但常用的只有几种。</div><div class="line"></div><div class="line">- assert(value[, message])</div></pre></td></tr></table></figure>
<p>var assert = require(‘assert’);<br>assert(true);// OK<br>assert(1);// OK<br>assert(false);// throws “AssertionError: false == true”<br>assert(false==0);// OK<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- assert.deepEqual(actual, expected[, message])</div></pre></td></tr></table></figure></p>
<p>const assert = require(‘assert’);</p>
<p>const o1 = {<br>  a: {<br>    b: 1<br>  }<br>};<br>const o2 = {<br>  a: {<br>    b: 2<br>  }<br>};<br>const o3 = {<br>  a: {<br>    b: 1<br>  }<br>};<br>const o4 = Object.create(o1);</p>
<p>assert.deepEqual(o1, o1); //OK<br>assert.deepEqual(o1, o2); // AssertionError: { a: { b: 1 } } deepEqual { a: { b: 2 } }<br>// values of b are different<br>assert.deepEqual(o1, o3); //OK<br>assert.deepEqual(o1, o4); // AssertionError: { a: { b: 1 } } deepEqual {}<br>// Prototypes are ignored<br>assert.deepEqual(o1, o4.<strong>proto</strong>); //OK</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- assert.deepStrictEqual(actual, expected[, message])</div></pre></td></tr></table></figure>
<p>assert.deepEqual({a:1}, {a:’1’});// OK, because 1 == ‘1’<br>assert.deepStrictEqual({a:1}, {a:’1’});// because 1 !== ‘1’ using strict equality<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- assert.doesNotThrow(block[, error][, message])</div><div class="line"></div><div class="line">- assert.equal(actual, expected[, message])</div></pre></td></tr></table></figure></p>
<p>//相当于==<br>assert.equal(1, 1);// OK, 1 == 1<br>assert.equal(1, ‘1’);// OK, 1 == ‘1’<br>assert.equal(1, 2);// AssertionError: 1 == 2<br>assert.equal({a: {b: 1}}, {a: {b: 1}});//AssertionError: { a: { b: 1 } } == { a: { b: 1 } }<br>{a:{b:1}}=={a:{b:1}};//false</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- assert.fail(actual, expected, message, operator)</div><div class="line">- assert.ifError(value)</div><div class="line">- assert.notDeepEqual(actual, expected[, message])</div><div class="line">- assert.notDeepStrictEqual(actual, expected[, message])</div><div class="line">- assert.notEqual(actual, expected[, message])</div><div class="line">- assert.notStrictEqual(actual, expected[, message])</div><div class="line">- assert.ok(value[, message])</div><div class="line">- assert.strictEqual(actual, expected[, message])</div><div class="line"></div><div class="line">### Buffer </div><div class="line"></div><div class="line">&gt; 在ES6引入TypedArray之前，JS中只有字符串数据类型，没有二进制数据类型；JS比较擅长字符串处理但处理二进制数据(比如TCP数据)就不足。</div><div class="line">在Node中，定义了一个Buffer类，用于专门存放二进制文件的缓冲区，及方法处理，可以全局访问。Node中Buffer类是随Node内核</div><div class="line">一起发布的核心库，为Node提供了一种存储原始数据的方法，可以处理二进制数据，每当需要在Node</div><div class="line">中处理I/O操作中移动的数据时，就有可能使用。原始数据存放在Buffer类的实例中，一个Buffer类似于</div><div class="line">一个整数数组，但对于V8堆内存之外的一块原始内存。</div><div class="line"></div><div class="line">- 与TypedArray关系</div><div class="line"></div><div class="line">&gt;TypedArray构造函数可以接受Buffer实例作为参数生成一个二进制数组.二进制数组的操作，与Buffer对象的操作基本上是兼容的，只有轻微的差异。比如，二进制数组的slice方法返回原内存的拷贝，而Buffer对象的slice方法创造原内存的一个视图（view）。</div><div class="line"></div><div class="line">- 示例</div></pre></td></tr></table></figure>
<p>// Creates a zero-filled Buffer of length 10.<br>const buf1 = Buffer.alloc(10);</p>
<p>// Creates a Buffer of length 10, filled with 0x1.<br>const buf2 = Buffer.alloc(10, 1);</p>
<p>// Creates an uninitialized buffer of length 10.<br>// This is faster than calling Buffer.alloc() but the returned<br>// Buffer instance might contain old data that needs to be<br>// overwritten using either fill() or write().<br>const buf3 = Buffer.allocUnsafe(10);</p>
<p>// Creates a Buffer containing [0x1, 0x2, 0x3].<br>const buf4 = Buffer.from([1, 2, 3]);</p>
<p>// Creates a Buffer containing UTF-8 bytes [0x74, 0xc3, 0xa9, 0x73, 0x74].<br>const buf5 = Buffer.from(‘tést’);</p>
<p>// Creates a Buffer containing Latin-1 bytes [0x74, 0xe9, 0x73, 0x74].<br>const buf6 = Buffer.from(‘tést’, ‘latin-1’);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- 类的方法</div><div class="line"></div><div class="line">    + Buffer.isEncoding():返回一个布尔值，表征是否为指定编码</div><div class="line"></div><div class="line">    ```Buffer.isEncoding(&apos;utf8&apos;)</div></pre></td></tr></table></figure>
<pre><code>+ Buffer.isBuffer():接受一个对象为参数，表征是否为Buffer实例

<figure class="highlight plain"><figcaption><span>// false ```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">+ Buffer.byteLength():返回字符串实际占据的字节长度</div><div class="line">```Buffer.byteLength(&apos;Hello&apos;, &apos;utf8&apos;) // 5</div></pre></td></tr></table></figure>

+ Buffer.concat()

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var i1 = new Buffer(&apos;Hello&apos;);</div><div class="line">var i2 = new Buffer(&apos; &apos;);</div><div class="line">var i3 = new Buffer(&apos;World&apos;);</div><div class="line">Buffer.concat([i1, i2, i3], 10).toString()</div><div class="line">// &apos;Hello Worl&apos;</div></pre></td></tr></table></figure>
</code></pre><ul>
<li><p>实例方法</p>
<ul>
<li><p>write()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var buf = new Buffer(5);</div><div class="line">buf.write(&apos;He&apos;);</div><div class="line">buf.write(&apos;l&apos;, 2);</div><div class="line">buf.write(&apos;lo&apos;, 3);</div><div class="line">console.log(buf.toString());</div><div class="line">// &quot;Hello&quot;</div></pre></td></tr></table></figure>
</li>
<li><p>slice()</p>
</li>
<li>toString()</li>
<li>toJSON()</li>
</ul>
</li>
</ul>
<h3 id="C-C-Addons-插件"><a href="#C-C-Addons-插件" class="headerlink" title="C/C++ Addons 插件"></a>C/C++ Addons 插件</h3><blockquote>
<p>Node.js 插件是用 C 或 C++ 编写的动态链接共享对象，可以使用 require() 函数加载到 Node.js 中，且像普通的<br>Node.js 模块一样被使用。 它们主要用于为运行于 Node.js 的 JavaScript 和 C/C++ 库之间提供接口。</p>
</blockquote>
<ul>
<li>Hello world<ul>
<li>Building</li>
<li>Linking to Node.js’ own dependencies</li>
<li>Loading Addons using require()</li>
</ul>
</li>
<li>Native Abstractions for Node.js</li>
<li>Addon examples<ul>
<li>Function arguments</li>
<li>Callbacks</li>
<li>Object factory</li>
<li>Function factory</li>
<li>Wrapping C++ objects</li>
<li>Factory of wrapped objects</li>
<li>Passing wrapped objects around</li>
<li>AtExit hooks<ul>
<li>void AtExit(callback, args)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Child-Process"><a href="#Child-Process" class="headerlink" title="Child Process"></a>Child Process</h3><blockquote>
<p>默认情况下，在 Node.js 的父进程和衍生的子进程之间会建立 stdin、stdout 和 stderr 的管道。<br>这使得数据可以以非阻塞的方式在这些管道流通。 注意，有些程序会在内部使用行缓冲 I/O。 虽然这并不影响 Node.js，但这意味着发送到子过程的数据可能无法被立即消费。</p>
</blockquote>
<h3 id="Cluster-集群"><a href="#Cluster-集群" class="headerlink" title="Cluster(集群)"></a>Cluster(集群)</h3><h3 id="Command-Line-Options"><a href="#Command-Line-Options" class="headerlink" title="Command Line Options"></a>Command Line Options</h3><ul>
<li><p>Synopsis</p>
</li>
<li><p>Options</p>
<ul>
<li>-v, –version</li>
<li>-h, –help</li>
<li>-e, –eval “script”</li>
<li>-p, –print “script”</li>
<li>-c, –check</li>
<li>-i, –interactive</li>
<li>-r, –require module</li>
<li>–no-deprecation</li>
<li>–trace-deprecation</li>
<li>–throw-deprecation</li>
<li>–no-warnings</li>
<li>–trace-warnings</li>
<li>–trace-sync-io</li>
<li>–trace-events-enabled</li>
<li>–trace-event-categories</li>
<li>–zero-fill-buffers</li>
<li>–preserve-symlinks</li>
<li>–track-heap-objects</li>
<li>–prof-process</li>
<li>–v8-options</li>
<li>–tls-cipher-list=list</li>
<li>–enable-fips</li>
<li>–force-fips</li>
<li>–openssl-config=file</li>
<li>–use-openssl-ca, –use-bundled-ca</li>
<li>–icu-data-dir=file</li>
</ul>
</li>
<li><p>Environment Variables</p>
</li>
</ul>
<h3 id="Console"><a href="#Console" class="headerlink" title="Console"></a>Console</h3><blockquote>
<p>console 模块提供了一个简单的调试控制台，它与 Web 浏览器提供的 JavaScript 控制台的机制类似。</p>
</blockquote>
<ul>
<li>Class: Console<ul>
<li>new Console(stdout[, stderr])</li>
<li>console.assert(value[, message][, …args])</li>
<li>console.dir(obj[, options])</li>
<li>console.error([data][, …args])</li>
<li>console.info([data][, …args])</li>
<li>console.log([data][, …args])</li>
<li>console.time(label)</li>
<li>console.timeEnd(label)</li>
<li>console.trace([message][, …args])</li>
<li>console.warn([data][, …args])</li>
</ul>
</li>
</ul>
<h3 id="Crypto-加密"><a href="#Crypto-加密" class="headerlink" title="Crypto(加密)"></a>Crypto(加密)</h3><ul>
<li>Determining if crypto support is unavailable</li>
<li>Class: Certificate<ul>
<li>new crypto.Certificate()</li>
<li>certificate.exportChallenge(spkac)</li>
<li>certificate.exportPublicKey(spkac)</li>
<li>certificate.verifySpkac(spkac)</li>
</ul>
</li>
<li>Class: Cipher<ul>
<li>cipher.final([output_encoding])</li>
<li>cipher.setAAD(buffer)</li>
<li>cipher.getAuthTag()</li>
<li>cipher.setAutoPadding(auto_padding=true)</li>
<li>cipher.update(data[, input_encoding][, output_encoding])</li>
</ul>
</li>
<li>Class: Decipher<ul>
<li>decipher.final([output_encoding])</li>
<li>decipher.setAAD(buffer)</li>
<li>decipher.setAuthTag(buffer)</li>
<li>decipher.setAutoPadding(auto_padding=true)</li>
<li>decipher.update(data[, input_encoding][, output_encoding])</li>
</ul>
</li>
<li>Class: DiffieHellman<ul>
<li>diffieHellman.computeSecret(other_public_key[, input_encoding][, output_encoding])</li>
<li>diffieHellman.generateKeys([encoding])</li>
<li>diffieHellman.getGenerator([encoding])</li>
<li>diffieHellman.getPrime([encoding])</li>
<li>diffieHellman.getPrivateKey([encoding])</li>
<li>diffieHellman.getPublicKey([encoding])</li>
<li>diffieHellman.setPrivateKey(private_key[, encoding])</li>
<li>diffieHellman.setPublicKey(public_key[, encoding])</li>
<li>diffieHellman.verifyError</li>
</ul>
</li>
<li>Class: ECDH<ul>
<li>ecdh.computeSecret(other_public_key[, input_encoding][, output_encoding])</li>
<li>ecdh.generateKeys([encoding[, format]])</li>
<li>ecdh.getPrivateKey([encoding])</li>
<li>ecdh.getPublicKey([encoding[, format]])</li>
<li>ecdh.setPrivateKey(private_key[, encoding])</li>
<li>ecdh.setPublicKey(public_key[, encoding])</li>
</ul>
</li>
<li>Class: Hash<ul>
<li>hash.digest([encoding])</li>
<li>hash.update(data[, input_encoding])</li>
</ul>
</li>
<li>Class: Hmac<ul>
<li>hmac.digest([encoding])</li>
<li>hmac.update(data[, input_encoding])</li>
</ul>
</li>
<li>Class: Sign<ul>
<li>sign.sign(private_key[, output_format])</li>
<li>sign.update(data[, input_encoding])</li>
</ul>
</li>
<li>Class: Verify<ul>
<li>verifier.update(data[, input_encoding])</li>
<li>verifier.verify(object, signature[, signature_format])<br>crypto module methods and properties</li>
<li>crypto.constants</li>
<li>crypto.DEFAULT_ENCODING</li>
<li>crypto.fips</li>
<li>crypto.createCipher(algorithm, password)</li>
<li>crypto.createCipheriv(algorithm, key, iv)</li>
<li>crypto.createCredentials(details)</li>
<li>crypto.createDecipher(algorithm, password)</li>
<li>crypto.createDecipheriv(algorithm, key, iv)</li>
<li>crypto.createDiffieHellman(prime[, prime_encoding][, generator][, generator_encoding])</li>
<li>crypto.createDiffieHellman(prime_length[, generator])</li>
<li>crypto.createECDH(curve_name)</li>
<li>crypto.createHash(algorithm)</li>
<li>crypto.createHmac(algorithm, key)</li>
<li>crypto.createSign(algorithm)</li>
<li>crypto.createVerify(algorithm)</li>
<li>crypto.getCiphers()</li>
<li>crypto.getCurves()</li>
<li>crypto.getDiffieHellman(group_name)</li>
<li>crypto.getHashes()</li>
<li>crypto.pbkdf2(password, salt, iterations, keylen, digest, callback)</li>
<li>crypto.pbkdf2Sync(password, salt, iterations, keylen, digest)</li>
<li>crypto.privateDecrypt(private_key, buffer)</li>
<li>crypto.privateEncrypt(private_key, buffer)</li>
<li>crypto.publicDecrypt(public_key, buffer)</li>
<li>crypto.publicEncrypt(public_key, buffer)</li>
<li>crypto.randomBytes(size[, callback])</li>
<li>crypto.setEngine(engine[, flags])</li>
<li>crypto.timingSafeEqual(a, b)</li>
</ul>
</li>
<li>Notes<ul>
<li>Legacy Streams API (pre Node.js v0.10)</li>
<li>Recent ECDH Changes</li>
<li>Support for weak or compromised algorithms</li>
</ul>
</li>
<li>Crypto Constants<ul>
<li>OpenSSL Options</li>
<li>OpenSSL Engine Constants</li>
<li>Other OpenSSL Constants</li>
<li>Node.js Crypto Constants</li>
</ul>
</li>
</ul>
<h3 id="Debugger"><a href="#Debugger" class="headerlink" title="Debugger"></a>Debugger</h3><blockquote>
<p>Node.js 包含一个进程外的调试工具，可以通过基于 TCP 的协议和内置调试客户端访问。</p>
</blockquote>
<figure class="highlight plain"><figcaption><span>node debug main.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt; Debugger listening on 127.0.0.1:5858</div><div class="line">connecting to 127.0.0.1:5858 ... ok</div><div class="line">break in D:\me\webpack\webpack-demo\main.js:1</div><div class="line">&gt; 1 var x = 5;</div><div class="line">  2 setTimeout(() =&gt; &#123;</div><div class="line">  3     debugger;</div><div class="line">debug&gt; cont</div><div class="line">&lt; hello</div><div class="line">break in D:\me\webpack\webpack-demo\main.js:3</div><div class="line">  1 var x = 5;</div><div class="line">  2 setTimeout(() =&gt; &#123;</div><div class="line">&gt; 3     debugger;</div><div class="line">  4     console.log(&apos;world&apos;);</div><div class="line">  5 &#125;, 1000);</div><div class="line">debug&gt; next</div><div class="line">break in D:\me\webpack\webpack-demo\main.js:4</div><div class="line">  2 setTimeout(() =&gt; &#123;</div><div class="line">  3     debugger;</div><div class="line">&gt; 4     console.log(&apos;world&apos;);</div><div class="line">  5 &#125;, 1000);</div><div class="line">  6 console.log(&apos;hello&apos;);</div><div class="line">debug&gt; quit</div></pre></td></tr></table></figure>
<ul>
<li>Watchers</li>
<li>Command reference<ul>
<li>Stepping</li>
<li>Breakpoints</li>
<li>Information</li>
<li>Execution control</li>
<li>Various</li>
</ul>
</li>
<li>Advanced Usage</li>
<li>V8 Inspector Integration for Node.js</li>
</ul>
<h3 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h3><ul>
<li>dns.getServers()</li>
<li>dns.lookup(hostname[, options], callback)<br>Supported getaddrinfo flags</li>
<li>dns.lookupService(address, port, callback)</li>
<li>dns.resolve(hostname[, rrtype], callback)</li>
<li>dns.resolve4(hostname[, options], callback)</li>
<li>dns.resolve6(hostname[, options], callback)</li>
<li>dns.resolveCname(hostname, callback)</li>
<li>dns.resolveNaptr(hostname, callback)</li>
<li>dns.resolveNs(hostname, callback)</li>
<li>dns.resolvePtr(hostname, callback)</li>
<li>dns.resolveSoa(hostname, callback)</li>
<li>dns.resolveSrv(hostname, callback)</li>
<li>dns.resolveTxt(hostname, callback)</li>
<li>dns.reverse(ip, callback)</li>
<li>dns.setServers(servers)</li>
<li>Error codes</li>
<li>Implementation considerations<ul>
<li>dns.lookup()</li>
<li>dns.resolve(), dns.resolve*() and dns.reverse()</li>
</ul>
</li>
</ul>
<h3 id="Domain-deprecated"><a href="#Domain-deprecated" class="headerlink" title="Domain(deprecated)"></a>Domain(deprecated)</h3><h3 id="Errors"><a href="#Errors" class="headerlink" title="Errors"></a>Errors</h3><ul>
<li>Error Propagation and Interception<ul>
<li>Node.js style callbacks</li>
</ul>
</li>
<li>Class: Error<ul>
<li>new Error(message)</li>
<li>Error.captureStackTrace(targetObject[,constructorOpt])</li>
<li>Error.stackTraceLimit</li>
<li>error.message</li>
<li>error.stack</li>
</ul>
</li>
<li>Class: RangeError</li>
<li>Class: ReferenceError</li>
<li>Class: SyntaxError</li>
<li>Class: TypeError</li>
<li>Exceptions vs. Errors</li>
<li>System Errors<ul>
<li>Class: System Error<ul>
<li>error.code</li>
<li>error.errno</li>
<li>error.syscall</li>
<li>error.path</li>
<li>error.address</li>
<li>error.port</li>
</ul>
</li>
<li>Common System Errors</li>
</ul>
</li>
</ul>
<blockquote>
<p>Node是单线程运行环境，一旦抛出异常未被捕获便引起整个进程崩溃，一般有三种方法传播一个错误。</p>
</blockquote>
<ul>
<li>throw抛出异常</li>
</ul>
<blockquote>
<p>最常用，但无法捕获异步运行代码抛出的异常。</p>
</blockquote>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">    try &#123;</div><div class="line">      process.nextTick(() =&gt; &#123;</div><div class="line">        throw new Error(&apos;error&apos;)</div><div class="line">      &#125;);</div><div class="line">    &#125; catch (err) &#123;</div><div class="line">      //can not catch it</div><div class="line">      concole.log(err);</div><div class="line">    &#125;   </div><div class="line">    try &#123;</div><div class="line">      setTimeout(() =&gt; &#123;</div><div class="line">        throw new Error(&apos;error&apos;)</div><div class="line">      &#125;, 10)</div><div class="line">    &#125; catch (err) &#123;</div><div class="line">      //can not catch it</div><div class="line">      console.log(err);</div><div class="line">    &#125;</div><div class="line">//   使用process.nextTick和setTimeout在下一轮事件循环抛出两个异常代表一步操作错误，均无法被catch捕获，因catch已运行结束 </div><div class="line">//解决方案之一：将错误代码也放到异步执行</div><div class="line">    function async(cb, err) &#123;</div><div class="line">      setTimeout(function() &#123;</div><div class="line">        try &#123;</div><div class="line">          if (true)</div><div class="line">            throw new Error(&quot;woops!&quot;);</div><div class="line">          else</div><div class="line">            cb(&quot;done&quot;);</div><div class="line">        &#125; catch(e) &#123;</div><div class="line">          err(e);</div><div class="line">        &#125;</div><div class="line">      &#125;, 2000)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    async(function(res) &#123;</div><div class="line">      console.log(&quot;received:&quot;, res);</div><div class="line">    &#125;, function(err) &#123;</div><div class="line">      console.log(&quot;Error: async threw an exception:&quot;, err);</div><div class="line">    &#125;);</div><div class="line">    // Error: async threw an exception: Error: woops!Node很少用此方法，如JSON.parse时</div></pre></td></tr></table></figure>
</code></pre><ul>
<li>将error对象传递给回调函数，发出错误</li>
</ul>
<blockquote>
<p>Node将错误对象作为首个参数传入回调函数</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">fs.readFile(&apos;/foo.txt&apos;, function(err, data) &#123;</div><div class="line">  if (err !== null) throw err;</div><div class="line">  console.log(data);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<ul>
<li>通过EventEmitter接口，发出error事件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var EventEmitter = require(&apos;events&apos;).EventEmitter;</div><div class="line">var emitter = new EventEmitter();</div><div class="line">emitter.emit(&apos;error&apos;, new Error(&apos;something bad happened&apos;));</div><div class="line">//如果没有对error事件部署监听函数，会导致整个应用程序崩溃。所以，一般总是必须同时部署下面的代码。</div><div class="line">emitter.on(&apos;error&apos;, function(err) &#123;</div><div class="line">  console.error(&apos;出错：&apos; + err.message);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<ul>
<li>uncaughtException事件</li>
</ul>
<blockquote>
<p>异常未被捕获便触发</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">var logger = require(&apos;tracer&apos;).console();</div><div class="line">process.on(&apos;uncaughtException&apos;, function(err) &#123;</div><div class="line">  console.error(&apos;Error caught in uncaughtException event:&apos;, err);</div><div class="line">  //uncaughtException触发后，最好记录错误日志，然后结束Node进程</div><div class="line">  logger.log(err);</div><div class="line">  process.exit(1);</div><div class="line">&#125;);</div><div class="line">try &#123;</div><div class="line">  setTimeout(function()&#123;</div><div class="line">    throw new Error(&quot;error&quot;);</div><div class="line">  &#125;,1);</div><div class="line">&#125; catch (err) &#123;</div><div class="line">  //can not catch it</div><div class="line">  console.log(err);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>unhandledRejection事件</li>
</ul>
<h3 id="Events模块"><a href="#Events模块" class="headerlink" title="Events模块"></a>Events模块</h3><blockquote>
<p>回调函数让Node可以处理异步操作，但其只能有开始和结束两种状态。对于多状态的异步操作，Node<br>提供EventEmitter接口，通过事件解决多状态异步操作响应问题。</p>
</blockquote>
<ul>
<li>概述</li>
</ul>
<blockquote>
<p>EventEmitter是event模块提供的一个接口，可以在任何对象上部署。</p>
</blockquote>
<ul>
<li>Passing arguments and this to listeners</li>
<li>Asynchronous vs. Synchronous</li>
<li>Handling events only once</li>
<li>Error events</li>
<li>Class: EventEmitter<ul>
<li>Event: ‘newListener’</li>
<li>Event: ‘removeListener’</li>
<li>EventEmitter.defaultMaxListeners</li>
<li>emitter.addListener(eventName, listener)</li>
<li>emitter.emit(eventName[, …args])</li>
<li>emitter.eventNames()</li>
<li>emitter.getMaxListeners()</li>
<li>emitter.listenerCount(eventName)</li>
<li>emitter.listeners(eventName)</li>
<li>emitter.on(eventName, listener)</li>
<li>emitter.once(eventName, listener)</li>
<li>emitter.prependListener(eventName, listener)</li>
<li>emitter.prependOnceListener(eventName, listener)</li>
<li>emitter.removeAllListeners([eventName])</li>
<li>emitter.removeListener(eventName, listener)</li>
<li>emitter.setMaxListeners(n)</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">var EventEmitter = require(&apos;events&apos;).EventEmitter;</div><div class="line">var emitter = new EventEmitter();</div><div class="line">//事件发生器的实例方法用on监听事件，然后emit用来发出事件。</div><div class="line">var EventEmitter = require(&apos;events&apos;).EventEmitter;</div><div class="line">var emitter = new EventEmitter();</div><div class="line"></div><div class="line">emitter.on(&apos;event1&apos;, () =&gt; console.log(&apos;event1 has occred&apos;));</div><div class="line">emitter.on(&apos;event2&apos;, () =&gt; console.log(&apos;event2 has occred&apos;));</div><div class="line">//EventEmitter对象的事件触发和监听是同步的</div><div class="line">console.log(&apos;start&apos;);</div><div class="line">emitter.emit(&apos;event1&apos;);</div><div class="line">emitter.emit(&apos;event2&apos;);</div><div class="line">console.log(&apos;end&apos;);</div></pre></td></tr></table></figure>
<ul>
<li>EventEmitter接口的部署</li>
</ul>
<blockquote>
<p>Event Emitter 接口可以部署在任意对象上，使得这些对象也能订阅和发布消息。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">var EventEmitter = require(&apos;events&apos;).EventEmitter;</div><div class="line">var util = require(&apos;util&apos;);</div><div class="line"></div><div class="line">function Dog(name) &#123;</div><div class="line">  this.name = name;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// Dog.prototype.__proto__ = EventEmitter.prototype;</div><div class="line">//Dog.prototype=Object.create(EventEmitter.prototype);</div><div class="line">util.inherits(Dog, EventEmitter);//利用内置继承</div><div class="line"></div><div class="line">var haha = new Dog(&apos;haha&apos;);</div><div class="line">haha.on(&apos;bark&apos;, function() &#123;</div><div class="line">  console.log(this.name + &apos; barked...&apos;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">haha.emit(&apos;bark&apos;);</div><div class="line">//hahabarked...</div></pre></td></tr></table></figure>
<ul>
<li>Event Emitter实例方法<ul>
<li>emitter.on(name, f) 对事件name指定监听函数f</li>
<li>emitter.addListener(name, f) addListener是on方法的别名</li>
<li>emitter.once(name, f) 与on方法类似，但是监听函数f是一次性的，使用后自动移除</li>
<li>emitter.listeners(name) 返回一个数组，成员是事件name所有监听函数</li>
<li>emitter.removeListener(name, f) 移除事件name的监听函数f(具名函数)</li>
<li>emitter.setMaxListeners(num) Node默认允许同一个事件最多可以指定10个回调函数。移除num个事件</li>
<li>emitter.removeAllListeners(name) 移除事件name的所有监听函数</li>
<li>emitter.listeners(f) 返回该事件所有回调函数组成的数组</li>
</ul>
</li>
<li>错误捕获：事件处理过程中抛出的错误可用try-catch捕获</li>
<li>事件类型： Events模块默认支持两个事件<ul>
<li>newListener事件：添加新的回调函数时触发。</li>
<li>removeListener事件：移除回调时触发。</li>
</ul>
</li>
</ul>
<h3 id="File-System"><a href="#File-System" class="headerlink" title="File System"></a>File System</h3><blockquote>
<p>Node提供一组类似UNIX(POSIX)标准的文件操作API</p>
</blockquote>
<ul>
<li>Buffer API</li>
<li>Class: fs.FSWatcher<ul>
<li>Event: ‘change’</li>
<li>Event: ‘error’</li>
<li>watcher.close()</li>
</ul>
</li>
<li>Class: fs.ReadStream<ul>
<li>Event: ‘close’</li>
<li>Event: ‘open’</li>
<li>readStream.bytesRead</li>
<li>readStream.path</li>
</ul>
</li>
<li>Class: fs.Stats<ul>
<li>Stat Time Values</li>
</ul>
</li>
<li>Class: fs.WriteStream<ul>
<li>Event: ‘close’</li>
<li>Event: ‘open’</li>
<li>writeStream.bytesWritten</li>
<li>writeStream.path</li>
</ul>
</li>
<li>fs.access(path[, mode], callback)</li>
<li>fs.accessSync(path[, mode])</li>
<li>fs.appendFile(file, data[, options], - callback)</li>
<li>fs.appendFileSync(file, data[, options])</li>
<li>fs.chmod(path, mode, callback)</li>
<li>fs.chmodSync(path, mode)</li>
<li>fs.chown(path, uid, gid, callback)</li>
<li>fs.chownSync(path, uid, gid)</li>
<li>fs.close(fd, callback)</li>
<li>fs.closeSync(fd)</li>
<li>fs.constants</li>
<li>fs.createReadStream(path[, options])</li>
<li>fs.createWriteStream(path[, options])</li>
<li>fs.existsSync(path)</li>
<li>fs.fchmod(fd, mode, callback)</li>
<li>fs.fchmodSync(fd, mode)</li>
<li>fs.fchown(fd, uid, gid, callback)</li>
<li>fs.fchownSync(fd, uid, gid)</li>
<li>fs.fdatasync(fd, callback)</li>
<li>fs.fdatasyncSync(fd)</li>
<li>fs.fstat(fd, callback)</li>
<li>fs.fstatSync(fd)</li>
<li>fs.fsync(fd, callback)</li>
<li>fs.fsyncSync(fd)</li>
<li>fs.ftruncate(fd, len, callback)</li>
<li>fs.ftruncateSync(fd, len)</li>
<li>fs.futimes(fd, atime, mtime, callback)</li>
<li>fs.futimesSync(fd, atime, mtime)</li>
<li>fs.lchmod(path, mode, callback)</li>
<li>fs.lchmodSync(path, mode)</li>
<li>fs.lchown(path, uid, gid, callback)</li>
<li>fs.lchownSync(path, uid, gid)</li>
<li>fs.link(existingPath, newPath, callback)</li>
<li>fs.linkSync(existingPath, newPath)</li>
<li>fs.lstat(path, callback)</li>
<li>fs.lstatSync(path)</li>
<li>fs.mkdir(path[, mode], callback)</li>
<li>fs.mkdirSync(path[, mode])</li>
<li>fs.mkdtemp(prefix[, options], callback)</li>
<li>fs.mkdtempSync(prefix[, options])</li>
<li>fs.open(path, flags[, mode], callback)</li>
<li>fs.openSync(path, flags[, mode])</li>
<li>fs.read(fd, buffer, offset, length, - position, callback)</li>
<li>fs.readdir(path[, options], callback)</li>
<li>fs.readdirSync(path[, options])</li>
<li>fs.readFile(file[, options], callback)</li>
<li>fs.readFileSync(file[, options])</li>
<li>fs.readlink(path[, options], callback)</li>
<li>fs.readlinkSync(path[, options])</li>
<li>fs.readSync(fd, buffer, offset, length, - position)</li>
<li>fs.realpath(path[, options], callback)</li>
<li>fs.realpathSync(path[, options])</li>
<li>fs.rename(oldPath, newPath, callback)</li>
<li>fs.renameSync(oldPath, newPath)</li>
<li>fs.rmdir(path, callback)</li>
<li>fs.rmdirSync(path)</li>
<li>fs.stat(path, callback)</li>
<li>fs.statSync(path)</li>
<li>fs.symlink(target, path[, type], callback)</li>
<li>fs.symlinkSync(target, path[, type])</li>
<li>fs.truncate(path, len, callback)</li>
<li>fs.truncateSync(path, len)</li>
<li>fs.unlink(path, callback)</li>
<li>fs.unlinkSync(path)</li>
<li>fs.unwatchFile(filename[, listener])</li>
<li>fs.utimes(path, atime, mtime, callback)</li>
<li>fs.utimesSync(path, atime, mtime)</li>
<li>fs.watch(filename[, options][, listener])<ul>
<li>Caveats<ul>
<li>Availability</li>
<li>Inodes</li>
<li>Filename Argument</li>
</ul>
</li>
</ul>
</li>
<li>fs.watchFile(filename[, options], listener)</li>
<li>fs.write(fd, buffer[, offset[, length[, - position]]], callback)</li>
<li>fs.write(fd, string[, position[, -encoding]], callback)</li>
<li>fs.writeFile(file, data[, options],  callback)</li>
<li>fs.writeFileSync(file, data[, options])</li>
<li>fs.writeSync(fd, buffer[, offset[,  length[, position]]])</li>
<li>fs.writeSync(fd, string[, position[, encoding]])</li>
<li>FS Constants<ul>
<li>File Access Constants</li>
<li>File Open Constants</li>
<li>File Type Constants</li>
<li>File Mode Constants- </li>
</ul>
</li>
<li><p>readFile()/readFileSync()</p>
<ul>
<li><p>readFile():异步读取数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">fs.readFile(&apos;./image.png&apos;, function (err, buffer) &#123;</div><div class="line">  if (err) throw err;</div><div class="line">  process(buffer);//若是相对路径则是相对当前脚本所在的路径</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>readFileSync():同步读取文件，返回一个字符串。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var text = fs.readFileSync(fileName, &apos;utf8&apos;);   </div><div class="line">// 将文件按行拆成数组</div><div class="line">text.split(/\r?\n/).forEach(function (line) &#123;</div><div class="line">  // ...</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>writeFile()/writeFileSync()</p>
<ul>
<li><p>writeFile():异步写入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">fs.writeFile(&apos;message.txt&apos;, &apos;Hello Node.js&apos;,&apos;utf8&apos;, (err) =&gt; &#123;</div><div class="line">  if (err) throw err;</div><div class="line">  console.log(&apos;It\&apos;s saved!&apos;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>writeFileSync()</p>
</li>
</ul>
</li>
<li>exists(path,callback):判断给定路径是否存在</li>
<li>mkdir()/writeFile()/readFile()</li>
<li>mkdirSync()/writeFileSync()/readFileSync()</li>
<li>readdir()/readdirSync() :readdir方法用于读取目录，返回一个所包含的文件和子目录的数组。</li>
<li>start():参数为一文件或目录，产生一个包含该文件或目录具体信息的对象。判断处理的是文件还是目录。</li>
<li>watchFile()/unwatchFile():监听文件变化</li>
<li>createReadStream():打开大文件，创建一个读取操作的数据流。</li>
<li>createWriteStream():创建一个写入数据流对象，其write方法用于写入数据，end方法用于结束写入操作。</li>
</ul>
<h3 id="Globals"><a href="#Globals" class="headerlink" title="Globals"></a>Globals</h3><blockquote>
<p>Global Object:所有属性均可在程序的任何地方访问，即全局变量。相当于浏览器中的window。<br>所有对象都是global对象的属性。</p>
</blockquote>
<ul>
<li>全局对象<ul>
<li>global<br>类似window对象，但每个文件都是模块，其内变量均为该模块私有其它模块无法获取</li>
<li>process<br>表示Node所处的当前进程，允许开发者与之互动</li>
<li>console<br>提供命令行环境中的标准输入输出功能</li>
</ul>
</li>
<li>全局函数<ul>
<li>setTimeout()</li>
<li>clearTimeout()</li>
<li>setInterval()</li>
<li>clearInterval()</li>
<li>require():加载模块</li>
<li>Buffer()：操作二进制数据</li>
</ul>
</li>
<li><p>全局变量：在最外层定义的变量，全局对象的属性，隐式定义的变量</p>
<ul>
<li>__filename:当前运行脚本文件名</li>
<li>__dirname:当前运行脚本所在目录</li>
<li>伪全局变量:实际为模块内部的局部变量，指向对象个面具模块不同而不同，但所以模块均适用。<ul>
<li>module</li>
<li>module.exports</li>
<li>exports<br>Node中不可能在最外层定义变量，因所有用户代码都属于当前模块，而模块本身不是最外层上下文。</li>
</ul>
</li>
</ul>
</li>
<li><p>__filename: 当前正在执行的脚本文件名。将输出文件所在位置的绝对路径且和命令行参数所指定的<br>文件名不一定相同。在模块中返回模块文件路径。</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//main.js  </div><div class="line">console.log(__filename);// 输出全局变量 __filename 的值</div><div class="line">$ node main.js</div><div class="line">D:\me\webpack\webpack-demo\main.js</div></pre></td></tr></table></figure>
<ul>
<li>__dirname:当前执行脚本所在的目录</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//main.js  </div><div class="line">console.log(__dirname);// 输出全局变量 __dirname 的值</div><div class="line">$ node main.js</div><div class="line">D:\me\webpack\webpack-demo</div></pre></td></tr></table></figure>
<h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><ul>
<li>JS函数调用堆栈：函数被调用时便被压入堆栈顶部，运行完成则被移出堆栈顶部；其数据结构为FIFO。</li>
<li><p>回调：<br>  异步编程最基本的方法，node按顺序执行异步逻辑时一般采用后续传递的方式。<br>  即将后续逻辑封装在回调函数中作为起始函数的参数，逐层嵌套，以此让程序按期望执行。</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//callback.js</div><div class="line">fuction learn(sth)&#123;</div><div class="line">    console.log(sth);</div><div class="line">&#125;</div><div class="line">function we(callback,sth)&#123;</div><div class="line">    sth+=&apos;is cool&apos;;</div><div class="line">    callback(sth);</div><div class="line">&#125;</div><div class="line">we(learn,&apos;Node&apos;);</div><div class="line">we((sth)=&gt;console.log(sth),&apos;react&apos;);</div></pre></td></tr></table></figure>
</li>
<li><p>同步/异步：关注的是消息通信机制 (synchronous communication/ asynchronous communication)。<br>  同步：由调用者主动等待这个调用的结果。执行任务执行顺序与任务排列顺序一致，上一步任务执行完毕才能开始下一步程序。<br>  异步：调用在发出之后，这个调用就直接返回了，所以没有返回结果。每个任务都有一个或多个回调函数，<br>  程序执行顺序与任务排列顺序无关。</p>
</li>
<li>I/O：磁盘的写入和读出，数据的输入和输出</li>
<li>单线程/多线程：前者–程序功能按顺序执行，前续功能执行结束后续功能才能执行开始；后者：反之。</li>
<li>阻塞/非阻塞：关注的是程序在等待调用结果（消息，返回值）时的状态。同步的原因导致阻塞结果，异步的原因导致非阻塞结果。<br>  阻塞：调用结果返回之前，当前线程会被挂起。调用线程只有在得到结果之后才会返回。<br>  非阻塞：在不能立刻得到结果之前，该调用不会阻塞当前线程。</li>
<li><p>事件/事件驱动：函数执行的一种方式，即为某个事件注册了回调函数，该函数不会立即执行而是等事件被触发(EventEmitter)之后才执行。<br>![event loop][<a href="http://www.runoob.com/wp-content/uploads/2015/09/event_loop.jpg" target="_blank" rel="external">http://www.runoob.com/wp-content/uploads/2015/09/event_loop.jpg</a>]<br>  事件类似于主题，其上的事件处理函数相当于观察者(Observer)。</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">var events = require(&apos;events&apos;);</div><div class="line">// 创建 eventEmitter 对象</div><div class="line">var eventEmitter = new events.EventEmitter();</div><div class="line">var connectHandler = function connected() &#123;</div><div class="line">   console.log(&apos;连接成功。&apos;);</div><div class="line">   eventEmitter.emit(&apos;data_received&apos;);</div><div class="line">&#125;</div><div class="line">eventEmitter.on(&apos;connection&apos;, connectHandler);</div><div class="line">eventEmitter.on(&apos;data_received&apos;, function()&#123;</div><div class="line">   console.log(&apos;数据接收成功。&apos;);</div><div class="line">&#125;);</div><div class="line">eventEmitter.emit(&apos;connection&apos;);</div><div class="line">console.log(&quot;程序执行完毕。&quot;);</div></pre></td></tr></table></figure>
</li>
<li><p>基于事件驱动的回调：注册事件驱动的回调。</p>
</li>
<li>事件循环：event loop一种事件管理机制(FIFO)，若有大量的异步操作，IO的耗时操作及计时器控制的延时操作，<br>  它们完成的时候都要调用相应的回调函数，<br>  从而完成一些密集的任务，又不会阻塞整个程序执行的流程。<ul>
<li>Node是单线程单进程的应用程序，通过事件和回调支持并发故性能高。</li>
<li>Node的每个API都是作为一个独立线程运行的异步的，使用异步函数调用并处理并发。</li>
<li>Node基本上所有事件机制都是设计模式中的观察者模式。</li>
<li>单线程类似进入一个while(true)循环，直到没有事件观察者退出，每个异步事件都生成一个事件观察者。若有事件发生则回调。</li>
</ul>
</li>
<li>HTTP小爬虫</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var http = require(&apos;http&apos;);</div><div class="line">var url = &apos;http://www.imooc.com/video/7965&apos;;</div><div class="line"></div><div class="line">http.get(url, (res) =&gt; &#123;</div><div class="line">  var html = &apos;&apos;;</div><div class="line">  res.on(&apos;data&apos;, data =&gt; html += data)</div><div class="line">  res.on(&apos;end&apos;, () =&gt; console.log(html))</div><div class="line">&#125;).on(&apos;error&apos;, () =&gt; console.log(&apos;error...&apos;))</div></pre></td></tr></table></figure>
<ul>
<li><p>函数传递是如何让HTTP服务器工作的:事件驱动与回调</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var http = require(&quot;http&quot;);</div><div class="line">function onRequest(request, response) &#123;</div><div class="line">  response.writeHead(200, &#123;&quot;Content-Type&quot;: &quot;text/plain&quot;&#125;);</div><div class="line">  response.write(&quot;Hello World&quot;);</div><div class="line">  response.end();</div><div class="line">&#125;</div><div class="line">http.createServer(onRequest).listen(8888);</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h3><ul>
<li>Class: https.Agent</li>
<li>Class: https.Server<ul>
<li>server.setTimeout(msecs, callback)</li>
<li>server.timeout</li>
</ul>
</li>
<li>https.createServer(options[, requestListener])<ul>
<li>server.close([callback])</li>
<li>server.listen(handle[, callback])</li>
<li>server.listen(path[, callback])</li>
<li>server.listen(port[, host][, backlog][, callback])</li>
</ul>
</li>
<li>https.get(options, callback)</li>
<li>https.globalAgent</li>
<li>https.request(options, callback)</li>
</ul>
<h3 id="Modules"><a href="#Modules" class="headerlink" title="Modules"></a>Modules</h3><blockquote>
<p>Modules是Node应用程序的基本组成部分，文件和模块一一对应，使Node文件可以相互调用</p>
</blockquote>
<ul>
<li>Accessing the main module</li>
<li>Addenda: Package Manager Tips</li>
<li>All Together…</li>
<li>Caching<ul>
<li>Module Caching Caveats</li>
</ul>
</li>
<li>Core Modules</li>
<li>Cycles</li>
<li>File Modules</li>
<li>Folders as Modules</li>
<li>Loading from node_modules Folders</li>
<li>Loading from the global folders</li>
<li>The module wrapper</li>
<li>The module Object<ul>
<li>module.children</li>
<li>module.exports</li>
<li>exports shortcut</li>
<li>module.filename</li>
<li>module.id</li>
<li>module.loaded</li>
<li>module.parent</li>
<li>module.require(id) </li>
</ul>
</li>
<li><p>Node提供了exports和require两个对象，前者是模块公开的接口，后者用于从外部获取一个模块的接口即所获取模块的exports对象。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">//hello.js</div><div class="line">exports.world=function()&#123;&#125;//通过exports对象把world作为模块的访问接口</div><div class="line">//main.js</div><div class="line">var world=require(&apos;./hello&apos;);//加载该模块便可访问hello.js中exports对象的成员函数了。</div><div class="line">module.exports=function()&#123;&#125;/*只把一个对象封装到模块中，</div><div class="line">外部引用该模块时其接口对象即要输出的Hello对象本身，而非原先的exports*/</div></pre></td></tr></table></figure>
</li>
<li><p>Node的require方法中的文件查找策略如下：</p>
</li>
</ul>
<p>![<a href="http://www.runoob.com/wp-content/uploads/2014/03/nodejs-require.jpg][http://www.runoob.com/wp-content/uploads/2014/03/nodejs-require.jpg" target="_blank" rel="external">http://www.runoob.com/wp-content/uploads/2014/03/nodejs-require.jpg][http://www.runoob.com/wp-content/uploads/2014/03/nodejs-require.jpg</a>]<br>    Node中的四类模块(一种原生模块三种文件模块)</p>
<pre><code>1. 原生模块：http,fs,path等
2. ./,../相对路径的文件模块
3. /pathtomodule/mod,绝对路径模块
4. mod，非原生模块的文件模块
</code></pre><h3 id="Net"><a href="#Net" class="headerlink" title="Net"></a>Net</h3><ul>
<li>Class: net.Server<ul>
<li>Event: ‘close’</li>
<li>Event: ‘connection’</li>
<li>Event: ‘error’</li>
<li>Event: ‘listening’</li>
<li>server.address()</li>
<li>server.close([callback])</li>
<li>server.getConnections(callback)</li>
<li>server.listen(handle[, backlog][, callback])</li>
<li>server.listen(options[, callback])</li>
<li>server.listen(path[, backlog][, callback])</li>
<li>server.listen([port][, hostname][, backlog][- , callback])</li>
<li>server.listening</li>
<li>server.maxConnections</li>
<li>server.ref()</li>
<li>server.unref()</li>
</ul>
</li>
<li>Class: net.Socket<ul>
<li>new net.Socket([options])</li>
<li>Event: ‘close’</li>
<li>Event: ‘connect’</li>
<li>Event: ‘data’</li>
<li>Event: ‘drain’</li>
<li>Event: ‘end’</li>
<li>Event: ‘error’</li>
<li>Event: ‘lookup’</li>
<li>Event: ‘timeout’</li>
<li>socket.address()</li>
<li>socket.bufferSize</li>
<li>socket.bytesRead</li>
<li>socket.bytesWritten</li>
<li>socket.connect(options[, connectListener])</li>
<li>socket.connect(path[, connectListener])</li>
<li>socket.connect(port[, host][, - connectListener])</li>
<li>socket.connecting</li>
<li>socket.destroy([exception])</li>
<li>socket.destroyed</li>
<li>socket.end([data][, encoding])</li>
<li>socket.localAddress</li>
<li>socket.localPort</li>
<li>socket.pause()</li>
<li>socket.ref()</li>
<li>socket.remoteAddress</li>
<li>socket.remoteFamily</li>
<li>socket.remotePort</li>
<li>socket.resume()</li>
<li>socket.setEncoding([encoding])</li>
<li>socket.setKeepAlive([enable][, initialDelay])</li>
<li>socket.setNoDelay([noDelay])</li>
<li>socket.setTimeout(timeout[, callback])</li>
<li>socket.unref()</li>
<li>socket.write(data[, encoding][, callback])</li>
</ul>
</li>
<li>net.connect(options[, connectListener])</li>
<li>net.connect(path[, connectListener])</li>
<li>net.connect(port[, host][, connectListener])</li>
<li>net.createConnection(options[, connectListener])</li>
<li>net.createConnection(path[, connectListener])</li>
<li>net.createConnection(port[, host][, connectListener])</li>
<li>net.createServer([options][, connectionListener])</li>
<li>net.isIP(input)</li>
<li>net.isIPv4(input)</li>
<li>net.isIPv6(input)</li>
</ul>
<h3 id="OS"><a href="#OS" class="headerlink" title="OS"></a>OS</h3><ul>
<li>os.EOL</li>
<li>os.arch()</li>
<li>os.constants</li>
<li>os.cpus()</li>
<li>os.endianness()</li>
<li>os.freemem()</li>
<li>os.homedir()</li>
<li>os.hostname()</li>
<li>os.loadavg()</li>
<li>os.networkInterfaces()</li>
<li>os.platform()</li>
<li>os.release()</li>
<li>os.tmpdir()</li>
<li>os.totalmem()</li>
<li>os.type()</li>
<li>os.uptime()</li>
<li>os.userInfo([options])</li>
<li>OS Constants<ul>
<li>Signal Constants</li>
<li>Error Constants<ul>
<li>POSIX Error Constants</li>
<li>Windows Specific Error Constants</li>
</ul>
</li>
<li>libuv Constants</li>
</ul>
</li>
</ul>
<h3 id="Path"><a href="#Path" class="headerlink" title="Path"></a>Path</h3><blockquote>
<p>为路由提供请求的URL和其它需要的GET/POST参数，而后据此执行程序。</p>
</blockquote>
<ul>
<li>Windows vs. POSIX</li>
<li>path.basename(path[, ext])</li>
<li>path.delimiter</li>
<li>path.dirname(path)</li>
<li>path.extname(path)</li>
<li>path.format(pathObject)</li>
<li>path.isAbsolute(path)</li>
<li>path.join([…paths])</li>
<li>path.normalize(path)</li>
<li>path.parse(path)</li>
<li>path.posix</li>
<li>path.relative(from, to)</li>
<li>path.resolve([…paths])</li>
<li>path.sep</li>
<li>path.win32</li>
</ul>
<h3 id="Process"><a href="#Process" class="headerlink" title="Process"></a>Process</h3><blockquote>
<p>Node是单线程事件驱动处理并发的，每个子进程都有三个流对象：child.stdin,child.stdout,<br>child.stderr.可能会共享父进程的stdio流或者可以是独立的被导流的流对象。</p>
</blockquote>
<ul>
<li>Process Events<ul>
<li>Event: ‘beforeExit’</li>
<li>Event: ‘disconnect’</li>
<li>Event: ‘exit’</li>
<li>Event: ‘message’</li>
<li>Event: ‘rejectionHandled’</li>
<li>Event: ‘uncaughtException’</li>
<li>Warning: Using ‘uncaughtException’ correctly</li>
<li>Event: ‘unhandledRejection’</li>
<li>Event: ‘warning’</li>
<li>Emitting custom warnings</li>
<li>Signal Events</li>
</ul>
</li>
<li>process.abort()</li>
<li>process.arch</li>
<li>process.argv</li>
<li>process.argv0</li>
<li>process.channel</li>
<li>process.chdir(directory)</li>
<li>process.config</li>
<li>process.connected</li>
<li>process.cpuUsage([previousValue])</li>
<li>process.cwd()</li>
<li>process.disconnect()</li>
<li>process.emitWarning(warning[, name][, ctor])<ul>
<li>Avoiding duplicate warnings</li>
</ul>
</li>
<li>process.env</li>
<li>process.execArgv</li>
<li>process.execPath</li>
<li>process.exit([code])</li>
<li>process.exitCode</li>
<li>process.getegid()</li>
<li>process.geteuid()</li>
<li>process.getgid()</li>
<li>process.getgroups()</li>
<li>process.getuid()</li>
<li>process.hrtime([time])</li>
<li>process.initgroups(user, extra_group)</li>
<li>process.kill(pid[, signal])</li>
<li>process.mainModule</li>
<li>process.memoryUsage()</li>
<li>process.nextTick(callback[, …args])</li>
<li>process.pid</li>
<li>process.platform</li>
<li>process.release</li>
<li>process.send(message[, sendHandle[, options]][, callback])</li>
<li>process.setegid(id)</li>
<li>process.seteuid(id)</li>
<li>process.setgid(id)</li>
<li>process.setgroups(groups)</li>
<li>process.setuid(id)</li>
<li>process.stderr</li>
<li>process.stdin</li>
<li>process.stdout<ul>
<li>A note on process I/O</li>
</ul>
</li>
<li>process.title</li>
<li>process.umask([mask])</li>
<li>process.uptime()</li>
<li>process.version</li>
<li>process.versions<ul>
<li>Exit Codes</li>
</ul>
</li>
<li>创建子进程方法：<ul>
<li>exec-child_process.exec</li>
<li>spawn-child_process.spawn</li>
<li>fork-child_process.fork</li>
</ul>
</li>
</ul>
<h3 id="Punycode"><a href="#Punycode" class="headerlink" title="Punycode"></a>Punycode</h3><h3 id="Query-Strings"><a href="#Query-Strings" class="headerlink" title="Query Strings"></a>Query Strings</h3><ul>
<li>querystring.escape(str)</li>
<li>querystring.parse(str[, sep[, eq[, options]]])</li>
<li>querystring.stringify(obj[, sep[, eq[, options]]])</li>
<li>querystring.unescape(str)</li>
</ul>
<h3 id="Readline"><a href="#Readline" class="headerlink" title="Readline"></a>Readline</h3><ul>
<li>Class: Interface<ul>
<li>Event: ‘close’</li>
<li>Event: ‘line’</li>
<li>Event: ‘pause’</li>
<li>Event: ‘resume’</li>
<li>Event: ‘SIGCONT’</li>
<li>Event: ‘SIGINT’</li>
<li>Event: ‘SIGTSTP’</li>
<li>rl.close()</li>
<li>rl.pause()</li>
<li>rl.prompt([preserveCursor])</li>
<li>rl.question(query, callback)</li>
<li>rl.resume()</li>
<li>rl.setPrompt(prompt)</li>
<li>rl.write(data[, key])</li>
<li>readline.clearLine(stream, dir)</li>
<li>readline.clearScreenDown(stream)</li>
<li>readline.createInterface(options)<ul>
<li>Use of the completer Function</li>
</ul>
</li>
<li>readline.cursorTo(stream, x, y)</li>
<li>readline.emitKeypressEvents(stream[, interface])</li>
<li>readline.moveCursor(stream, dx, dy)</li>
</ul>
</li>
<li>Example: Tiny CLI</li>
<li>Example: Read File Stream Line-by-Line</li>
</ul>
<h3 id="REPL"><a href="#REPL" class="headerlink" title="REPL"></a>REPL</h3><ul>
<li>Design and Features<ul>
<li>Commands and Special Keys</li>
<li>Default Evaluation<ul>
<li>JavaScript Expressions</li>
<li>Global and Local Scope</li>
<li>Accessing Core Node.js Modules</li>
<li>Assignment of the _ (underscore) variable</li>
</ul>
</li>
<li>Custom Evaluation Functions<ul>
<li>Recoverable Errors</li>
</ul>
</li>
<li>Customizing REPL Output</li>
</ul>
</li>
<li>Class: REPLServer<ul>
<li>Event: ‘exit’</li>
<li>Event: ‘reset’</li>
<li>replServer.defineCommand(keyword, cmd)</li>
<li>replServer.displayPrompt([preserveCursor])</li>
<li>repl.start([options])</li>
</ul>
</li>
<li>The Node.js REPL<ul>
<li>Environment Variable Options</li>
<li>Using the Node.js REPL with advanced line-editors</li>
<li>Starting multiple REPL instances against a single running instance</li>
</ul>
</li>
</ul>
<h3 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a>Stream</h3><blockquote>
<p>Stream是一个抽象接口，Node中很多对象(request,stout)已实现。</p>
</blockquote>
<p>Stream 四种流类型：</p>
<ul>
<li>Readable</li>
<li>Writable</li>
<li>Duplex 可读可写操作.</li>
<li>Transform<br>所有Stream对象都是EventEmitter的实例，常见：</li>
<li>data</li>
<li>end 没有更多的数据可读时触发。</li>
<li>error</li>
<li>finish 所有数据已被写入到底层系统时触发。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">var fs = require(&apos;fs&apos;);</div><div class="line">var readStream = fs.createReadStream(&apos;package.json&apos;);</div><div class="line">readStream</div><div class="line">  .on(&apos;data&apos;, chunk =&gt; &#123;</div><div class="line">    console.log(&apos;data emits&apos;);</div><div class="line">    console.log(Buffer.isBuffer(chunk));</div><div class="line">    // console.log(chunk.toString(&apos;utf-8&apos;));</div><div class="line">        readStream.pause();</div><div class="line">        setTimeout(() =&gt; &#123;</div><div class="line">            console.log(&apos;data pause end&apos;);</div><div class="line">            readStream.resume()</div><div class="line">        &#125;, 10)</div><div class="line">  &#125;)</div><div class="line">  .on(&apos;readable&apos;, () =&gt; console.log(&apos;data readable&apos;))</div><div class="line">  .on(&apos;end&apos;, () =&gt; console.log(&apos;data ends&apos;))</div><div class="line">  .on(&apos;close&apos;, () =&gt; console.log(&apos;data close&apos;))</div><div class="line">  .on(&apos;error&apos;, e =&gt; console.log(&apos;data read error&apos; + e))</div><div class="line">  //pipe读写</div><div class="line">  var readable = require(&apos;stream&apos;).Readable;</div><div class="line">    var writable = require(&apos;stream&apos;).Writable;</div><div class="line">    </div><div class="line">    var readStream = new readable();</div><div class="line">    var writStream = new writable();</div><div class="line">    readStream.push(&apos;I&apos;);</div><div class="line">    readStream.push(&apos;Love&apos;);</div><div class="line">    readStream.push(&apos;Node\n&apos;);</div><div class="line">    readStream.push(null);</div><div class="line">    </div><div class="line">    writStream._write = (chunk, encode, cb) =&gt; &#123;</div><div class="line">      console.log(chunk.toString());</div><div class="line">      cb()</div><div class="line">    &#125;</div><div class="line">    readStream.pipe(writStream);</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="String-Decoder"><a href="#String-Decoder" class="headerlink" title="String Decoder"></a>String Decoder</h3><ul>
<li>Class: new StringDecoder([encoding])<ul>
<li>stringDecoder.end([buffer])</li>
<li>stringDecoder.write(buffer)</li>
</ul>
</li>
</ul>
<h3 id="Timers"><a href="#Timers" class="headerlink" title="Timers"></a>Timers</h3><ul>
<li>Class: Immediate</li>
<li>Class: Timeout<ul>
<li>timeout.ref()</li>
<li>timeout.unref()</li>
</ul>
</li>
<li>Scheduling Timers<ul>
<li>setImmediate(callback[, …args])</li>
<li>setInterval(callback, delay[, …args])</li>
<li>setTimeout(callback, delay[, …args])</li>
</ul>
</li>
<li>Cancelling Timers<ul>
<li>clearImmediate(immediate)</li>
<li>clearInterval(timeout)</li>
<li>clearTimeout(timeout)</li>
</ul>
</li>
</ul>
<h3 id="TTY"><a href="#TTY" class="headerlink" title="TTY"></a>TTY</h3><ul>
<li>Class: tty.ReadStream<ul>
<li>readStream.isRaw</li>
<li>readStream.setRawMode(mode)</li>
</ul>
</li>
<li>Class: tty.WriteStream</li>
<li>Event: ‘resize’<ul>
<li>writeStream.columns</li>
<li>writeStream.rows</li>
</ul>
</li>
<li>tty.isatty(fd)</li>
</ul>
<h3 id="Tracing"><a href="#Tracing" class="headerlink" title="Tracing"></a>Tracing</h3><h3 id="UDP-Datagram"><a href="#UDP-Datagram" class="headerlink" title="UDP/Datagram"></a>UDP/Datagram</h3><h3 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h3><ul>
<li>URL Strings and URL Objects<ul>
<li>urlObject.auth</li>
<li>urlObject.hash</li>
<li>urlObject.host</li>
<li>urlObject.hostname</li>
<li>urlObject.href</li>
<li>urlObject.path</li>
<li>urlObject.pathname</li>
<li>urlObject.port</li>
<li>urlObject.protocol</li>
<li>urlObject.query</li>
<li>urlObject.search</li>
<li>urlObject.slashes</li>
</ul>
</li>
<li>url.format(urlObject)</li>
<li>url.format(URL[, options])</li>
<li>url.parse(urlString[, parseQueryString[, - slashesDenoteHost]])</li>
<li>url.resolve(from, to)</li>
<li>Escaped Characters</li>
<li>The WHATWG URL API<ul>
<li>Class: URL<ul>
<li>Constructor: new URL(input[, base])</li>
<li>url.hash</li>
<li>url.host</li>
<li>url.hostname</li>
<li>url.href</li>
<li>url.origin</li>
<li>url.password</li>
<li>url.pathname</li>
<li>url.port</li>
<li>url.protocol</li>
<li>url.search</li>
<li>url.searchParams</li>
<li>url.username</li>
<li>url.toString()</li>
<li>url.toJSON()</li>
</ul>
</li>
<li>Class: URLSearchParams</li>
<li>Constructor: new URLSearchParams([init])</li>
<li>urlSearchParams.append(name, value)</li>
<li>urlSearchParams.delete(name)</li>
<li>urlSearchParams.entries()</li>
<li>urlSearchParams.forEach(fn[, thisArg])</li>
<li>urlSearchParams.get(name)</li>
<li>urlSearchParams.getAll(name)</li>
<li>urlSearchParams.has(name)</li>
<li>urlSearchParams.keys()</li>
<li>urlSearchParams.set(name, value)</li>
<li>urlSearchParams.sort()</li>
<li>urlSearchParams.toString()</li>
<li>urlSearchParams.values()</li>
<li>urlSearchParams<a href="">@@iterator</a></li>
</ul>
</li>
<li>require(‘url’).domainToASCII(domain)</li>
<li>require(‘url’).domainToUnicode(domain)</li>
<li>Percent-Encoding in the WHATWG URL Standard </li>
</ul>
<h3 id="Utilities"><a href="#Utilities" class="headerlink" title="Utilities"></a>Utilities</h3><blockquote>
<p>util是Node的核心模块，提供常用函数的集合，用于弥补核心JS功能过于精简的不足。</p>
</blockquote>
<ul>
<li>util.inherits(constructor, superConstructor):实现对象间原型继承的函数</li>
</ul>
<blockquote>
<p>JavaScript 的面向对象特性是基于原型的，与常见的基于类的不同。<br>JavaScript 没有 提供对象继承的语言级别特性，而是通过原型复制来实现的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">var util = require(&apos;util&apos;);</div><div class="line"></div><div class="line">function Base() &#123;</div><div class="line">  this.name = &apos;base&apos;;</div><div class="line">  this.base = 1990;</div><div class="line">  this.sayHello = function() &#123;</div><div class="line">    console.log(&apos;Hello&apos; + this.name);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">Base.prototype.showName = function() &#123;</div><div class="line">  console.log(this.name);</div><div class="line">&#125;</div><div class="line"></div><div class="line">function Sub() &#123;</div><div class="line">  this.name = &apos;sub&apos;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">util.inherits(Sub, Base);</div><div class="line">var objBase = new Base();</div><div class="line">objBase.showName();</div><div class="line">objBase.sayHello();</div><div class="line">console.log(objBase);</div><div class="line">var objSub = new Sub();</div><div class="line">objSub.showName(); </div><div class="line">//objSub.sayHello();//TypeError: objSub.sayHello is not a function,Sub仅继承原型中定义的函数</div><div class="line">console.log(objSub);</div></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li>util.inspect: 将任意对象转换为字符串，常用语调试及错误输出，至少接受一个object参数。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">//util.inspect 并不会简单地直接把对象转换为字符串，即使该对 象定义了toString 方法也不会调用。</div><div class="line">var util = require(&apos;util&apos;);</div><div class="line">function Person() &#123;</div><div class="line">  this.name = &apos;haha&apos;;</div><div class="line">  this.toString = function() &#123;</div><div class="line">    return this.name;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">var o = new Person();</div><div class="line">console.log(util.inspect(o));</div><div class="line">console.log(util.inspect(o, true));</div><div class="line">console.log(util.inspect(o, true, 3));</div><div class="line">console.log(util.inspect(o, true, 3, [(1, 0, 0)]));</div><div class="line">//输出如下</div><div class="line">Person &#123; name: &apos;haha&apos;, toString: [Function] &#125;</div><div class="line">Person &#123;</div><div class="line">  name: &apos;haha&apos;,</div><div class="line">  toString:</div><div class="line">   &#123; [Function]</div><div class="line">     [length]: 0,</div><div class="line">     [name]: &apos;&apos;,</div><div class="line">     [arguments]: null,</div><div class="line">     [caller]: null,</div><div class="line">     [prototype]: &#123; [constructor]: [Circular] &#125; &#125; &#125;</div><div class="line">Person &#123;</div><div class="line">  name: &apos;haha&apos;,</div><div class="line">  toString:</div><div class="line">   &#123; [Function]</div><div class="line">     [length]: 0,</div><div class="line">     [name]: &apos;&apos;,</div><div class="line">     [arguments]: null,</div><div class="line">     [caller]: null,</div><div class="line">     [prototype]: &#123; [constructor]: [Circular] &#125; &#125; &#125;</div><div class="line">Person &#123;</div><div class="line">  name: &apos;haha&apos;,</div><div class="line">  toString:</div><div class="line">   &#123; [Function]</div><div class="line">     [length]: 0,</div><div class="line">     [name]: &apos;&apos;,</div><div class="line">     [arguments]: null,</div><div class="line">     [caller]: null,</div><div class="line">     [prototype]: &#123; [constructor]: [Circular] &#125; &#125; &#125;</div></pre></td></tr></table></figure>
<ul>
<li>util.isArray(object)</li>
<li>util.isRegExp(object)</li>
<li>util.isDate(object)</li>
<li>util.isError(object)</li>
</ul>
<h3 id="V8"><a href="#V8" class="headerlink" title="V8"></a>V8</h3><ul>
<li>v8.getHeapSpaceStatistics()</li>
<li>v8.getHeapStatistics()</li>
<li>v8.setFlagsFromString(string)</li>
</ul>
<h3 id="VM"><a href="#VM" class="headerlink" title="VM"></a>VM</h3><h3 id="ZLIB"><a href="#ZLIB" class="headerlink" title="ZLIB"></a>ZLIB</h3>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/24/webpack/" itemprop="url">
                  webpack 初探
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-23T23:15:01Z" content="2016-10-23">
              2016-10-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/webpack/" itemprop="url" rel="index">
                    <span itemprop="name">webpack</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/24/webpack/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/24/webpack/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>草稿。。。</p>
<h2 id="introduce"><a href="#introduce" class="headerlink" title="introduce"></a>introduce</h2><ul>
<li>concepts<br>webpack是现代js应用的模块打包器，它是非常可配置，但要明确以下四个概念。</li>
</ul>
</blockquote>
<pre><code>1. Entry
webpack构建一个你应用程序依赖的图，起点便是所谓的erntry point。它告诉wenpack从哪开始并且
按照依赖图去知道什么要打包。可以将此比作 contextual root or the first file to kick off your app.。
The simplest example：
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//webpack.config.js  </div><div class="line">module.exports=&#123;</div><div class="line">    entry:&apos;./path/to/my/entry/file.js&apos;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>

2. Output
一旦打包好了资源，依然需要告诉webpack哪里打包应用程序，output属性告诉webpack如何处理打包过的代码。
 The simplest example：
    <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//webpack.config.js  </div><div class="line">module.exports=&#123;</div><div class="line">    entry:&apos;./path/to/my/entry/file.js&apos;，</div><div class="line">    output: &#123;</div><div class="line">        path: path.resolve(__dirname, &apos;dist&apos;),</div><div class="line">        filename: &apos;my-first-webpack.bundle.js&apos;</div><div class="line">      &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>

 示例中用output.filename和output.path属性告诉webpack包名和将之emit to哪。
3. Loaders
目的在于将所有项目中的资源作为webpack而非浏览器关心的。webpack眼中一切(.css,.hmtl,.scss,.jpg,etc)
皆模块。但其只知道js，而Loaders在webpack中将这些文件转化成依赖图中的模块。有两个目的在高水准要求上：
a.确定什么文件该被相应loader转换(test)，b：转换相应文件以加入到依赖图(use)。
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">const path = require(&apos;path&apos;);</div><div class="line"></div><div class="line">const config = &#123;</div><div class="line">  entry: &apos;./path/to/my/entry/file.js&apos;,</div><div class="line">  output: &#123;</div><div class="line">    path: path.resolve(__dirname, &apos;dist&apos;),</div><div class="line">    filename: &apos;my-first-webpack.bundle.js&apos;</div><div class="line">  &#125;,</div><div class="line">  module: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;test: /\.(js|jsx)$/, use: &apos;babel-loader&apos;&#125;</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">module.exports = config;</div></pre></td></tr></table></figure>

4. Plugins
因loaders仅基于每个文件转换，故plugins是最常用的对打包模块的 &quot;compilations&quot; or &quot;chunks&quot;执行操作和自定义功能等。
要用plugin需要用require()且将其放入plugins数组。多数plugins可按需自定义
因可在配置中按不同目的多次使用，此时需要用new来构建它的一个实例。
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;); //installed via npm</div><div class="line">const webpack = require(&apos;webpack&apos;); //to access built-in plugins</div><div class="line">const path = require(&apos;path&apos;);</div><div class="line"></div><div class="line">const config = &#123;</div><div class="line">  entry: &apos;./path/to/my/entry/file.js&apos;,</div><div class="line">  output: &#123;</div><div class="line">    path: path.resolve(__dirname, &apos;dist&apos;),</div><div class="line">    filename: &apos;my-first-webpack.bundle.js&apos;</div><div class="line">  &#125;,</div><div class="line">  module: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;test: /\.(js|jsx)$/, use: &apos;babel-loader&apos;&#125;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  plugins: [</div><div class="line">    new webpack.optimize.UglifyJsPlugin(),</div><div class="line">    new HtmlWebpackPlugin(&#123;template: &apos;./src/index.html&apos;&#125;)</div><div class="line">  ]</div><div class="line">&#125;;</div><div class="line"></div><div class="line">module.exports = config;</div></pre></td></tr></table></figure>
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/04/es6/" itemprop="url">
                  ES6/ES7总结分析
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-03T23:28:30Z" content="2016-10-03">
              2016-10-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JS/" itemprop="url" rel="index">
                    <span itemprop="name">JS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ECMAScript-6"><a href="#ECMAScript-6" class="headerlink" title="ECMAScript 6"></a>ECMAScript 6</h1><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><blockquote>
<p>ECMAScript 6, also known as ECMAScript 2015, is the latest version of the ECMAScript<br> standard.  ES6 is a significant update to the language, and the first update to<br> the language since ES5 was standardized in 2009. Implementation of these features<br> in major  engines is <a href="http://kangax.github.io/es5-compat-table/es6/" target="_blank" rel="external">underway now(支持情况一览)</a>.</p>
</blockquote>
<p>See the <a href="http://www.ecma-international.org/ecma-262/6.0/" target="_blank" rel="external">ES6 standard（ES6规范）</a> for full specification of the ECMAScript 6 language.</p>
<p>ES6 includes the following new features—新特性如下:</p>
<ol>
<li>let + const</li>
<li>arrows箭头函数</li>
<li>destructuring解耦</li>
<li>enhanced string literals字符串的扩展</li>
<li>enhanced regular expression正则的扩展</li>
<li>enhanced number expression数值的扩展</li>
<li>enhanced array expression数组的扩展</li>
<li>enhanced function expression函数的扩展</li>
<li>enhanced object literals对象的扩展</li>
<li>symbols标记</li>
<li>map + set</li>
<li>proxies代理</li>
<li>reflect</li>
<li>promises</li>
<li>iterators迭代器 + for..of</li>
<li>generators</li>
<li>async函数</li>
<li>class</li>
<li>decorator</li>
<li>modules</li>
<li><p>module loaders</p>
</li>
<li><p>subclassable built-ins</p>
</li>
<li>typed arrays</li>
<li>internationalization-localization国际及地域化</li>
<li>SIMD</li>
<li>Good Practise</li>
</ol>
<h2 id="ECMAScript-6-Features"><a href="#ECMAScript-6-Features" class="headerlink" title="ECMAScript 6 Features"></a>ECMAScript 6 Features</h2><h3 id="Let-Const"><a href="#Let-Const" class="headerlink" title="Let + Const"></a>Let + Const</h3><blockquote>
<p>Block-scoped binding constructs.  <code>let</code> is the new <code>var</code>(块级作用域绑定结构，let是新的var).<br><code>const</code> is single-assignment.  Static restrictions prevent use before assignment<br>（const 是单一声明，严格模式限制其必须先声明再使用）.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">//ES6</div><div class="line">const PI=3.1415926;</div><div class="line">let callbacks = []</div><div class="line">for (let i = 0; i &lt;= 2; i++) &#123;</div><div class="line">    callbacks[i] = function () &#123; return i * 2 &#125;</div><div class="line">&#125;</div><div class="line">callbacks[0]() === 0;</div><div class="line">//block-scoped functions</div><div class="line">&#123;</div><div class="line">    function foo () &#123; return 1 &#125;</div><div class="line">    foo() === 1</div><div class="line">    &#123;</div><div class="line">        function foo () &#123; return 2 &#125;</div><div class="line">        foo() === 2</div><div class="line">    &#125;</div><div class="line">    foo() === 1</div><div class="line">&#125;</div><div class="line">//ES5</div><div class="line">Object.defineProperty(typeof global === &quot;object&quot; ? global : window, &quot;PI&quot;, &#123;</div><div class="line">    value:        3.1415926,</div><div class="line">    enumerable:   true,</div><div class="line">    writable:     false,</div><div class="line">    configurable: false</div><div class="line">&#125;)</div><div class="line">var callbacks = [];</div><div class="line">for (var i = 0; i &lt;= 2; i++) &#123;</div><div class="line">    (function (i) &#123;</div><div class="line">        callbacks[i] = function() &#123; return i * 2; &#125;;</div><div class="line">    &#125;)(i);</div><div class="line">&#125;</div><div class="line">callbacks[0]() === 0;</div><div class="line">(function () &#123;</div><div class="line">    var foo = function () &#123; return 1; &#125;</div><div class="line">    foo() === 1;</div><div class="line">    (function () &#123;</div><div class="line">        var foo = function () &#123; return 2; &#125;</div><div class="line">        foo() === 2;</div><div class="line">    &#125;)();</div><div class="line">    foo() === 1;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>More MDN info: <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Statements/let" target="_blank" rel="external">let statement</a>, <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Statements/const" target="_blank" rel="external">const statement</a></p>
<h3 id="Destructuring解耦"><a href="#Destructuring解耦" class="headerlink" title="Destructuring解耦"></a>Destructuring解耦</h3><blockquote>
<p>Destructuring allows binding using pattern matching, with support for matching arrays and objects(解耦允许绑定模式匹配<br>，支持数组和对象). </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// list matching列表匹配</div><div class="line">var [a, , b] = [1,2,3];</div><div class="line"></div><div class="line">// object matching对象匹配</div><div class="line">var &#123; op: a, lhs: &#123; op: b &#125;, rhs: c &#125;</div><div class="line">       = getASTNode()</div><div class="line">var &#123;op, lhs, rhs&#125; = getASTNode()</div><div class="line">// Can be used in parameter position用于形参位置</div><div class="line">function g(&#123;name: x&#125;) &#123;</div><div class="line">  console.log(x);</div><div class="line">&#125;</div><div class="line">g(&#123;name: 5&#125;)</div><div class="line">// Fail-soft destructuring</div><div class="line">var [a] = [];</div><div class="line">a === undefined;</div><div class="line"></div><div class="line">// Fail-soft destructuring with defaults</div><div class="line">var [a = 1] = [];</div><div class="line">a === 1;</div></pre></td></tr></table></figure>
<p>More info: <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Operators/Destructuring_assignment" target="_blank" rel="external">MDN Destructuring assignment</a></p>
<h3 id="enhanced-string-literals字符串的扩展"><a href="#enhanced-string-literals字符串的扩展" class="headerlink" title="enhanced string literals字符串的扩展"></a>enhanced string literals字符串的扩展</h3><ol>
<li>Unicode编码<blockquote>
<p>Non-breaking additions to support full Unicode, including new Unicode literal form in strings and<br>new RegExp <code>u</code> mode to handle code points, as well as new APIs to process strings at the 21bit code points level.<br>These additions support building global apps in JS.</p>
</blockquote>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&quot;𠮷&quot;.length === 2</div><div class="line">&quot;𠮷&quot;.match(/./u)[0].length === 2</div><div class="line">&quot;𠮷&quot; === &quot;\uD842\uDFB7&quot;</div><div class="line">&quot;𠮷&quot; === &quot;\u&#123;20BB7&#125;&quot;</div><div class="line">&quot;𠮷&quot;.codePointAt(0) == 0x20BB7</div><div class="line">for (let codepoint of &quot;𠮷&quot;) console.log(codepoint)</div><div class="line">//ES5</div><div class="line">&quot;𠮷&quot;.length === 2;</div><div class="line">&quot;𠮷&quot;.match(/(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF][\uD800-\uDBFF][\uDC00-\uDFFF][\uD800-\uDBFF](?![\uDC00-\uDFFF])(?:[^\uD800-\uDBFF]^)[\uDC00-\uDFFF])/)[0].length === 2;</div><div class="line">&quot;𠮷&quot; === &quot;\uD842\uDFB7&quot;;</div><div class="line">//  no equivalent in ES5</div><div class="line">//  no equivalent in ES5</div><div class="line">//  no equivalent in ES5</div></pre></td></tr></table></figure>
<p>More info: <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Global_Objects/RegExp/unicode" target="_blank" rel="external">MDN RegExp.prototype.unicode</a></p>
<ol>
<li>Template Strings<blockquote>
<p>Template strings provide syntactic sugar for constructing strings.<br>This is similar to string interpolation features in Perl, Python and more.<br>模板字符串为适应的字符串提供了语法糖。这类似于Perl，Python等中的字符串插值功能.</p>
</blockquote>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// Basic literal string creation</div><div class="line">`In  &apos;\n&apos; is a line-feed.`</div><div class="line"></div><div class="line">// Multiline strings</div><div class="line">`In  this is</div><div class="line"> not legal.`</div><div class="line"></div><div class="line">// String interpolation字符串插值</div><div class="line">var name = &quot;Bob&quot;, time = &quot;today&quot;;</div><div class="line">`Hello $&#123;name&#125;, how are you $&#123;time&#125;?`</div><div class="line"></div><div class="line">// Construct an HTTP request prefix is used to interpret the replacements and construction</div><div class="line">get`http://example.com/foo?bar=$&#123;bar + baz&#125;&amp;quux=$&#123;quux&#125;`</div><div class="line">//ES5</div><div class="line">get([ &quot;http://example.com/foo?bar=&quot;, &quot;&amp;quux=&quot;, &quot;&quot; ],bar + baz, quux);</div></pre></td></tr></table></figure>
<ol>
<li><p>codePointAt()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var s = &apos;𠮷a&apos;;</div><div class="line">s.codePointAt(0) // 134071</div><div class="line">s.codePointAt(1) // 57271</div><div class="line">s.codePointAt(2) // 97</div></pre></td></tr></table></figure>
</li>
<li><p>string.fromCodePoint() 从码点返回对应字符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">String.fromCodePoint(0x20BB7)</div><div class="line">// &quot;𠮷&quot;</div></pre></td></tr></table></figure>
</li>
<li><p>遍历</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">for (let codePoint of &apos;foo&apos;) &#123;</div><div class="line">  console.log(codePoint)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>at() 返回字符串给定位置的字符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&apos;abc&apos;.at(0) // &quot;a&quot;</div></pre></td></tr></table></figure>
</li>
<li><p>normalize()<br>ES6提供字符串实例的normalize()方法，用来将字符的不同表示方法统一为同样的形式，这称为Unicode正规化。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&apos;\u01D1&apos;.normalize() === &apos;\u004F\u030C&apos;.normalize()</div></pre></td></tr></table></figure>
<ol>
<li>includes(),startWith(),endsWith()<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var s = &apos;Hello world!&apos;;</div><div class="line">s.startsWith(&apos;Hello&apos;) // true</div><div class="line">s.endsWith(&apos;!&apos;) // true</div><div class="line">s.includes(&apos;o&apos;) // true</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>repeat()  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&apos;x&apos;.repeat(3) // &quot;xxx&quot;</div></pre></td></tr></table></figure>
</li>
<li><p>padStart(),padEnd()<br>ES2017 引入了字符串补全长度的功能。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&apos;x&apos;.padStart(5, &apos;ab&apos;) // &apos;ababx&apos;</div><div class="line">&apos;x&apos;.padStart(4, &apos;ab&apos;) // &apos;abax&apos;</div><div class="line">&apos;x&apos;.padEnd(5, &apos;ab&apos;) // &apos;xabab&apos;</div><div class="line">&apos;x&apos;.padEnd(4, &apos;ab&apos;) // &apos;xaba&apos;</div></pre></td></tr></table></figure>
</li>
<li><p>标签模板<br>紧跟在一个函数名后面，该函数将被调用来处理这个模板字符串。这被称为“标签模板”功能（tagged template）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">alert`123`</div><div class="line">// 等同于</div><div class="line">alert(123)</div></pre></td></tr></table></figure>
</li>
<li><p>string.raw()<br>String.raw方法，往往用来充当模板字符串的处理函数，返回一个斜杠都被转义（即斜杠前面再加一个斜杠）的字符串，对应于替换变量后的模板字符串。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">String.raw`Hi\\n`</div><div class="line">// &quot;Hi\\n&quot;</div></pre></td></tr></table></figure>
</li>
<li><p>局限<br>模板字符串默认会将字符串转义，因此导致了无法嵌入其他语言。</p>
</li>
</ol>
<p>More info: <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/template_strings" target="_blank" rel="external">MDN Template Strings</a></p>
<h3 id="enhanced-regular-expression正则的扩展"><a href="#enhanced-regular-expression正则的扩展" class="headerlink" title="enhanced regular expression正则的扩展"></a>enhanced regular expression正则的扩展</h3><blockquote>
<p>保持匹配之间的匹配位置粘性，并且以这种方式支持对任意长输入字符串的有效解析，即使具有任意数量的不同的正则表达式。</p>
<ol>
<li>RegExp构造函数<br>ES5中，按参数类型正则分两种情况：字符串/正则表达式<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var regex=new RegExp(&apos;xyz&apos;,i);//var regex=/xyz/i;</div><div class="line">var regex=new RegExp(/xyz/i);//var regex=/xyz/i;</div></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<p>ES6中，RegExp构造函数首个参数是正则对象，次个参数可以指定修饰符且以次个参数修饰符为准<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">new RegExp(/abc/ig, &apos;i&apos;).flags</div></pre></td></tr></table></figure></p>
<ol>
<li><p>字符串的正则方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">String.prototype.match // RegExp.prototype[Symbol.match]</div><div class="line">String.prototype.replace // RegExp.prototype[Symbol.replace]</div><div class="line">String.prototype.search //RegExp.prototype[Symbol.search]</div><div class="line">String.prototype.split // RegExp.prototype[Symbol.split]</div></pre></td></tr></table></figure>
</li>
<li><p>u修饰符</p>
</li>
<li>y修饰符</li>
<li>实例<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">let parser = (input, match) =&gt; &#123;</div><div class="line">    for (let pos = 0, lastPos = input.length; pos &lt; lastPos; ) &#123;</div><div class="line">        for (let i = 0; i &lt; match.length; i++) &#123;</div><div class="line">            match[i].pattern.lastIndex = pos</div><div class="line">            let found</div><div class="line">            if ((found = match[i].pattern.exec(input)) !== null) &#123;</div><div class="line">                match[i].action(found)</div><div class="line">                pos = match[i].pattern.lastIndex</div><div class="line">                break</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">let report = (match) =&gt; &#123;</div><div class="line">    console.log(JSON.stringify(match))</div><div class="line">&#125;</div><div class="line">parser(&quot;Foo 1 Bar 7 Baz 42&quot;, [</div><div class="line">    &#123; pattern: /^Foo\s+(\d+)/y, action: (match) =&gt; report(match) &#125;,</div><div class="line">    &#123; pattern: /^Bar\s+(\d+)/y, action: (match) =&gt; report(match) &#125;,</div><div class="line">    &#123; pattern: /^Baz\s+(\d+)/y, action: (match) =&gt; report(match) &#125;,</div><div class="line">    &#123; pattern: /^\s*/y,         action: (match) =&gt; &#123;&#125;            &#125;</div><div class="line">])</div><div class="line">//ES5</div><div class="line">var parser = function (input, match) &#123;</div><div class="line">    for (var i, found, inputTmp = input; inputTmp !== &quot;&quot;; ) &#123;</div><div class="line">        for (i = 0; i &lt; match.length; i++) &#123;</div><div class="line">            if ((found = match[i].pattern.exec(inputTmp)) !== null) &#123;</div><div class="line">                match[i].action(found);</div><div class="line">                inputTmp = inputTmp.substr(found[0].length);</div><div class="line">                break;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var report = function (match) &#123;</div><div class="line">    console.log(JSON.stringify(match));</div><div class="line">&#125;;</div><div class="line">parser(&quot;Foo 1 Bar 7 Baz 42&quot;, [</div><div class="line">    &#123; pattern: /^Foo\s+(\d+)/, action: function (match) &#123; report(match); &#125; &#125;,</div><div class="line">    &#123; pattern: /^Bar\s+(\d+)/, action: function (match) &#123; report(match); &#125; &#125;,</div><div class="line">    &#123; pattern: /^Baz\s+(\d+)/, action: function (match) &#123; report(match); &#125; &#125;,</div><div class="line">    &#123; pattern: /^\s*/,         action: function (match) &#123;&#125;                 &#125;</div><div class="line">]);</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="enhanced-number-expression数值的扩展"><a href="#enhanced-number-expression数值的扩展" class="headerlink" title="enhanced number expression数值的扩展"></a>enhanced number expression数值的扩展</h3><ol>
<li><p>二进制八进制</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">0b111110111 === 503 // true   Ob二进制</div><div class="line">0o767 === 503 // true Oo八进制</div></pre></td></tr></table></figure>
</li>
<li><p>Number.isFinite(),Number.isNaN()</p>
</li>
<li><p>Number.parseInt(),Number.parseFloat()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// ES5的写法</div><div class="line">parseInt(&apos;12.34&apos;) // 12</div><div class="line">parseFloat(&apos;123.45#&apos;) // 123.45</div><div class="line"></div><div class="line">// ES6的写法 是逐步减少全局性方法，使得语言逐步模块化。</div><div class="line">Number.parseInt(&apos;12.34&apos;) // 12</div><div class="line">Number.parseFloat(&apos;123.45#&apos;) // 123.45</div></pre></td></tr></table></figure>
</li>
<li><p>Number.isInteger()</p>
</li>
<li>Number.EPSILON ES6在Number对象上面，新增一个极小的常量Number.EPSILON。</li>
<li>Number.isSafeInteger()                 </li>
<li>Math对象的扩展</li>
</ol>
<ul>
<li>Math.trunc() 去除一个数的小数部分，返回整数部分。</li>
<li>Math.sign() 判断一个数到底是正数、负数、还是零。</li>
<li>Math.cbrt() 立方根。</li>
<li>Math.clz32() 返回一个数的32位无符号整数形式有多少个前导0。</li>
<li>Math.imul()方法返回两个数以32位带符号整数形式相乘的结果，返回的也是一个32位的带符号整数。</li>
<li>Math.fround()方法返回一个数的单精度浮点数形式。</li>
<li>Math.hypot()方法返回所有参数的平方和的平方根。</li>
<li>对数方法<ul>
<li>Math.expm1(x)返回ex - 1，即Math.exp(x) - 1。</li>
<li>Math.log1p(x)方法返回1 + x的自然对数</li>
<li>Math.log10(x)返回以10为底的x的对数</li>
<li>Math.log2(x)返回以2为底的x的对数</li>
</ul>
</li>
<li>三角函数<br>  Math.sinh(x) 返回x的双曲正弦（hyperbolic sine）<br>  Math.cosh(x) 返回x的双曲余弦（hyperbolic cosine）<br>  Math.tanh(x) 返回x的双曲正切（hyperbolic tangent）<br>  Math.asinh(x) 返回x的反双曲正弦（inverse hyperbolic sine）<br>  Math.acosh(x) 返回x的反双曲余弦（inverse hyperbolic cosine）<br>  Math.atanh(x) 返回x的反双曲正切（inverse hyperbolic tangent）</li>
</ul>
<ol>
<li>Math.sign()用来判断一个值的正负</li>
<li>指数运算符<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">2 ** 2 // 4</div><div class="line">2 ** 3 // 8</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="enhanced-array-expression数组的扩展"><a href="#enhanced-array-expression数组的扩展" class="headerlink" title="enhanced array expression数组的扩展"></a>enhanced array expression数组的扩展</h3><ol>
<li>Array.from()<blockquote>
<p>将类数组（array-like object）与可遍历(literable)对象转化成真数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">//兼容性</div><div class="line">const toArray = (() =&gt;</div><div class="line">  Array.from ? Array.from : obj =&gt; [].slice.call(obj)</div><div class="line">)();</div><div class="line"></div><div class="line">let arrayLike = &#123;</div><div class="line">    &apos;0&apos;: &apos;a&apos;,</div><div class="line">    &apos;1&apos;: &apos;b&apos;,</div><div class="line">    &apos;2&apos;: &apos;c&apos;,</div><div class="line">    length: 3</div><div class="line">&#125;;</div><div class="line">var arr1=[].slice.call(arrayLike);//ES5</div><div class="line">var arr2=Array.from(arrayLike);//ES6</div><div class="line"></div><div class="line">let ps=document.querySelectorAll(&apos;p&apos;);//NodeList对象</div><div class="line">Array.from(ps).forEach(p=&gt;condole.log(p));</div><div class="line"></div><div class="line">function foo()&#123;</div><div class="line">    Array.from(arguments);//arguments对象</div><div class="line">&#125;</div><div class="line">//事实上，部署了Iterator接口的数据结构，Array.from都能将其转为数组</div><div class="line">Array.from(&apos;hello&apos;);//[&apos;h&apos;, &apos;e&apos;, &apos;l&apos;, &apos;l&apos;, &apos;o&apos;]</div><div class="line">let nameSet=new Set([&apos;a&apos;,&apos;b&apos;]);</div><div class="line">Array.from(nameSet);//[&apos;a&apos;,&apos;b&apos;]</div><div class="line">//第二个参数</div><div class="line">Array.from([1, 2, 3], (x) =&gt; x * x)</div><div class="line">// [1, 4, 9]</div><div class="line">Array.from([1, , 2, , 3], (n) =&gt; n || 0)</div><div class="line">// [1, 0, 2, 0, 3]   布尔值为false的成员转为0。</div><div class="line">function typesOf () &#123;</div><div class="line">  return Array.from(arguments, value =&gt; typeof value)</div><div class="line">&#125;</div><div class="line">typesOf(null, [], NaN)</div><div class="line">// [&apos;object&apos;, &apos;object&apos;, &apos;number&apos;] 返回各种类型的数据</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<p>另辟蹊径 …也可以将某些数据转为数组</p>
<blockquote>
<p>扩展运算符背后调用的是遍历器接口（Symbol.iterator），如果一个对象没有部署这个接口，就无法转换。Array.from方法则是<br>还支持类似数组的对象。所谓类似数组的对象，本质特征只有一点，即必须有length属性。因此，任何有length属性的对象，<br>都可以通过Array.from方法转为数组，而此时扩展运算符就无法转换。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">function foo()&#123;</div><div class="line">    var args=[...arguements];</div><div class="line">&#125;</div><div class="line">[...document.querySelectorAll(&apos;div&apos;)];//NodeList</div><div class="line">Array.from(&#123; length: 3 &#125;);</div><div class="line">// [ undefined, undefined, undefined ]</div></pre></td></tr></table></figure></p>
</blockquote>
<p>More MDN info:<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/from" target="_blank" rel="external">Array.from()</a></p>
<ol>
<li><p>Array.of()<br>为弥补Array()构造函数的不足，将一组值转为数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">//hacker</div><div class="line">function ArrayOf()&#123;</div><div class="line">  return [].slice.call(arguments);</div><div class="line">&#125;</div><div class="line"></div><div class="line">Array() // []</div><div class="line">Array(3) // [, , ,]</div><div class="line">Array(3, 11, 8) // [3, 11, 8]</div><div class="line"></div><div class="line">Array.of(3, 11, 8) // [3,11,8]</div><div class="line">Array.of(3) // [3]</div><div class="line">Array.of(3).length // 1</div></pre></td></tr></table></figure>
</li>
<li><p>数组实例的copyWithin()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Array.prototype.copyWithin(target, start = 0, end = this.length)</div><div class="line">//target（必需）：从该位置开始替换数据</div><div class="line">[1, 2, 3, 4, 5].copyWithin(0, 3)</div><div class="line">// [4, 5, 3, 4, 5]</div></pre></td></tr></table></figure>
</li>
<li><p>find()和findIndex()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[1, 4, -5, 10].find((n) =&gt; n &lt; 0);//参数为回调函数</div><div class="line">[1, 5, 10, 15].findIndex(function(value, index, arr) &#123;</div><div class="line">  return value &gt; 9;</div><div class="line">&#125;) // 2  返回第一个符合条件的数组成员的位置，如果所有成员都不符合条件，则返回-1。</div><div class="line">[NaN].indexOf(NaN)</div><div class="line">// -1  这两个方法都可以发现NaN，弥补了数组的IndexOf方法的不足</div></pre></td></tr></table></figure>
</li>
<li><p>fill()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//使用给定值填充一个数组</div><div class="line">[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;].fill(7)</div><div class="line">// [7, 7, 7]</div><div class="line">new Array(3).fill(7)</div><div class="line">// [7, 7, 7]</div><div class="line">[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;].fill(7, 1, 2)</div><div class="line">// [&apos;a&apos;, 7, &apos;c&apos;]</div></pre></td></tr></table></figure>
</li>
<li><p>entries(),keys(),values() 都返回一个遍历器对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">//keys()对键名的遍历</div><div class="line">for (let index of [&apos;a&apos;, &apos;b&apos;].keys()) &#123;</div><div class="line">  console.log(index);</div><div class="line">&#125;</div><div class="line">// 0</div><div class="line">// 1</div><div class="line">//values()对键值的遍历</div><div class="line">for (let elem of [&apos;a&apos;, &apos;b&apos;].values()) &#123;</div><div class="line">  console.log(elem);</div><div class="line">&#125;</div><div class="line">// &apos;a&apos;</div><div class="line">// &apos;b&apos;</div><div class="line">//entries()对键值对的遍历</div><div class="line">for (let [index, elem] of [&apos;a&apos;, &apos;b&apos;].entries()) &#123;</div><div class="line">  console.log(index, elem);</div><div class="line">&#125;</div><div class="line">// 0 &quot;a&quot;</div><div class="line">// 1 &quot;b&quot;</div><div class="line">//不用for...of手动next遍历</div><div class="line">let letter = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;];</div><div class="line">let entries = letter.entries();</div><div class="line">console.log(entries.next().value); // [0, &apos;a&apos;]</div><div class="line">console.log(entries.next().value); // [1, &apos;b&apos;]</div><div class="line">console.log(entries.next().value); // [2, &apos;c&apos;]</div></pre></td></tr></table></figure>
</li>
<li><p>includes() 某个数组是否包含给定的值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[1, 2, 3].includes(2);     // true</div><div class="line">[1, 2, 3].includes(4);     // false</div><div class="line">[1, 2, NaN].includes(NaN); // true</div></pre></td></tr></table></figure>
</li>
<li><p>空位<br>注意，空位不是undefined，一个位置的值等于undefined，<br>依然是有值的。空位是没有任何值，in运算符可以说明这一点。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">0 in [undefined, undefined, undefined] // true</div><div class="line">0 in [, , ,] // false</div></pre></td></tr></table></figure>
<p> ES5对空位的处理，已经很不一致了，大多数情况下会忽略空位。<br> forEach(),filter(),every(),some()跳过空位；map()跳过空位但保留该值<br> ；join(),toString(),将空位视为undefined，而undefined和null被处理成空字符串</p>
<p> ES6明确将空位转为undefined 即不忽略空位</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">Array.from([&apos;a&apos;,,&apos;b&apos;])</div><div class="line">// [ &quot;a&quot;, undefined, &quot;b&quot; ]</div><div class="line">[...[&apos;a&apos;,,&apos;b&apos;]]</div><div class="line">// [ &quot;a&quot;, undefined, &quot;b&quot; ]</div><div class="line">[,&apos;a&apos;,&apos;b&apos;,,].copyWithin(2,0) // [,&quot;a&quot;,,&quot;a&quot;] </div><div class="line">new Array(3).fill(&apos;a&apos;) // [&quot;a&quot;,&quot;a&quot;,&quot;a&quot;]</div><div class="line">let arr = [, ,];</div><div class="line">for (let i of arr) &#123;</div><div class="line">  console.log(1);</div><div class="line">&#125;</div><div class="line">// 1</div><div class="line">// 1</div></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>Callee-evaluated default parameter values.<br>Turn an array into consecutive arguments in a function call.<br>Bind trailing parameters to an array.<br>Rest replaces the need for <code>arguments</code> and addresses common cases more directly.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">function f(x, y=12) &#123;</div><div class="line">  return x + y;</div><div class="line">&#125;</div><div class="line">f(3) == 15;</div><div class="line">// ES5 y=undefined||12</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function f(x, ...y) &#123;</div><div class="line">  return x * y.length;</div><div class="line">&#125;</div><div class="line">f(3, &quot;hello&quot;, true) == 6;</div><div class="line">//ES5</div><div class="line">&quot;use strict&quot;;</div><div class="line">function f(x) &#123;</div><div class="line">  for (var _len = arguments.length, y = Array(_len &gt; 1 ? _len - 1 : 0), _key = 1; _key &lt; _len; _key++) &#123;</div><div class="line">    y[_key - 1] = arguments[_key];</div><div class="line">  &#125;</div><div class="line">  return x * y.length;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">function f(x, y, z) &#123;</div><div class="line">  return x + y + z;</div><div class="line">&#125;</div><div class="line">// Pass each elem of array as argument</div><div class="line">f(...[1,2,3]) == 6</div><div class="line">var str = &quot;foo&quot;</div><div class="line">var chars = [ ...str ] // [ &quot;f&quot;, &quot;o&quot;, &quot;o&quot; ],ES5 var chars = str.split(&quot;&quot;); // [ &quot;f&quot;, &quot;o&quot;, &quot;o&quot; ]</div></pre></td></tr></table></figure>
<p>More MDN info: <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Functions/Default_parameters" target="_blank" rel="external">Default parameters</a>, <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Functions/rest_parameters" target="_blank" rel="external">Rest parameters</a>, <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Operators/Spread_operator" target="_blank" rel="external">Spread Operator</a></p>
<h3 id="enhanced-function-expression函数的扩展"><a href="#enhanced-function-expression函数的扩展" class="headerlink" title="enhanced function expression函数的扩展"></a>enhanced function expression函数的扩展</h3><ol>
<li>参数默认值</li>
</ol>
<p>基本用法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//ES5</div><div class="line">function log(x, y) &#123;</div><div class="line">  y = y || &apos;World&apos;;</div><div class="line">  console.log(x, y);</div><div class="line">&#125;</div><div class="line">//ES6,参数默认值是惰性求值的</div><div class="line">let m=&apos;My&apos;</div><div class="line">function log(x, y = m+&apos;World&apos;) &#123;</div><div class="line">  console.log(x, y);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>结合解耦赋值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">function fetch(url,&#123;body=&apos;&apos;,method=&apos;GET&apos;,headers=&#123;&#125; &#125;)&#123;</div><div class="line">    //...</div><div class="line">&#125;</div><div class="line">fetch(&apos;http://example.com&apos;, &#123;&#125;)</div><div class="line">// &quot;GET&quot;</div><div class="line">fetch(&apos;http://example.com&apos;)</div><div class="line">// 报错,函数fetch的第二个参数是一个对象</div></pre></td></tr></table></figure></p>
<p>函数的length属性:没有指定默认值的参数个数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(function (a) &#123;&#125;).length // 1</div><div class="line">(function (a = 5) &#123;&#125;).length // 0</div><div class="line">(function (a, b, c = 5) &#123;&#125;).length // 2</div></pre></td></tr></table></figure></p>
<p>作用域<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//调用函数f时，参数形成一个单独的作用域</div><div class="line">let x = 1;</div><div class="line">function f(y = x) &#123;</div><div class="line">  let x = 2;</div><div class="line">  console.log(y);</div><div class="line">&#125;</div><div class="line">f() // 1</div></pre></td></tr></table></figure></p>
<p>应用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">function throwIfMissing() &#123;</div><div class="line">  throw new Error(&apos;Missing parameter&apos;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">function foo(mustBeProvided = throwIfMissing()) &#123;</div><div class="line">  return mustBeProvided;</div><div class="line">&#125;</div><div class="line">foo()</div><div class="line">// Error: Missing parameter</div></pre></td></tr></table></figure></p>
<ol>
<li><p>rest 参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(function(a) &#123;&#125;).length  // 1</div><div class="line">(function(...a) &#123;&#125;).length  // 0</div><div class="line">(function(a, ...b) &#123;&#125;).length  // 1</div></pre></td></tr></table></figure>
</li>
<li><p>spread…  扩展运算符,好比 rest 参数的逆运算<br>主要用于函数运算</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">function push(array, ...items) &#123;</div><div class="line">  array.push(...items);</div><div class="line">&#125;</div><div class="line"></div><div class="line">function add(x, y) &#123;</div><div class="line">  return x + y;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var numbers = [4, 38];</div><div class="line">add(...numbers) // 42</div></pre></td></tr></table></figure>
</li>
</ol>
<p>替代数组的apply方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">// ES5的写法</div><div class="line">function f(x, y, z) &#123;</div><div class="line">  // ...</div><div class="line">&#125;</div><div class="line">var args = [0, 1, 2];</div><div class="line">f.apply(null, args);</div><div class="line"></div><div class="line">// ES6的写法</div><div class="line">function f(x, y, z) &#123;</div><div class="line">  // ...</div><div class="line">&#125;</div><div class="line">var args = [0, 1, 2];</div><div class="line">f(...args);</div><div class="line">//应用</div><div class="line">Math.max.apply(null, [14, 3, 77]);// ES5</div><div class="line">Math.max(...[14, 3, 77]);// ES6</div><div class="line">Math.max(14, 3, 77);// 等同于</div><div class="line"></div><div class="line">var arr1=[1,2,3],arr2=[4,5];</div><div class="line">Array.prototype.push.apply(arr1,arr2);//ES5</div><div class="line">arr1.push(...arr2);//ES6</div><div class="line">new (Date.bind.apply(Date, [null, 2015, 1, 1]));//ES5</div><div class="line">new Date(...[2015, 1, 1]);// ES6</div></pre></td></tr></table></figure></p>
<p>扩展运算符应用</p>
<ol>
<li><p>数组合并</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">arr1.concat(arr2,arr3);//ES5</div><div class="line">[...arr1,...arr2,...arr3];//ES6</div></pre></td></tr></table></figure>
</li>
<li><p>结合解耦:将扩展运算符用于数组赋值，只能放在参数的最后一位，否则会报错。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">const [first, ...rest] = [1, 2, 3, 4, 5];</div><div class="line">first // 1</div><div class="line">rest  // [2, 3, 4, 5]</div></pre></td></tr></table></figure>
</li>
</ol>
<p>3.函数返回值</p>
<blockquote>
<p>JS函数只能有一个返回值，如果返回多个值只能将其放入数组或对象中返回<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var dateFields=readDateFields(datebase);</div><div class="line">var d=new Date(...dateFields);</div><div class="line">//上面代码从数据库取出一行数据，通过扩展运算符，直接将其传入构造函数Date。</div></pre></td></tr></table></figure></p>
</blockquote>
<ol>
<li><p>字符串:将字符串转为真正的数组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[...&apos;hello&apos;]</div><div class="line">// [ &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot; ]</div></pre></td></tr></table></figure>
</li>
<li><p>实现了Iterator接口的对象</p>
<blockquote>
<p>任何Iterator接口的对象，都可以用扩展运算符转为真正的数组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">var nodeList = document.querySelectorAll(&apos;div&apos;);</div><div class="line">var array = [...nodeList];</div><div class="line"></div><div class="line">let arrayLike = &#123;</div><div class="line">  &apos;0&apos;: &apos;a&apos;,</div><div class="line">  &apos;1&apos;: &apos;b&apos;,</div><div class="line">  &apos;2&apos;: &apos;c&apos;,</div><div class="line">  length: 3</div><div class="line">&#125;;</div><div class="line">let arr = [...arrayLike];</div><div class="line">// TypeError: Cannot spread non-iterable object.</div><div class="line">//arrayLike是一个类似数组的对象，但是没有部署Iterator接口，扩展运算符就会报错。这时，可以改为使用Array.from方法将arrayLike转为真正的数组。</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Map和Set结构，Generator函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">let map = new Map([</div><div class="line">  [1, &apos;one&apos;],</div><div class="line">  [2, &apos;two&apos;],</div><div class="line">  [3, &apos;three&apos;],</div><div class="line">]);</div><div class="line">let arr = [...map.keys()]; // [1, 2, 3]</div><div class="line">var go = function*()&#123;</div><div class="line">  yield 1;</div><div class="line">  yield 2;</div><div class="line">  yield 3;</div><div class="line">&#125;;</div><div class="line">[...go()] // [1, 2, 3]</div></pre></td></tr></table></figure>
</li>
<li><p>严格模式</p>
<blockquote>
<p>ES5中函数内部可设定为严格模式，ES6中规定函数参数一旦使用了默认值，<br>解耦赋值，或者扩展运算符，那么函数内就不能设定为严格模式。不合理之处在于<br>函数执行时先执行参数代码再执行函数体代码，而只有执行了函数体代码才知道是否<br>遵循严格模式。</p>
</blockquote>
</li>
</ol>
<p><em>为规避之，可以全局设置严格模式或者把函数放于一个IIFE中</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">  &apos;use strict&apos;;</div><div class="line">  //or...</div><div class="line">const doSomething = (function () &#123;</div><div class="line">  &apos;use strict&apos;;</div><div class="line">  return function(value = 42) &#123;</div><div class="line">    return value;</div><div class="line">  &#125;;</div><div class="line">&#125;());</div></pre></td></tr></table></figure></p>
<ol>
<li><p>name属性：函数的函数名。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var f = function () &#123;&#125;;</div><div class="line">f.name // &quot;f&quot;  ES6</div><div class="line">const bar = function baz() &#123;&#125;;</div><div class="line">bar.name // &quot;baz&quot;</div><div class="line">(new Function).name // &quot;anonymous&quot;</div><div class="line">function foo() &#123;&#125;;</div><div class="line">foo.bind(&#123;&#125;).name // &quot;bound foo&quot;</div><div class="line">(function()&#123;&#125;).bind(&#123;&#125;).name // &quot;bound &quot;</div></pre></td></tr></table></figure>
</li>
<li><p>箭头函数</p>
<blockquote>
<p>Arrows are a function shorthand using the <code>=&gt;</code> syntax.  They are syntactically similar to<br>the related feature in C#, Java 8 and CoffeeScript(和C#，Java8及CoffeeScript类似).<br>They support both statement block bodies as well as expression bodies which return the value of the expression.<br>Unlike functions, arrows share the same lexical <code>this</code> as their surrounding code(异于function，箭头函数和其EC<br>共享this).</p>
</blockquote>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">// Expression bodies表达式主体</div><div class="line">var odds = evens.map(v =&gt; v + 1);</div><div class="line">var nums = evens.map((v, i) =&gt; v + i);</div><div class="line">var pairs = evens.map(v =&gt; (&#123;even: v, odd: v + 1&#125;));</div><div class="line">// Statement bodies声明式主体</div><div class="line">nums.forEach(v =&gt; &#123;</div><div class="line">  if (v % 5 === 0)</div><div class="line">    fives.push(v);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// Lexical this共享this</div><div class="line">this.nums.forEach((v) =&gt; &#123;</div><div class="line">    if (v % 5 === 0)</div><div class="line">        this.fives.push(v)</div><div class="line">&#125;)</div><div class="line">//ES5</div><div class="line">odds  = evens.map(function (v) &#123; return v + 1; &#125;);</div><div class="line">pairs = evens.map(function (v) &#123; return &#123; even: v, odd: v + 1 &#125;; &#125;);</div><div class="line">nums  = evens.map(function (v, i) &#123; return v + i; &#125;);</div><div class="line">nums.forEach(function (v) &#123;</div><div class="line">   if (v % 5 === 0)</div><div class="line">       fives.push(v);</div><div class="line">&#125;);</div><div class="line">//  variant 1</div><div class="line">var self = this;</div><div class="line">this.nums.forEach(function (v) &#123;</div><div class="line">    if (v % 5 === 0)</div><div class="line">        self.fives.push(v);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">//  variant 2</div><div class="line">this.nums.forEach(function (v) &#123;</div><div class="line">    if (v % 5 === 0)</div><div class="line">        this.fives.push(v);</div><div class="line">&#125;, this);</div></pre></td></tr></table></figure>
<p>注意点：</p>
<ul>
<li>函数体内this对象为定义时而非使用时所在的对象</li>
<li>不可作为构造函数</li>
<li>不可使用arguments对象，可用rest参数代替</li>
<li>不可作为generator函数，因不可使用yield命令</li>
</ul>
<p>箭头函数可以让this指向固定化，这种特性很有利于封装回调函数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">var handler = &#123;</div><div class="line">  id: &apos;123456&apos;,</div><div class="line">  init: function() &#123;</div><div class="line">    document.addEventListener(&apos;click&apos;,</div><div class="line">      event =&gt; this.doSomething(event.type), false);</div><div class="line">  &#125;,</div><div class="line">  doSomething: function(type) &#123;</div><div class="line">    console.log(&apos;Handling &apos; + type  + &apos; for &apos; + this.id);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">function foo() &#123;</div><div class="line">  return () =&gt; &#123;</div><div class="line">    return () =&gt; &#123;</div><div class="line">      return () =&gt; &#123;</div><div class="line">        console.log(&apos;id:&apos;, this.id);</div><div class="line">      &#125;;</div><div class="line">    &#125;;</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var f = foo.call(&#123;id: 1&#125;);</div><div class="line">var t1 = f.call(&#123;id: 2&#125;)()(); // id: 1</div><div class="line">var t2 = f().call(&#123;id: 3&#125;)(); // id: 1</div><div class="line">var t3 = f()().call(&#123;id: 4&#125;); // id: 1</div></pre></td></tr></table></figure></p>
<p>More info: <a href="https://developer.mozilla.org/en/docs/Web//Reference/Functions/Arrow_functions" target="_blank" rel="external">MDN Arrow Functions</a></p>
<ol>
<li>尾调用（tail call）优化<blockquote>
<p>Tail Call 函数式编程的重要概念，某个函数最后一步调用的是另一个函数<br>函数调用会在内存中形成一个调用记录（call frame）,保存调用位置和内部变量等信息</p>
</blockquote>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">//模型</div><div class="line">function f(x)&#123;</div><div class="line">  return g(x);</div><div class="line">&#125;</div><div class="line">function f() &#123;</div><div class="line">  let m = 1;</div><div class="line">  let n = 2;</div><div class="line">  return g(m + n);</div><div class="line">&#125;</div><div class="line">f();</div><div class="line">// 等同于</div><div class="line">function f() &#123;</div><div class="line">  return g(3);</div><div class="line">&#125;</div><div class="line">f();</div><div class="line">// 等同于</div><div class="line">g(3);</div><div class="line">//注意，只有不再用到外层函数的内部变量，内层函数的调用帧才会取代外层函数的调用帧，否则就无法进行“尾调用优化”。</div><div class="line">function addOne(a)&#123;</div><div class="line">  var one = 1;</div><div class="line">  function inner(b)&#123;</div><div class="line">    return b + one;</div><div class="line">  &#125;</div><div class="line">  return inner(a);</div><div class="line">&#125;//并未优化</div><div class="line">//curring将多参数的函数转换成单参数的形式。</div><div class="line">function currying(fn, n) &#123;</div><div class="line">  return function (m) &#123;</div><div class="line">    return fn.call(this, m, n);</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function tailFactorial(n, total) &#123;</div><div class="line">  if (n === 1) return total;</div><div class="line">  return tailFactorial(n - 1, n * total);</div><div class="line">&#125;</div><div class="line">const factorial = currying(tailFactorial, 1);</div><div class="line">factorial(5) // 120</div><div class="line">//ES6的默认值</div><div class="line">function factorial(n, total = 1) &#123;</div><div class="line">  if (n === 1) return total;</div><div class="line">  return factorial(n - 1, n * total);</div><div class="line">&#125;</div><div class="line">factorial(5) // 120</div></pre></td></tr></table></figure>
<h3 id="enhanced-object-expression对象的扩展"><a href="#enhanced-object-expression对象的扩展" class="headerlink" title="enhanced object expression对象的扩展"></a>enhanced object expression对象的扩展</h3><ol>
<li><p>属性的简洁表示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">var foo=&apos;bar&apos;;</div><div class="line">var baz=&#123;foo&#125;;//&#123;foo:&apos;bar&apos;&#125;,可将对象的属性或方法直接写成变量或函数</div><div class="line">function f(x, y) &#123;return &#123;x, y&#125;;&#125;</div><div class="line">var o=&#123;</div><div class="line">    method()&#123;&#125;,</div><div class="line">&#125;</div><div class="line">//getter,setter</div><div class="line">var cart = &#123;</div><div class="line">  _wheels: 4,</div><div class="line">  get wheels () &#123;</div><div class="line">    return this._wheels;</div><div class="line">  &#125;,</div><div class="line">  set wheels (value) &#123;</div><div class="line">    if (value &lt; this._wheels) &#123;</div><div class="line">      throw new Error(&apos;数值太小了！&apos;);</div><div class="line">    &#125;</div><div class="line">    this._wheels = value;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>属性名表达式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">//JS定义对象属性方法</div><div class="line">obj.foo=true;//一</div><div class="line">obj[&apos;a&apos;+&apos;bc&apos;]=123;//二</div><div class="line">var obj=&#123;foo:true,abc:123&#125;;//ES5</div><div class="line">let propKey = &apos;foo&apos;;</div><div class="line">//ES6</div><div class="line">let obj = &#123;</div><div class="line">  [propKey]: true,</div><div class="line">  [&apos;a&apos; + &apos;bc&apos;]: 123</div><div class="line">&#125;;</div><div class="line">let obj = &#123;</div><div class="line">  [&apos;h&apos; + &apos;ello&apos;]() &#123;</div><div class="line">    return &apos;hi&apos;;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">obj.hello() // hi</div><div class="line">//属性名表达式如果是一个对象，默认情况下会自动将对象转为字符串[object Object]</div><div class="line">const keyA = &#123;a: 1&#125;;</div><div class="line">const keyB = &#123;b: 2&#125;;</div><div class="line">const myObject = &#123;</div><div class="line">  [keyA]: &apos;valueA&apos;,</div><div class="line">  [keyB]: &apos;valueB&apos;</div><div class="line">&#125;;</div><div class="line">myObject // Object &#123;[object Object]: &quot;valueB&quot;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>方法的name属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">const person = &#123;</div><div class="line">  sayName() &#123;</div><div class="line">    console.log(&apos;hello!&apos;);</div><div class="line">  &#125;,</div><div class="line">&#125;;</div><div class="line">person.sayName.name   // &quot;sayName&quot;</div><div class="line">/*</div><div class="line">如果对象的方法使用了取值函数（getter）和存值函数（setter），</div><div class="line">则name属性不是在该方法上面，而是该方法的属性的描述对象的</div><div class="line">get和set属性上面，返回值是方法名前加上get和set。</div><div class="line">*/</div><div class="line">const obj = &#123;</div><div class="line">  get foo() &#123;&#125;,</div><div class="line">  set foo(x) &#123;&#125;</div><div class="line">&#125;;</div><div class="line">obj.foo.name</div><div class="line">// TypeError: Cannot read property &apos;name&apos; of undefined</div><div class="line">const descriptor = Object.getOwnPropertyDescriptor(obj, &apos;foo&apos;);</div><div class="line">descriptor.get.name // &quot;get foo&quot;</div><div class="line">descriptor.set.name // &quot;set foo&quot;</div><div class="line"></div><div class="line">(new Function()).name // &quot;anonymous&quot;</div><div class="line"></div><div class="line">var doSomething = function() &#123;</div><div class="line">  // ...</div><div class="line">&#125;;</div><div class="line">doSomething.bind().name // &quot;bound doSomething&quot;</div><div class="line">//如果对象的方法是一个 Symbol 值，那么name属性返回的是这个 Symbol 值的描述。</div><div class="line">const key1 = Symbol(&apos;description&apos;);</div><div class="line">const key2 = Symbol();</div><div class="line">let obj = &#123;</div><div class="line">  [key1]() &#123;&#125;,</div><div class="line">  [key2]() &#123;&#125;,</div><div class="line">&#125;;</div><div class="line">obj[key1].name // &quot;[description]&quot;</div><div class="line">obj[key2].name // &quot;&quot;</div></pre></td></tr></table></figure>
</li>
<li><p>Object.is()</p>
<blockquote>
<p>ES5中只有==（自动转换数据类型）和===（NaN!=NaN,+0==-0）,ES6中提出<br>Same-value equality 同值相等</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">Object.is(&apos;foo&apos;, &apos;foo&apos;);// true</div><div class="line">Object.is(&#123;&#125;, &#123;&#125;);// false</div><div class="line">+0 === -0 //true</div><div class="line">NaN === NaN // false</div><div class="line">Object.is(+0, -0) // false</div><div class="line">Object.is(NaN, NaN) // true</div><div class="line">Object.defineProperty(Object, &apos;is&apos;, &#123;</div><div class="line">  value: function(x, y) &#123;</div><div class="line">    if (x === y) &#123;</div><div class="line">      // 针对+0 不等于 -0的情况</div><div class="line">      return x !== 0 || 1 / x === 1 / y;</div><div class="line">    &#125;</div><div class="line">    // 针对NaN的情况</div><div class="line">    return x !== x &amp;&amp; y !== y;</div><div class="line">  &#125;,</div><div class="line">  configurable: true,</div><div class="line">  enumerable: false,</div><div class="line">  writable: true</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Object.assign()<br>用于对象合并，将源对象(source)所有可枚举属性，复制到目标对象(target)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">var target=&#123;a:1&#125;;</div><div class="line">var source1=&#123;b:2&#125;;</div><div class="line">var source2=&#123;c:3&#125;;</div><div class="line">Object.assign(target,source1,source2);</div><div class="line">target;//&#123;a:1,b:2,c:3&#125;</div><div class="line">var obj = &#123;a: 1&#125;;</div><div class="line">Object.assign(obj) === obj // true,如果只有一个参数，Object.assign会直接返回该参数。</div><div class="line">typeof Object.assign(2) // &quot;object&quot; 如果该参数不是对象，则会先转成对象，然后返回。</div><div class="line">Object.assign(undefined) // 报错</div><div class="line">Object.assign(null) // 报错,由于undefined和null无法转成对象</div><div class="line">Object.assign(obj, undefined) === obj // true,如果无法转成对象，就会跳过</div><div class="line"></div><div class="line">var v1 = &apos;abc&apos;;</div><div class="line">var v2 = true;</div><div class="line">var v3 = 10;</div><div class="line">var obj = Object.assign(&#123;&#125;, v1, v2, v3);</div><div class="line">console.log(obj); // &#123; &quot;0&quot;: &quot;a&quot;, &quot;1&quot;: &quot;b&quot;, &quot;2&quot;: &quot;c&quot; &#125;</div><div class="line">//只有字符串的包装对象，会产生可枚举属性。故除了字符串会以数组形式，拷贝入目标对象，其他值都不会产生效果。</div><div class="line">Object(true) // &#123;[[PrimitiveValue]]: true&#125;</div><div class="line">Object(10)  //  &#123;[[PrimitiveValue]]: 10&#125;</div><div class="line">Object(&apos;abc&apos;) // &#123;0: &quot;a&quot;, 1: &quot;b&quot;, 2: &quot;c&quot;, length: 3, [[PrimitiveValue]]: &quot;abc&quot;&#125;</div><div class="line"></div><div class="line">Object.assign(&#123;b: &apos;c&apos;&#125;,</div><div class="line">  Object.defineProperty(&#123;&#125;, &apos;invisible&apos;, &#123;</div><div class="line">    enumerable: false,</div><div class="line">    value: &apos;hello&apos;</div><div class="line">  &#125;)</div><div class="line">)</div><div class="line">// &#123; b: &apos;c&apos; &#125; ，只拷贝源对象的自身属性（不拷贝继承属性），也不拷贝不可枚举的属性（enumerable: false）。</div><div class="line"></div><div class="line">Object.assign(&#123; a: &apos;b&apos; &#125;, &#123; [Symbol(&apos;c&apos;)]: &apos;d&apos; &#125;)</div><div class="line">// &#123; a: &apos;b&apos;, Symbol(c): &apos;d&apos; &#125;</div><div class="line"></div><div class="line">Object.assign([1, 2, 3], [4, 5])</div><div class="line">// [4, 5, 3] ，把数组视为对象。</div></pre></td></tr></table></figure>
</li>
</ol>
<p><em>Object.assign进行的是浅拷贝</em><br>应用：</p>
<ol>
<li>为对象添加属性<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">class Point&#123;</div><div class="line">    constructor(x,y)&#123;</div><div class="line">        Object.assign(this,&#123;x,y&#125;);//将x属性和y属性添加到Point类的对象实例。</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>2.为对象添加方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Object.assign(SomeClass.prototype, &#123;</div><div class="line">  someMethod(arg1, arg2) &#123;</div><div class="line">  &#125;,</div><div class="line">  anotherMethod() &#123;</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line">//等同于</div><div class="line">SomeClass.prototype.someMethod = function (arg1, arg2) &#123;</div><div class="line">&#125;;</div><div class="line">SomeClass.prototype.anotherMethod = function () &#123;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<ol>
<li>克隆对象<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">function clone(origin)&#123;</div><div class="line">    return Object.assign(&#123;&#125;,origin);</div><div class="line">&#125;//只克隆原始对象自身的值而克隆不了其继承的值</div><div class="line">function clone(origin)&#123;</div><div class="line">    let originProto=Object.getPrototypeOf(origin);</div><div class="line">    return Object.assign(Object.create(originProto),origin);</div><div class="line">&#125;//不仅克隆本身还克隆其继承的值</div></pre></td></tr></table></figure>
</li>
</ol>
<p>4.合并对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//将多个对象合并到某个对象</div><div class="line">const merge=(target,...source)=&gt;Object.assign(target,...source);</div><div class="line">//合并后返回一个新对象</div><div class="line">const merge=(...source)=&gt;Object.assign(&#123;&#125;,...source);</div></pre></td></tr></table></figure></p>
<ol>
<li>为属性指定默认值<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">const DEFAULTS = &#123;</div><div class="line">  logLevel: 0,</div><div class="line">  outputFormat: &apos;html&apos;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">function processContent(options) &#123;</div><div class="line">  options = Object.assign(&#123;&#125;, DEFAULTS, options);</div><div class="line">  console.log(options);</div><div class="line">  // ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>6.属性的可枚举性：Object.getOwnPropertyDescriptor可以获取该属性的描述对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">let obj = &#123; foo: 123 &#125;;</div><div class="line">Object.getOwnPropertyDescriptor(obj, &apos;foo&apos;)</div><div class="line">//  &#123;</div><div class="line">//    value: 123,</div><div class="line">//    writable: true,</div><div class="line">//    enumerable: true,</div><div class="line">//    configurable: true</div><div class="line">//  &#125;</div></pre></td></tr></table></figure></p>
<p><em>ES5的三个操作会忽略enumerable为false的属性</em></p>
<ul>
<li>for…in循环:只遍历对象自身<em>及继承的</em>可枚举属性</li>
<li>Object.keys():返回对象自身所有科美居属性的键名</li>
<li>JSON.stringify():只串行化对象自身的可枚举属性</li>
<li>ES 6中Object.assign()会忽略enumerable为false的属性,只拷贝对象自身可枚举属性<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Object.getOwnPropertyDescriptor(Object.prototype, &apos;toString&apos;).enumerable</div><div class="line">// false</div><div class="line">Object.getOwnPropertyDescriptor([], &apos;length&apos;).enumerable</div><div class="line">// false</div><div class="line">Object.getOwnPropertyDescriptor(class &#123;foo() &#123;&#125;&#125;.prototype, &apos;foo&apos;).enumerable</div><div class="line">// false,故for...in不会遍历到这两个继承自原型的属性。</div><div class="line">//一般我们只关心对象自身的属性。所以，尽量不要用for...in循环，而用Object.keys()代替。</div></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li><p>属性遍历</p>
<ol>
<li>for…in :对象自身的和继承的可枚举属性（不含Symbol属性）。</li>
<li>Object.keys返回一个数组，包括对象自身的（不含继承的）所有可枚举属性（不含Symbol属性）。</li>
<li>Object.getOwnPropertyNames返回一个数组，包含对象自身的所有属性（不含Symbol属性，但是包括不可枚举属性）。</li>
<li>Object.getOwnPropertySymbols返回一个数组，包含对象自身的所有Symbol属性。</li>
<li>Reflect.ownKeys返回一个数组，包含对象自身的所有属性，不管是属性名是Symbol或字符串，也不管是否可枚举。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Reflect.ownKeys(&#123; [Symbol()]:0, b:0, 10:0, 2:0, a:0 &#125;)</div><div class="line">// [&apos;2&apos;, &apos;10&apos;, &apos;b&apos;, &apos;a&apos;, Symbol()]</div><div class="line">//遍历顺序：数值&gt;字符串&gt;Symbol</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p><strong>proto</strong>属性，Object.setPrototypeOf(),Object.getPrototypeOf()</p>
<blockquote>
<p><strong>proto</strong>读取或设置对象的prototype对象，无论从语义的角度，还是从兼容性的角度，都不要使用这个属性<br>后边几个替代之</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">Object.getPrototypeOf(&#123; __proto__: null &#125;)</div><div class="line">// null,设置了__proto__属性的对象，其值既是对象的原型</div><div class="line">// 格式, ES6 正式推荐</div><div class="line">Object.setPrototypeOf(object, prototype);</div><div class="line">Object.getPrototypeOf(obj);</div><div class="line">// 用法</div><div class="line">var o = Object.setPrototypeOf(&#123;&#125;, null);</div><div class="line">function Rectangle() &#123;</div><div class="line">  // ...</div><div class="line">&#125;</div><div class="line">var rec = new Rectangle();</div><div class="line">Object.getPrototypeOf(rec) === Rectangle.prototype</div><div class="line">// true</div><div class="line">Object.setPrototypeOf(rec, Object.prototype);</div><div class="line">Object.getPrototypeOf(rec) === Rectangle.prototype</div><div class="line">// false</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Object.keys(),Object.values(),Object.entries()</p>
</li>
<li><p>对象的扩展运算符</p>
<ol>
<li><p>解耦</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">let &#123; x, y, ...z &#125; = &#123; x: 1, y: 2, a: 3, b: 4 &#125;;</div><div class="line">x // 1</div><div class="line">y // 2</div><div class="line">z // &#123; a: 3, b: 4 &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>扩展运算符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">let z = &#123; a: 3, b: 4 &#125;;</div><div class="line">let n = &#123; ...z &#125;;</div><div class="line">n // &#123; a: 3, b: 4 &#125;</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>Object.getOwnPropertyDescriptors() </p>
</li>
</ol>
<blockquote>
<p>指定对象所有自身属性（非继承属性）的描述对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">const obj = &#123;</div><div class="line">  foo: 123,</div><div class="line">  get bar() &#123; return &apos;abc&apos; &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Object.getOwnPropertyDescriptors(obj)</div><div class="line">// &#123; foo:</div><div class="line">//    &#123; value: 123,</div><div class="line">//      writable: true,</div><div class="line">//      enumerable: true,</div><div class="line">//      configurable: true &#125;,</div><div class="line">//   bar:</div><div class="line">//    &#123; get: [Function: bar],</div><div class="line">//      set: undefined,</div><div class="line">//      enumerable: true,</div><div class="line">//      configurable: true &#125; &#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<ol>
<li>Null传导运算符<br>More info: <a href="https://developer.mozilla.org/en-US/docs/Web//Guide/Grammar_and_types#Object_literals" target="_blank" rel="external">MDN Grammar and types: Object literals</a><h3 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h3></li>
</ol>
<blockquote>
<p>ES5对象属性名都是容易造成命名冲突的字符串，引入Symbol数据类型从根本上解决了此问题</p>
</blockquote>
<p> <em>注意symbol不能用new命令，因为生成Symbol对象是一个原始类型的值，而非对象</em></p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"> let s=Symbol();</div><div class="line"> typeof s;//&apos;symbol&apos;</div><div class="line">//Symbol函数可以接受一个字符串作为参数，表示对Symbol实例的描述，主要是为了在控制台显示，或者转为字符串时，比较容易区分。</div><div class="line">var s1=Symbol(&apos;foo&apos;);</div><div class="line">s1;//Symbol(foo)</div><div class="line">s1.toString();//&quot;Symbol(foo)&quot;</div><div class="line">//Symbol函数的参数只是表示对当前 Symbol 值的描述</div><div class="line">var s2 = Symbol(&apos;foo&apos;);</div><div class="line">s1 === s2 // false</div><div class="line">String(s1);//&quot;Symbol(foo)&quot;</div><div class="line">&quot;your symbol is &quot; + s1;//Symbol不能与其它类型值进行运算，但可以显示转为字符串</div><div class="line">var sym = Symbol();</div><div class="line">Boolean(sym) // true</div><div class="line">!sym  // false</div><div class="line">if (sym) &#123;</div><div class="line">  // ...</div><div class="line">&#125;</div><div class="line">Number(sym) // TypeError</div><div class="line">sym + 2 // TypeError,Symbol值也可以转为布尔值，但是不能转为数值。</div></pre></td></tr></table></figure>
<ol>
<li>作为属性名的Symbol<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">var mySymbol=Symbol();</div><div class="line">var a=&#123;&#125;;</div><div class="line">a[mySymbol]=&apos;hello!&apos;;</div><div class="line">var a=&#123;[mySymbol]:&apos;hello!&apos;&#125;;</div><div class="line">Object.defineProperty(a,mySymbol,&#123;value:&apos;hello!&apos;&#125;);</div><div class="line">a[mySymbol];//&apos;hello!&apos;</div><div class="line">//Symbol值作为对象属性名时，由于点运算符后面总是字符串不会读取mySymbol作为标识名所指代的那个值不能用点运算符</div><div class="line">a.mySymbol=&apos;hello!&apos;;</div><div class="line">a.mySymbol;//&apos;undefined&apos;</div><div class="line">a[&apos;mySymbol&apos;];//&apos;hello!&apos;</div><div class="line">let s = Symbol();</div><div class="line">let obj = &#123;</div><div class="line">   [s](arg) &#123; ... &#125;</div><div class="line">&#125;;</div><div class="line">obj[s](123);</div><div class="line">//实例，常量使用Symbol的好处是任何值都不可能有相同值了，且Symbol值作为属性名时该属性为公有属性</div><div class="line">const COLOR_RED    = Symbol();</div><div class="line">const COLOR_GREEN  = Symbol();</div><div class="line">function getComplement(color) &#123;</div><div class="line">  switch (color) &#123;</div><div class="line">    case COLOR_RED:</div><div class="line">      return COLOR_GREEN;</div><div class="line">    case COLOR_GREEN:</div><div class="line">      return COLOR_RED;</div><div class="line">    default:</div><div class="line">      throw new Error(&apos;Undefined color&apos;);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>3.消除魔术字符串<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">const shapeType = &#123;</div><div class="line">  triangle: Symbol()</div><div class="line">&#125;;</div><div class="line">function getArea(shape, options) &#123;</div><div class="line">  var area = 0;</div><div class="line">  switch (shape) &#123;</div><div class="line">    case shapeType.triangle:</div><div class="line">      area = .5 * options.width * options.height;</div><div class="line">      break;</div><div class="line">  &#125;</div><div class="line">  return area;</div><div class="line">&#125;</div><div class="line"></div><div class="line">getArea(shapeType.triangle, &#123; width: 100, height: 100 &#125;);</div></pre></td></tr></table></figure></p>
<ol>
<li>属性名遍历<blockquote>
<p>Symbol作为属性名，该属性不会出现在for…in，for…of,Object.keys(),<br>Object.getOwnPropertyNames(),JSON.stringify()返回，但也不是私有属性，唯有<br>Object.getOwnPropertySymbols可以获取指定对象的所有Symbol属性名。</p>
</blockquote>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var obj = &#123;&#125;;</div><div class="line">var a = Symbol(&apos;a&apos;);</div><div class="line">var b = Symbol(&apos;b&apos;);</div><div class="line">obj[a] = &apos;Hello&apos;;</div><div class="line">obj[b] = &apos;World&apos;;</div><div class="line">Object.getOwnPropertySymbols(obj);// [Symbol(a), Symbol(b)]</div></pre></td></tr></table></figure>
<ol>
<li>Symbol.for(),Symbol.keyFor()<br>More info: <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Global_Objects/Symbol" target="_blank" rel="external">MDN Symbol</a><h3 id="Map-Set"><a href="#Map-Set" class="headerlink" title="Map + Set"></a>Map + Set</h3><blockquote>
<p>Efficient data structures for common algorithms.  WeakMaps provides leak-free object-key’d side tables.</p>
</blockquote>
</li>
<li>Set<blockquote>
<p>ES6新的数据结构之一，类似数组但成员唯一，Set本身是一个构造函数用来生成Set数据结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">var set = new Set([1, 2, 3, 4, 4]);</div><div class="line">[...set] // [1, 2, 3, 4]</div><div class="line">set.size // 4</div><div class="line">function divs () &#123;</div><div class="line">  return [...document.querySelectorAll(&apos;div&apos;)];</div><div class="line">&#125;</div><div class="line">var set = new Set(divs());//or</div><div class="line">divs().forEach(div =&gt; set.add(div));</div><div class="line">set.size // 56</div><div class="line">//Set内部，NaN相等而两个对象不等</div><div class="line">let set = new Set();</div><div class="line">let a = NaN;</div><div class="line">let b = NaN;</div><div class="line">set.add(a);</div><div class="line">set.add(b);</div><div class="line">set // Set &#123;NaN&#125;</div><div class="line"></div><div class="line">et.add(&#123;&#125;);</div><div class="line">set.size // 1</div><div class="line">set.add(&#123;&#125;);</div><div class="line">set.size // 2</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<p>Set实例的属性和方法<br>属性：</p>
<ul>
<li>Set.prototype.constructor</li>
<li>Set.prototype.size<br>方法</li>
<li>add(value)</li>
<li>clear()</li>
<li>delete(value)</li>
<li>has(value)<br>遍历:Set的遍历顺序就是插入顺序</li>
<li>keys()</li>
<li>values()</li>
<li>entries()</li>
<li>forEach()</li>
</ul>
<p>Array.from可以将Set结构转为数组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">var items=new Set([1,2,3,4,5]);</div><div class="line">var array=Array.from(items);</div><div class="line">[...new Set(arr)]//不失为数组去重的好方法</div><div class="line">Array.from(new Set(arr));//不失为数组去重的好方法</div><div class="line"></div><div class="line">let set = new Set([&apos;red&apos;, &apos;green&apos;, &apos;blue&apos;]);</div><div class="line">for (let item of set.keys()) &#123;</div><div class="line">  console.log(item);</div><div class="line">&#125;</div><div class="line">// red green blue</div><div class="line">for (let item of set.values()) &#123;</div><div class="line">  console.log(item);</div><div class="line">&#125;</div><div class="line">// red green blue</div><div class="line">for (let item of set.entries()) &#123;</div><div class="line">  console.log(item);</div><div class="line">&#125;</div><div class="line">// [&quot;red&quot;, &quot;red&quot;]</div><div class="line">// [&quot;green&quot;, &quot;green&quot;]</div><div class="line">// [&quot;blue&quot;, &quot;blue&quot;]</div><div class="line"></div><div class="line">Set.prototype[Symbol.iterator] === Set.prototype.values;//可以省略values方法</div><div class="line">// true</div></pre></td></tr></table></figure></p>
<ol>
<li>WeakSet<blockquote>
<p>WeakSet成员只能是弱引用对象，成员不可遍历</p>
</blockquote>
</li>
<li>Map<blockquote>
<p>JS对象本质是键值对的集合（hash结构），但传统上只能用字符串作键。ES6中<br>的Map类对象的数据结构使得各种类型的值都可以作键，是一种更完善的hash结构实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">var m = new Map();</div><div class="line">var o = &#123;p: &apos;Hello World&apos;&#125;;</div><div class="line">m.set(o, &apos;content&apos;)</div><div class="line">m.get(o) // &quot;content&quot;</div><div class="line">m.has(o) // true</div><div class="line">m.delete(o) // true</div><div class="line">m.has(o) // false</div><div class="line"></div><div class="line">var map = new Map([</div><div class="line">  [&apos;name&apos;, &apos;张三&apos;],</div><div class="line">  [&apos;title&apos;, &apos;Author&apos;]</div><div class="line">]);</div><div class="line">map.size // 2</div><div class="line">map.has(&apos;name&apos;) // true</div><div class="line">map.get(&apos;name&apos;) // &quot;张三&quot;</div><div class="line">map.has(&apos;title&apos;) // true</div><div class="line">map.get(&apos;title&apos;) // &quot;Author&quot;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<p>实例和属性的操作方法</p>
<pre><code>1. size
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">let map = new Map();</div><div class="line">map.set(&apos;foo&apos;, true);</div><div class="line">map.set(&apos;bar&apos;, false);</div><div class="line">map.size // 2</div></pre></td></tr></table></figure>

2. set(key, value)
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var m = new Map();    </div><div class="line">m.set(&quot;edition&quot;, 6)        // 键是字符串</div><div class="line">m.set(262, &quot;standard&quot;)     // 键是数值</div><div class="line">m.set(undefined, &quot;nah&quot;)    // 键是undefined</div><div class="line">let map = new Map()</div><div class="line">  .set(1, &apos;a&apos;)</div><div class="line">  .set(2, &apos;b&apos;)</div><div class="line">  .set(3, &apos;c&apos;);</div></pre></td></tr></table></figure>

3. get(key)
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var m = new Map();   </div><div class="line">var hello = function() &#123;console.log(&quot;hello&quot;);&#125;</div><div class="line">m.set(hello, &quot;Hello ES6!&quot;) // 键是函数</div><div class="line">m.get(hello)  // Hello ES6!</div></pre></td></tr></table></figure>

4. has(key)
5. delete(key)
6. clear()
</code></pre><p>遍历方法同Set<br>与其它数据结构的互换</p>
<pre><code>1. 数组
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">let myMap = new Map().set(true, 7).set(&#123;foo: 3&#125;, [&apos;abc&apos;]);</div><div class="line">[...myMap]</div><div class="line">// [ [ true, 7 ], [ &#123; foo: 3 &#125;, [ &apos;abc&apos; ] ] ]</div><div class="line">new Map([[true, 7], [&#123;foo: 3&#125;, [&apos;abc&apos;]]])</div><div class="line">// Map &#123;true =&gt; 7, Object &#123;foo: 3&#125; =&gt; [&apos;abc&apos;]&#125;</div></pre></td></tr></table></figure>

2. 对象
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">function strMapToObj(strMap) &#123;</div><div class="line">  let obj = Object.create(null);</div><div class="line">  for (let [k,v] of strMap) &#123;</div><div class="line">    obj[k] = v;</div><div class="line">  &#125;</div><div class="line">  return obj;</div><div class="line">&#125;</div><div class="line"></div><div class="line">let myMap = new Map().set(&apos;yes&apos;, true).set(&apos;no&apos;, false);</div><div class="line">strMapToObj(myMap)</div><div class="line">// &#123; yes: true, no: false &#125;</div><div class="line">function objToStrMap(obj) &#123;</div><div class="line">  let strMap = new Map();</div><div class="line">  for (let k of Object.keys(obj)) &#123;</div><div class="line">    strMap.set(k, obj[k]);</div><div class="line">  &#125;</div><div class="line">  return strMap;</div><div class="line">&#125;   </div><div class="line">objToStrMap(&#123;yes: true, no: false&#125;)</div><div class="line">// [ [ &apos;yes&apos;, true ], [ &apos;no&apos;, false ] ]</div></pre></td></tr></table></figure>

5.JSON
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function strMapToJson(strMap) &#123;</div><div class="line">  return JSON.stringify(strMapToObj(strMap));</div><div class="line">&#125;   </div><div class="line">let myMap = new Map().set(&apos;yes&apos;, true).set(&apos;no&apos;, false);</div><div class="line">strMapToJson(myMap)</div><div class="line">// &apos;&#123;&quot;yes&quot;:true,&quot;no&quot;:false&#125;&apos;</div><div class="line"></div><div class="line">function jsonToStrMap(jsonStr) &#123;</div><div class="line">  return objToStrMap(JSON.parse(jsonStr));</div><div class="line">&#125;    </div><div class="line">jsonToStrMap(&apos;&#123;&quot;yes&quot;:true,&quot;no&quot;:false&#125;&apos;)</div><div class="line">// Map &#123;&apos;yes&apos; =&gt; true, &apos;no&apos; =&gt; false&#125;</div></pre></td></tr></table></figure>
</code></pre><ol>
<li>WeakMap:只接收不计入GC的对象作为键名<br>More MDN info: <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Global_Objects/Map" target="_blank" rel="external">Map</a>, <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Global_Objects/Set" target="_blank" rel="external">Set</a>, <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Global_Objects/WeakMap" target="_blank" rel="external">WeakMap</a>, <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Global_Objects/WeakSet" target="_blank" rel="external">WeakSet</a><h3 id="Proxy代理"><a href="#Proxy代理" class="headerlink" title="Proxy代理"></a>Proxy代理</h3><blockquote>
<p>用于修改某些操作的默认行为,等同于在语言层面修改，属于meta programming元编程<br>即对编程语言编程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">//Proxy 实际上重载（overload）了点运算符，即用自己的定义覆盖了语言的原始定义。</div><div class="line">var obj = new Proxy(&#123;&#125;, &#123;</div><div class="line">  get: function (target, key, receiver) &#123;</div><div class="line">    console.log(`getting $&#123;key&#125;!`);</div><div class="line">    return Reflect.get(target, key, receiver);</div><div class="line">  &#125;,</div><div class="line">  set: function (target, key, value, receiver) &#123;</div><div class="line">    console.log(`setting $&#123;key&#125;!`);</div><div class="line">    return Reflect.set(target, key, value, receiver);</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line">obj.count = 1</div><div class="line">//  setting count!</div><div class="line">++obj.count</div><div class="line">//  getting count!</div><div class="line">//  setting count!</div><div class="line">//  2</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<p>proxy支持的操作</p>
<ul>
<li>get(target, propKey, receiver) 拦截对象属性的读取</li>
<li>set(target, propKey, value, receiver) 拦截对象属性的设置，比如proxy.foo = v或proxy[‘foo’] = v，返回一个布尔值。</li>
<li>has(target, propKey) 拦截propKey in proxy的操作，返回一个布尔值。</li>
<li>deleteProperty(target, propKey) 拦截delete proxy[propKey]的操作，返回一个布尔值。</li>
<li>ownKeys(target) 拦截Object.getOwnPropertyNames(proxy)、Object.getOwnPropertySymbols(proxy)、Object.keys(proxy)，返回一个数组。</li>
<li>getOwnPropertyDescriptor(target, propKey)拦截Object.getOwnPropertyDescriptor(proxy, propKey)，返回属性的描述对象。</li>
<li>defineProperty(target, propKey, propDesc) 拦截Object.defineProperty(proxy, propKey, propDesc）、Object.defineProperties(proxy, propDescs)，返回一个布尔值。</li>
<li>preventExtensions(target)拦截Object.preventExtensions(proxy)，返回一个布尔值。</li>
<li>getPrototypeOf(target)拦截Object.getPrototypeOf(proxy)，返回一个对象</li>
<li>isExtensible(target)拦截Object.isExtensible(proxy)，返回一个布尔值。</li>
<li>setPrototypeOf(target, proto)拦截Object.setPrototypeOf(proxy, proto)，返回一个布尔值。</li>
<li>apply(target, object, args)拦截 Proxy 实例作为函数调用的操作，比如proxy(…args)、proxy.call(object, …args)、proxy.apply(…)。</li>
<li>construct(target, args)拦截 Proxy 实例作为构造函数调用的操作，比如new proxy(…args)。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// Proxying a normal object</div><div class="line">var target = &#123;&#125;;</div><div class="line">var handler = &#123;</div><div class="line">  get: function (receiver, name) &#123;</div><div class="line">    return `Hello, $&#123;name&#125;!`;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var p = new Proxy(target, handler);</div><div class="line">p.world === &apos;Hello, world!&apos;;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// Proxying a function object</div><div class="line">var target = function () &#123; return &apos;I am the target&apos;; &#125;;</div><div class="line">var handler = &#123;</div><div class="line">  apply: function (receiver, ...args) &#123;</div><div class="line">    return &apos;I am the proxy&apos;;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var p = new Proxy(target, handler);</div><div class="line">p() === &apos;I am the proxy&apos;;</div></pre></td></tr></table></figure>
<p>There are traps available for all of the runtime-level meta-operations:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">var handler =</div><div class="line">&#123;</div><div class="line">  get:...,</div><div class="line">  set:...,</div><div class="line">  has:...,</div><div class="line">  deleteProperty:...,</div><div class="line">  apply:...,</div><div class="line">  construct:...,</div><div class="line">  getOwnPropertyDescriptor:...,</div><div class="line">  defineProperty:...,</div><div class="line">  getPrototypeOf:...,</div><div class="line">  setPrototypeOf:...,</div><div class="line">  enumerate:...,</div><div class="line">  ownKeys:...,</div><div class="line">  preventExtensions:...,</div><div class="line">  isExtensible:...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>More info: <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Global_Objects/Proxy" target="_blank" rel="external">MDN Proxy</a></p>
<h3 id="Reflect"><a href="#Reflect" class="headerlink" title="Reflect"></a>Reflect</h3><p>设计目的：</p>
<ol>
<li>将Object对象一些明显属于语言内部的方法（Object.defineProperty）,放到Reflect对象上</li>
<li><p>修改某些Object方法的返回结果，让其变得更合理。</p>
<blockquote>
<p>如，Object.defineProperty(obj, name, desc)在无法定义属性时，<br> 会抛出一个错误，而Reflect.defineProperty(obj, name, desc)则会返回false。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//ES5</div><div class="line">try&#123;</div><div class="line">    Object.defineProperty(target,property,attributes);</div><div class="line">&#125;catch(e)&#123;&#125;</div><div class="line">//ES6</div><div class="line">if(Reflect.defineProperty(target,property,attributes))&#123;</div><div class="line">//success</div><div class="line">&#125;else&#123;//failure&#125;</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>让Object操作都变成函数行为。</p>
<blockquote>
<p>某些Object操作是命令式，比如name in obj和delete obj[name]，而Reflect.has(obj, name)<br>和Reflect.deleteProperty(obj, name)让它们变成了函数行为。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&apos;assign&apos; in Object;//true ES5</div><div class="line">Reflect.has(Object,&apos;assign&apos;);//true</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Reflect对象的方法与Proxy对象的方法一一对应。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">var loggedObj = new Proxy(obj, &#123;</div><div class="line">  get(target, name) &#123;</div><div class="line">    console.log(&apos;get&apos;, target, name);</div><div class="line">    return Reflect.get(target, name);</div><div class="line">  &#125;,</div><div class="line">  deleteProperty(target, name) &#123;</div><div class="line">    console.log(&apos;delete&apos; + name);</div><div class="line">    return Reflect.deleteProperty(target, name);</div><div class="line">  &#125;,</div><div class="line">  has(target, name) &#123;</div><div class="line">    console.log(&apos;has&apos; + name);</div><div class="line">    return Reflect.has(target, name);</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">Function.prototype.apply.call(Math.floor, undefined, [1.75]) // 1 ES5</div><div class="line">Reflect.apply(Math.floor, undefined, [1.75]) // 1</div></pre></td></tr></table></figure>
</li>
<li><p>静态方法</p>
</li>
</ol>
<ul>
<li>Reflect.apply(target,thisArg,args)</li>
<li>Reflect.construct(target,args)</li>
<li>Reflect.get(target,name,receiver)</li>
<li>Reflect.set(target,name,value,receiver)</li>
<li>Reflect.defineProperty(target,name,desc)</li>
<li>Reflect.deleteProperty(target,name)</li>
<li>Reflect.has(target,name)</li>
<li>Reflect.ownKeys(target)</li>
<li>Reflect.isExtensible(target)</li>
<li>Reflect.preventExtensions(target)</li>
<li>Reflect.getOwnPropertyDescriptor(target, name)</li>
<li>Reflect.getPrototypeOf(target)</li>
<li>Reflect.setPrototypeOf(target, prototype)<br>实例：使用Proxy实现观察者模式<blockquote>
<p>函数自动观察数据对象，一旦对象有变化函数变化便自动执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">const queuedObservers = new Set();</div><div class="line">const observe = fn =&gt; queuedObservers.add(fn);</div><div class="line">const observable = obj =&gt; new Proxy(obj, &#123;set&#125;);</div><div class="line"></div><div class="line">function set(target, key, value, receiver) &#123;</div><div class="line">  const result = Reflect.set(target, key, value, receiver);</div><div class="line">  queuedObservers.forEach(observer =&gt; observer());</div><div class="line">  return result;</div><div class="line">&#125;</div><div class="line">const person = observable(&#123;</div><div class="line">  name: &apos;张三&apos;,</div><div class="line">  age: 20</div><div class="line">&#125;);</div><div class="line">function print() &#123;</div><div class="line">  console.log(`$&#123;person.name&#125;, $&#123;person.age&#125;`)</div><div class="line">&#125;</div><div class="line">observe(print);</div><div class="line">person.name = &apos;李四&apos;;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<h3 id="Promises"><a href="#Promises" class="headerlink" title="Promises"></a>Promises</h3><blockquote>
<p>Promise,简而言之即存放未来才会结束的事件结果的容器。</p>
</blockquote>
<ol>
<li>特点：<ol>
<li>对象状态不受外部影响。<blockquote>
<p>Promise代表一个异步操作，有三种状态：Pending(进行中)，Resolved(已完成)和<br>Rejected(已失败)。只有异步操作的结果可以决定当前是哪一种状态，也即是Promise名字的由来。</p>
</blockquote>
</li>
<li>状态改变就不会再变，任何时候都可以得到该结果。<blockquote>
<p>Promise对象状态的改变有两种：从Pending变为Resolved和从Pending变为Rejected。<br>只要此二种情况发生就凝固了，结果不会再变。与事件event完全不同（错过了再去监听则得不到结果）</p>
</blockquote>
</li>
</ol>
</li>
</ol>
<p><em>有了Promise对象即可以同步操作的流程实现异步操作，避免了回调地狱；且Promise对象提供统一接口，简化了异步操作</em><br>缺点是：</p>
<ul>
<li>无法取消Promise，一旦建立则立即执行；</li>
<li>如无回调函数，内部抛出错误但外部无反应；</li>
<li>当处于Pending时，无法得知目前进行到哪个阶段</li>
<li>如某事件不断发生，stream模式则优于Promise</li>
</ul>
<ol>
<li>基本用法<blockquote>
<p>Promise对象是一个构造函数，用来生成Promise实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">var promise = new Promise(function(resolve, reject) &#123;</div><div class="line">  if (/* 异步操作成功 */)&#123;</div><div class="line">    resolve(value);</div><div class="line">  &#125; else &#123;</div><div class="line">    reject(error);</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line">//Promise新建后就会立即执行</div><div class="line">let promise = new Promise(function(resolve, reject) &#123;</div><div class="line">  console.log(&apos;Promise&apos;);</div><div class="line">  resolve();</div><div class="line">&#125;);</div><div class="line">promise.then(function() &#123;</div><div class="line">  console.log(&apos;Resolved.&apos;);</div><div class="line">&#125;);</div><div class="line">console.log(&apos;Hi!&apos;);</div><div class="line">// Promise</div><div class="line">// Hi!</div><div class="line">// Resolved</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<p>实例：实现Ajax<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">var getJSON = function(url) &#123;</div><div class="line">  var promise = new Promise(function(resolve, reject)&#123;</div><div class="line">    var client = new XMLHttpRequest();</div><div class="line">    client.open(&quot;GET&quot;, url);</div><div class="line">    client.onreadystatechange = handler;</div><div class="line">    client.responseType = &quot;json&quot;;</div><div class="line">    client.setRequestHeader(&quot;Accept&quot;, &quot;application/json&quot;);</div><div class="line">    client.send();</div><div class="line"></div><div class="line">    function handler() &#123;</div><div class="line">      if (this.readyState !== 4) &#123;</div><div class="line">        return;</div><div class="line">      &#125;</div><div class="line">      if (this.status === 200) &#123;</div><div class="line">        resolve(this.response);</div><div class="line">      &#125; else &#123;</div><div class="line">        reject(new Error(this.statusText));</div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">  &#125;);</div><div class="line">  return promise;</div><div class="line">&#125;;</div><div class="line">getJSON(&quot;/posts.json&quot;).then(function(json) &#123;</div><div class="line">  console.log(&apos;Contents: &apos; + json);</div><div class="line">&#125;, function(error) &#123;</div><div class="line">  console.error(&apos;出错了&apos;, error);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<ol>
<li><p>Promise.prototype.then()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">getJSON(&quot;/post/1.json&quot;).then(</div><div class="line">  post =&gt; getJSON(post.commentURL)</div><div class="line">).then(</div><div class="line">  comments =&gt; console.log(&quot;Resolved: &quot;, comments),</div><div class="line">  err =&gt; console.log(&quot;Rejected: &quot;, err)</div><div class="line">);</div></pre></td></tr></table></figure>
</li>
<li><p>Promise.prototype.catch()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// 写法一</div><div class="line">var promise = new Promise(function(resolve, reject) &#123;</div><div class="line">  try &#123;</div><div class="line">    throw new Error(&apos;test&apos;);</div><div class="line">  &#125; catch(e) &#123;</div><div class="line">    reject(e);</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line">promise.catch(function(error) &#123;</div><div class="line">  console.log(error);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// 写法二,reject方法的作用，等同于抛出错误</div><div class="line">var promise = new Promise(function(resolve, reject) &#123;</div><div class="line">  reject(new Error(&apos;test&apos;));</div><div class="line">&#125;);</div><div class="line">promise.catch(function(error) &#123;</div><div class="line">  console.log(error);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>Promise.all()</p>
<blockquote>
<p>将多个Promise实例包装成一个新的实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//Promise.all方法的参数可以不是数组，但必须具有Iterator接口，且返回的每个成员都是Promise实例。</div><div class="line">var p=Promise.all([p1,p2,p3]);</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Promise.race()</p>
</li>
<li><p>Promise.resolve()</p>
<blockquote>
<p>将现有对象转为Promise对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var jsPromise=Promise.resolve($.ajax(&apos;/whatever.json&apos;))；</div><div class="line">//将jQuery生成的deferred对象，转为一个新的Promise对象</div><div class="line">Promise.resolve(&apos;foo&apos;);</div><div class="line">// 等价于但并不等于(异曲同工)</div><div class="line">new Promise(resolve =&gt; resolve(&apos;foo&apos;))</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Promise.reject()</p>
</li>
<li>两个附加方法：done(),finally()</li>
</ol>
<blockquote>
<p>应用</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">function timeout(duration = 0) &#123;</div><div class="line">    return new Promise((resolve, reject) =&gt; &#123;</div><div class="line">        setTimeout(resolve, duration);</div><div class="line">    &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">var p = timeout(1000).then(() =&gt; &#123;</div><div class="line">    return timeout(2000);</div><div class="line">&#125;).then(() =&gt; &#123;</div><div class="line">    throw new Error(&quot;hmm&quot;);</div><div class="line">&#125;).catch(err =&gt; &#123;</div><div class="line">    return Promise.all([timeout(100), timeout(200)]);</div><div class="line">&#125;)</div><div class="line"></div><div class="line">//promise combination</div><div class="line">function fetchAsync (url, timeout, onData, onError) &#123;</div><div class="line">    …</div><div class="line">&#125;</div><div class="line">let fetchPromised = (url, timeout) =&gt; &#123;</div><div class="line">    return new Promise((resolve, reject) =&gt; &#123;</div><div class="line">        fetchAsync(url, timeout, resolve, reject)</div><div class="line">    &#125;)</div><div class="line">&#125;</div><div class="line">Promise.all([</div><div class="line">    fetchPromised(&quot;http://backend/foo.txt&quot;, 500),</div><div class="line">    fetchPromised(&quot;http://backend/bar.txt&quot;, 500),</div><div class="line">    fetchPromised(&quot;http://backend/baz.txt&quot;, 500)</div><div class="line">]).then((data) =&gt; &#123;</div><div class="line">    let [ foo, bar, baz ] = data</div><div class="line">    console.log(`success: foo=$&#123;foo&#125; bar=$&#123;bar&#125; baz=$&#123;baz&#125;`)</div><div class="line">&#125;, (err) =&gt; &#123;</div><div class="line">    console.log(`error: $&#123;err&#125;`)</div><div class="line">&#125;)</div><div class="line">//ES5</div><div class="line">function fetchAsync (url, timeout, onData, onError) &#123;</div><div class="line">    …</div><div class="line">&#125;</div><div class="line">function fetchAll (request, onData, onError) &#123;</div><div class="line">    var result = [], results = 0;</div><div class="line">    for (var i = 0; i &lt; request.length; i++) &#123;</div><div class="line">        result[i] = null;</div><div class="line">        (function (i) &#123;</div><div class="line">            fetchAsync(request[i].url, request[i].timeout, function (data) &#123;</div><div class="line">                result[i] = data;</div><div class="line">                if (++results === request.length)</div><div class="line">                    onData(result);</div><div class="line">            &#125;, onError);</div><div class="line">        &#125;)(i);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">fetchAll([</div><div class="line">    &#123; url: &quot;http://backend/foo.txt&quot;, timeout: 500 &#125;,</div><div class="line">    &#123; url: &quot;http://backend/bar.txt&quot;, timeout: 500 &#125;,</div><div class="line">    &#123; url: &quot;http://backend/baz.txt&quot;, timeout: 500 &#125;</div><div class="line">], function (data) &#123;</div><div class="line">    var foo = data[0], bar = data[1], baz = data[2];</div><div class="line">    console.log(&quot;success: foo=&quot; + foo + &quot; bar=&quot; + bar + &quot; baz=&quot; + baz);</div><div class="line">&#125;, function (err) &#123;</div><div class="line">    console.log(&quot;error: &quot; + err);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>More info: <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Global_Objects/Promise" target="_blank" rel="external">MDN Promise</a></p>
<h3 id="Iterators-For-Of"><a href="#Iterators-For-Of" class="headerlink" title="Iterators + For..Of"></a>Iterators + For..Of</h3><blockquote>
<p>Iterator objects enable custom iteration like CLR IEnumerable or Java Iterable(Iterator对象启用自定义迭代，像CLR IEnumerable或Java Iterable。).<br>Generalize <code>for..in</code> to custom iterator-based iteration with <code>for..of</code>.  Don’t require realizing an array, enabling lazy design patterns like LINQ.<br>JS中集合主要有Array,Object,Map,Set;需要一种统一的接口机制，来处理所有不同的数据结构</p>
</blockquote>
<p>Iterator应运而生，其作用有</p>
<pre><code>1. 为各种数据结构提供一个统一的简便的访问接口；
2. 使得数据结构的成员能够按某种次序排列；
3. ES6创造了一种新的遍历命令for...of循环，Iterator接口主要供其消费
</code></pre><p>遍历过程：</p>
<pre><code>1. 创建一个指针对象，指向当前数据结构的起始位置；即遍历器对象的本质是指针对象
2. 第n次调用指针对象的next方法，将指针指向nth数据成员；
3. 不断调用指针对象的next方法，直到指向数据结构的结束位置。
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">var it = makeIterator([&apos;a&apos;, &apos;b&apos;]);</div><div class="line">it.next() // &#123; value: &quot;a&quot;, done: false &#125;</div><div class="line">it.next() // &#123; value: &quot;b&quot;, done: false &#125;</div><div class="line">it.next() // &#123; value: undefined, done: true &#125;</div><div class="line">function makeIterator(array) &#123;</div><div class="line">  var nextIndex = 0;</div><div class="line">  return &#123;</div><div class="line">    next: function() &#123;</div><div class="line">      return nextIndex &lt; array.length ?</div><div class="line">        &#123;value: array[nextIndex++], done: false&#125; :</div><div class="line">        &#123;value: undefined, done: true&#125;;</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ol>
<li>数据结构默认Iterator接口<blockquote>
<p>Iterator是为for…of而生的，当使用for…of时，该循环会自动寻找Iterator接口；一种数据结构只要部署了<br>Iterator接口即为可遍历的（iterable），ES6规定，默认的Iterator接口部署在数据结构的Symbol.iterator属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">let fibonacci = &#123;</div><div class="line">  [Symbol.iterator]() &#123;</div><div class="line">    let pre = 0, cur = 1;</div><div class="line">    return &#123;</div><div class="line">      next() &#123;</div><div class="line">        [pre, cur] = [cur, pre + cur];</div><div class="line">        return &#123; done: false, value: cur &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">for (var n of fibonacci) &#123;</div><div class="line">  // truncate the sequence at 1000</div><div class="line">  if (n &gt; 1000)</div><div class="line">    break;</div><div class="line">  console.log(n);</div><div class="line">&#125;</div><div class="line">//ES5</div><div class="line">var fibonacci = &#123;</div><div class="line">    next: (function () &#123;</div><div class="line">        var pre = 0, cur = 1;</div><div class="line">        return function () &#123;</div><div class="line">            tmp = pre;</div><div class="line">            pre = cur;</div><div class="line">            cur += tmp;</div><div class="line">            return cur;</div><div class="line">        &#125;;</div><div class="line">    &#125;)()</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var n;</div><div class="line">for (;;) &#123;</div><div class="line">    n = fibonacci.next();</div><div class="line">    if (n &gt; 1000)</div><div class="line">        break;</div><div class="line">    console.log(n);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<p>Iteration is based on these duck-typed interfaces (using <a href="http://typescriptlang.org" target="_blank" rel="external">TypeScript</a> type syntax for exposition only):<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">TypeScript</div><div class="line">interface IteratorResult &#123;</div><div class="line">  done: boolean;</div><div class="line">  value: any;</div><div class="line">&#125;</div><div class="line">interface Iterator &#123;</div><div class="line">  next(): IteratorResult;</div><div class="line">&#125;</div><div class="line">interface Iterable &#123;</div><div class="line">  [Symbol.iterator](): Iterator</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<ol>
<li>调用Iterator接口的场合</li>
</ol>
<ul>
<li><p>解耦赋值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">let set = new Set().add(&apos;a&apos;).add(&apos;b&apos;).add(&apos;c&apos;);</div><div class="line">let [x,y] = set;</div><div class="line">// x=&apos;a&apos;; y=&apos;b&apos;</div><div class="line">let [first, ...rest] = set;</div><div class="line">// first=&apos;a&apos;; rest=[&apos;b&apos;,&apos;c&apos;];</div></pre></td></tr></table></figure>
</li>
<li><p>扩展运算符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">let arr = [&apos;b&apos;, &apos;c&apos;];</div><div class="line">[&apos;a&apos;, ...arr, &apos;d&apos;]</div><div class="line">// [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;]</div></pre></td></tr></table></figure>
</li>
<li><p>yield*</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">let generator = function* () &#123;</div><div class="line">  yield 1;</div><div class="line">  yield* [2,3,4];</div><div class="line">  yield 5;</div><div class="line">&#125;;</div><div class="line">var iterator = generator();</div><div class="line">iterator.next() // &#123; value: 1, done: false &#125;</div><div class="line">iterator.next() // &#123; value: 2, done: false &#125;</div><div class="line">iterator.next() // &#123; value: 3, done: false &#125;</div><div class="line">iterator.next() // &#123; value: 4, done: false &#125;</div><div class="line">iterator.next() // &#123; value: 5, done: false &#125;</div><div class="line">iterator.next() // &#123; value: undefined, done: true &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>其它</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">for...of</div><div class="line">Array.from()</div><div class="line">Map(), Set(), WeakMap(), WeakSet()（比如new Map([[&apos;a&apos;,1],[&apos;b&apos;,2]])）</div><div class="line">Promise.all()</div><div class="line">Promise.race()</div></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li><p>字符串的Iterator接口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var someString = &quot;hi&quot;;</div><div class="line">typeof someString[Symbol.iterator]</div><div class="line">// &quot;function&quot;</div><div class="line">var iterator = someString[Symbol.iterator]();</div><div class="line">iterator.next()  // &#123; value: &quot;h&quot;, done: false &#125;</div><div class="line">iterator.next()  // &#123; value: &quot;i&quot;, done: false &#125;</div><div class="line">iterator.next()  // &#123; value: undefined, done: true &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Iterator与Generator函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">var myIterable = &#123;&#125;;</div><div class="line"></div><div class="line">myIterable[Symbol.iterator] = function* () &#123;</div><div class="line">  yield 1;</div><div class="line">  yield 2;</div><div class="line">  yield 3;</div><div class="line">&#125;;</div><div class="line">[...myIterable] // [1, 2, 3]</div><div class="line">// 或者采用下面的简洁写法</div><div class="line">let obj = &#123;</div><div class="line">  * [Symbol.iterator]() &#123;</div><div class="line">    yield &apos;hello&apos;;</div><div class="line">    yield &apos;world&apos;;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">for (let x of obj) &#123;</div><div class="line">  console.log(x);</div><div class="line">&#125;</div><div class="line">// hello</div><div class="line">// world</div></pre></td></tr></table></figure>
</li>
<li><p>遍历器对象的return()，throw()</p>
</li>
<li>for…of循环<blockquote>
<p>ES6 借鉴 C++、Java、C# 和 Python 语言，引入了for…of循环，作为遍历所有数据结构的统一的方法。</p>
</blockquote>
</li>
</ol>
<p>与其它遍历语法比较</p>
<ul>
<li><p>for循环</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">for (var index = 0; index &lt; myArray.length; index++) &#123;</div><div class="line">  console.log(myArray[index]);</div><div class="line">&#125;</div><div class="line">//比较繁琐，故数组内置forEach方法</div></pre></td></tr></table></figure>
</li>
<li><p>forEach</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">myArray.forEach(function (value) &#123;</div><div class="line">  console.log(value);</div><div class="line">&#125;);</div><div class="line">//无法跳出forEach循环，break,continue也无能为力</div></pre></td></tr></table></figure>
</li>
<li><p>for…in循环</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">for (var index in myArray) &#123;</div><div class="line">  console.log(myArray[index]);</div><div class="line">&#125;</div><div class="line">//可以遍历数组键名</div></pre></td></tr></table></figure>
</li>
</ul>
<p>缺点如下：</p>
<pre><code>1. 数组的键名是数字，但for...in循环是以字符串作为键名的；
2. 不仅遍历数字键名，而且还遍历手动添加的其它键，乃至原型链上的键；
3. 某些情况下，for...in循环以任意顺序遍历键名
</code></pre><p>总之，for…in循环主要是为遍历对象而设计的，不适用于数组遍历</p>
<ul>
<li><p>for…of循环优点如下，故首选之。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">for (var n of fibonacci) &#123;</div><div class="line">  if (n &gt; 1000)</div><div class="line">    break;</div><div class="line">  console.log(n);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ol>
<li>有着for…in循环的简洁语法，但规避了其缺点；</li>
<li>不同于forEach方法，可以与break，continue，和return配合使用；</li>
<li>提供了遍历所有数据结构的同意操作接口。<br>More info: <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Statements/for...of" target="_blank" rel="external">MDN for…of</a><h3 id="Generators"><a href="#Generators" class="headerlink" title="Generators"></a>Generators</h3></li>
</ol>
</li>
</ul>
<ol>
<li>简介<blockquote>
<p>Generator函数是ES6提供的一种异步编程解决方案，语法行为与传统函数完全不同。语法上，Generator函数是一个状态机，<br>封装了多个内部状态。执行之，会返回一个遍历器对象，即其除了状态机还是一个遍历器生成函数，返回的遍历器对象可依次遍历<br>其内每个状态。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">function* helloWorldGenerator() &#123;</div><div class="line">  yield &apos;hello&apos;;</div><div class="line">  yield &apos;world&apos;;</div><div class="line">  return &apos;ending&apos;;</div><div class="line">&#125;</div><div class="line">var hw = helloWorldGenerator();</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<p>yield语句</p>
<blockquote>
<p>Generator函数返回的遍历器对象，只有调用next方法才会遍历下一个内部状态，<br>故其实提供了一种可以暂停执行的函数，yield语句即暂停标识。</p>
</blockquote>
<p>遍历器next方法运行逻辑如下：</p>
<pre><code>1. 遇到yield，暂停执行其后操作，并将紧跟在yield后的表达式值作为返回对象的value属性值
2. 下一次调用next方法时，继续往下执行，直到遇到下一个yield语句。
3. 如未遇yield语句，就一直运行到函数结束知道return语句为止，并将return语句后的表达式值作为返回对象的value属性值。
4. 如无return语句则返回对象的value属性值为undefined
</code></pre><p>yield与return对比</p>
<blockquote>
<p>同：都能返回紧跟气候的表达式值；异：每次遇到yield函数暂停执行，下次继续从此执行，而return不具位置记忆功能，<br>一个函数里只能执行一次return但可以执行多次yield语句。Generator函数可以返回一系列的值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">function* f() &#123;</div><div class="line">  console.log(&apos;执行了！&apos;)</div><div class="line">&#125;</div><div class="line">var generator = f();</div><div class="line">setTimeout(function () &#123;</div><div class="line">  generator.next()</div><div class="line">&#125;, 2000);</div></pre></td></tr></table></figure></p>
</blockquote>
<p><em>若f是普通函数，为变量generator赋值便执行。但如f为Generator函数，只有调用next方法时才会执行。<br>且yield只能用在Generator函数中</em></p>
<ol>
<li>next方法的参数<blockquote>
<p>yield语句本身无返回值（返回undefined），next方法可以带一个被当作上一个yield语句返回值的参数。</p>
</blockquote>
</li>
<li><p>for…of</p>
<blockquote>
<p>for…of循环可以自动遍历Generator函数时生成的Iterator对象且无需next方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">function* foo()&#123;</div><div class="line">    yield 1;</div><div class="line">    yield 2;</div><div class="line">    yield 3;</div><div class="line">    yield 4;</div><div class="line">    return 5</div><div class="line">&#125;</div><div class="line">for(let v of foo())&#123;console.log(v)&#125; //1 2 3 4 </div><div class="line">//一旦next方法返回对象的done为true，for...of终止且不含该返回对象</div><div class="line">//原生的JavaScript对象没有遍历接口，无法使用for...of循环，Generator函数为其加上接口完成遍历</div><div class="line">function* fibonacci() &#123;</div><div class="line">  let [prev, curr] = [0, 1];</div><div class="line">  for (;;) &#123;</div><div class="line">    [prev, curr] = [curr, prev + curr];</div><div class="line">    yield curr;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">for (let n of fibonacci()) &#123;</div><div class="line">  if (n &gt; 1000) break;</div><div class="line">  console.log(n);</div><div class="line">&#125;</div><div class="line">/*除了for...of循环以外，扩展运算符（...）、解构赋值和Array.from方法内部调用的，都是遍历器接口。这意味着，</div><div class="line">它们都可以将Generator函数返回的Iterator对象，作为参数。*/</div><div class="line">function* numbers () &#123;</div><div class="line">  yield 1</div><div class="line">  yield 2</div><div class="line">  return 3</div><div class="line">  yield 4</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 扩展运算符</div><div class="line">[...numbers()] // [1, 2]</div><div class="line"></div><div class="line">// Array.from 方法</div><div class="line">Array.from(numbers()) // [1, 2]</div><div class="line"></div><div class="line">// 解构赋值</div><div class="line">let [x, y] = numbers();</div><div class="line">x // 1</div><div class="line">y // 2</div><div class="line"></div><div class="line">// for...of 循环</div><div class="line">for (let n of numbers()) &#123;</div><div class="line">  console.log(n)</div><div class="line">&#125;</div><div class="line">// 1</div><div class="line">// 2</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Generator.prototype.throw()</p>
</li>
<li>Generator.prototype.return()</li>
<li>yield*语句</li>
<li><p>作为属性的Generator函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">let obj = &#123;</div><div class="line">  myGeneratorMethod: function* () &#123;</div><div class="line">    // ···</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p>Generator函数的this</p>
<blockquote>
<p>Generator函数总是返回一个其实例且继承了其prototype对象上方法的遍历器，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">function* g() &#123;&#125;</div><div class="line">g.prototype.hello = function () &#123;</div><div class="line">  return &apos;hi!&apos;;</div><div class="line">&#125;;</div><div class="line">let obj = g();</div><div class="line">obj instanceof g // true</div><div class="line">obj.hello() // &apos;hi!&apos;</div><div class="line">//如果把g当作普通的构造函数，并不会生效，因为g返回的总是遍历器对象，而不是this对象。</div><div class="line">function* g() &#123;</div><div class="line">  this.a = 11;</div><div class="line">&#125;</div><div class="line">let obj = g();</div><div class="line">obj.a // undefined</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Generator与状态机，前者是后者的最佳结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">var ticking = true;</div><div class="line">var clock = function() &#123;</div><div class="line">  if (ticking)</div><div class="line">    console.log(&apos;Tick!&apos;);</div><div class="line">  else</div><div class="line">    console.log(&apos;Tock!&apos;);</div><div class="line">  ticking = !ticking;</div><div class="line">&#125;</div><div class="line">//</div><div class="line">var clock = function*() &#123;</div><div class="line">  while (true) &#123;</div><div class="line">    console.log(&apos;Tick!&apos;);</div><div class="line">    yield;</div><div class="line">    console.log(&apos;Tock!&apos;);</div><div class="line">    yield;</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>Generator与协程(coroutine)<blockquote>
<p>协程：协作的线程或函数</p>
</blockquote>
</li>
</ul>
<ol>
<li>应用</li>
</ol>
<ul>
<li><p>异步操作的同步化表达</p>
<figure class="highlight plain"><figcaption><span>loadUI() &#123;</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">  showLoadingScreen();</div><div class="line">  yield loadUIDataAsynchronously();</div><div class="line">  hideLoadingScreen();</div><div class="line">&#125;</div><div class="line">var loader = loadUI();</div><div class="line">// 加载UI</div><div class="line">loader.next()</div><div class="line"></div><div class="line">// 卸载UI</div><div class="line">loader.next()</div></pre></td></tr></table></figure>
</li>
<li><p>控制流管理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">Promise.resolve(step1)</div><div class="line">  .then(step2)</div><div class="line">  .then(step3)</div><div class="line">  .then(step4)</div><div class="line">  .then(function (value4) &#123;</div><div class="line">    // Do something with value4</div><div class="line">  &#125;, function (error) &#123;</div><div class="line">    // Handle any error from step1 through step4</div><div class="line">  &#125;)</div><div class="line">  .done();</div><div class="line">  //Generator更优雅</div><div class="line">function* longRunningTask(value1) &#123;</div><div class="line">  try &#123;</div><div class="line">    var value2 = yield step1(value1);</div><div class="line">    var value3 = yield step2(value2);</div><div class="line">    var value4 = yield step3(value3);</div><div class="line">    var value5 = yield step4(value4);</div><div class="line">    // Do something with value4</div><div class="line">  &#125; catch (e) &#123;</div><div class="line">    // Handle any error from step1 through step4</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li><p>部署Iterator接口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">function* iterEntries(obj) &#123;</div><div class="line">  let keys = Object.keys(obj);</div><div class="line">  for (let i=0; i &lt; keys.length; i++) &#123;</div><div class="line">    let key = keys[i];</div><div class="line">    yield [key, obj[key]];</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">let myObj = &#123; foo: 3, bar: 7 &#125;;</div><div class="line"></div><div class="line">for (let [key, value] of iterEntries(myObj)) &#123;</div><div class="line">  console.log(key, value);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// foo 3</div><div class="line">// bar 7</div></pre></td></tr></table></figure>
</li>
<li><p>作为数据结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">function *doStuff() &#123;</div><div class="line">  yield fs.readFile.bind(null, &apos;hello.txt&apos;);</div><div class="line">  yield fs.readFile.bind(null, &apos;world.txt&apos;);</div><div class="line">  yield fs.readFile.bind(null, &apos;and-such.txt&apos;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight plain"><figcaption><span>function,iterator protocol</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">let fibonacci = &#123;</div><div class="line">    *[Symbol.iterator]() &#123;</div><div class="line">        let pre = 0, cur = 1</div><div class="line">        for (;;) &#123;</div><div class="line">            [ pre, cur ] = [ cur, pre + cur ]</div><div class="line">            yield cur</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">for (let n of fibonacci) &#123;</div><div class="line">    if (n &gt; 1000)</div><div class="line">        break</div><div class="line">    console.log(n)</div><div class="line">&#125;</div><div class="line">//ES5</div><div class="line">var fibonacci = &#123;</div><div class="line">      next: (function () &#123;</div><div class="line">          var pre = 0, cur = 1;</div><div class="line">          return function () &#123;</div><div class="line">              tmp = pre;</div><div class="line">              pre = cur;</div><div class="line">              cur += tmp;</div><div class="line">              return cur;</div><div class="line">          &#125;;</div><div class="line">      &#125;)()</div><div class="line">  &#125;;</div><div class="line">  var n;</div><div class="line">  for (;;) &#123;</div><div class="line">      n = fibonacci.next();</div><div class="line">      if (n &gt; 1000)</div><div class="line">          break;</div><div class="line">      console.log(n);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">//direct use</div><div class="line">function* range (start, end, step) &#123;</div><div class="line">    while (start &lt; end) &#123;</div><div class="line">        yield start</div><div class="line">        start += step</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">for (let i of range(0, 10, 2)) &#123;</div><div class="line">    console.log(i) // 0, 2, 4, 6, 8</div><div class="line">&#125;</div><div class="line">//ES5</div><div class="line">function range (start, end, step) &#123;</div><div class="line">    var list = [];</div><div class="line">    while (start &lt; end) &#123;</div><div class="line">        list.push(start);</div><div class="line">        start += step;</div><div class="line">    &#125;</div><div class="line">    return list;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var r = range(0, 10, 2);</div><div class="line">for (var i = 0; i &lt; r.length; i++) &#123;</div><div class="line">    console.log(r[i]); // 0, 2, 4, 6, 8</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><figcaption><span>matching</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">let fibonacci = function* (numbers) &#123;</div><div class="line">    let pre = 0, cur = 1</div><div class="line">    while (numbers-- &gt; 0) &#123;</div><div class="line">        [ pre, cur ] = [ cur, pre + cur ]</div><div class="line">        yield cur</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">for (let n of fibonacci(1000))</div><div class="line">    console.log(n)</div><div class="line"></div><div class="line">let numbers = [ ...fibonacci(1000) ]</div><div class="line"></div><div class="line">let [ n1, n2, n3, ...others ] = fibonacci(1000)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><figcaption><span>control-flow</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">function async (proc, ...params) &#123;</div><div class="line">    var iterator = proc(...params)</div><div class="line">    return new Promise((resolve, reject) =&gt; &#123;</div><div class="line">        let loop = (value) =&gt; &#123;</div><div class="line">            let result</div><div class="line">            try &#123;</div><div class="line">                result = iterator.next(value)</div><div class="line">            &#125;</div><div class="line">            catch (err) &#123;</div><div class="line">                reject(err)</div><div class="line">            &#125;</div><div class="line">            if (result.done)</div><div class="line">                resolve(result.value)</div><div class="line">            else if (   typeof result.value      === &quot;object&quot;</div><div class="line">                     &amp;&amp; typeof result.value.then === &quot;function&quot;)</div><div class="line">                result.value.then((value) =&gt; &#123;</div><div class="line">                    loop(value)</div><div class="line">                &#125;, (err) =&gt; &#123;</div><div class="line">                    reject(err)</div><div class="line">                &#125;)</div><div class="line">            else</div><div class="line">                loop(result.value)</div><div class="line">        &#125;</div><div class="line">        loop()</div><div class="line">    &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">//  application-specific asynchronous builder</div><div class="line">function makeAsync (text, after) &#123;</div><div class="line">    return new Promise((resolve, reject) =&gt; &#123;</div><div class="line">        setTimeout(() =&gt; resolve(text), after)</div><div class="line">    &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">//  application-specific asynchronous procedure</div><div class="line">async(function* (greeting) &#123;</div><div class="line">    let foo = yield makeAsync(&quot;foo&quot;, 300)</div><div class="line">    let bar = yield makeAsync(&quot;bar&quot;, 200)</div><div class="line">    let baz = yield makeAsync(&quot;baz&quot;, 100)</div><div class="line">    return `$&#123;greeting&#125; $&#123;foo&#125; $&#123;bar&#125; $&#123;baz&#125;`</div><div class="line">&#125;, &quot;Hello&quot;).then((msg) =&gt; &#123;</div><div class="line">    console.log(&quot;RESULT:&quot;, msg) // &quot;Hello foo bar baz&quot;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><figcaption><span>methods</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">class Clz &#123;</div><div class="line">    * bar () &#123;</div><div class="line">        …</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">let Obj = &#123;</div><div class="line">    * foo () &#123;</div><div class="line">        …</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The generator interface is (using <a href="http://typescriptlang.org" target="_blank" rel="external">TypeScript</a> type syntax for exposition only):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//TypeScript</div><div class="line">interface Generator extends Iterator &#123;</div><div class="line">    next(value?: any): IteratorResult;</div><div class="line">    throw(exception: any);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>More info: <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Iteration_protocols" target="_blank" rel="external">MDN Iteration protocols</a></p>
<h3 id="Generator函数的异步应用"><a href="#Generator函数的异步应用" class="headerlink" title="Generator函数的异步应用"></a>Generator函数的异步应用</h3><blockquote>
<p>由于JS的执行环境是单线程的，没有异步编程根本没法用。</p>
<ol>
<li>传统方法有以下四种</li>
</ol>
</blockquote>
<pre><code>1. 回调函数
2. 事件监听
3. 发布/订阅
4. Promise 对象
</code></pre><ol>
<li>基本概念</li>
</ol>
<ul>
<li>异步：一个任务不是连续完成的，先执行第一段然后执行其它任务，等做好了准备再回头执行第二段。<blockquote>
<p>比如读取文件并处理，第一段是向操作系统发出请求，要求读取文件；然后执行其他任务，等到操作系统<br>返回文件，再接着执行任务第二阶段（处理文件）。不连续的执行即异步，连续即同步。</p>
</blockquote>
</li>
<li>回掉函数：JS对异步编程的实现就是通过回调函数(把任务的第二阶段单独写在一个函数里，等到重新执行该任务<br>时就直接调用这个函数callback)。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">fs.readFile(&apos;/etc/passwd&apos;, &apos;utf-8&apos;, function (err, data) &#123;</div><div class="line">  if (err) throw err;</div><div class="line">  console.log(data);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
<p><em>Node 错误优先原则：执行分两个阶段，首个执行完之后任务所在的EC已经结束，在此抛出错误原来的EC已无法捕捉，<br>只能当作参数，传入第二段？？？。直观理解就是如果读取文件就出错了那还谈何打印文件，故错误优先</em></p>
<ul>
<li>Promise<blockquote>
<p>回调函数本身无问题，问题在于多层嵌套。而Promise对象应运而生，它并非新的语法功能而是一种新的写法，将嵌套改成链式调用。<br>除此之外并无新意。且其最大的问题是代码冗余，一堆then原来的语义变得不清楚。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">var readFile = require(&apos;fs-readfile-promise&apos;);</div><div class="line">readFile(fileA)</div><div class="line">.then(function (data) &#123;</div><div class="line">  console.log(data.toString());</div><div class="line">&#125;)</div><div class="line">.then(function () &#123;</div><div class="line">  return readFile(fileB);</div><div class="line">&#125;)</div><div class="line">.then(function (data) &#123;</div><div class="line">  console.log(data.toString());</div><div class="line">&#125;)</div><div class="line">.catch(function (err) &#123;</div><div class="line">  console.log(err);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<ol>
<li>Generator函数<blockquote>
<p>传统编程语言早有异步(多任务)的解决方案，其一叫协程(coroutine)，有点像函数又像线程。<br>协程A=》A暂停，协程B=》B交还执行权于A，yield命令是两个阶段的分界线。</p>
</blockquote>
</li>
</ol>
<ul>
<li><p>Generator函数可以暂停执行和恢复执行，这是它封装异步任务的根本原因。除此之外还有两个特性，<br>使它可以作为异步编程的完整解决方案：函数体内外的数据交换和错误处理机制。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">function* gen(x)&#123;</div><div class="line">  var y = yield x + 2;</div><div class="line">  return y;</div><div class="line">&#125;</div><div class="line">var g = gen(1);</div><div class="line">g.next() // &#123; value: 3, done: false &#125;</div><div class="line">g.next(2) // &#123; value: 2, done: true &#125;</div><div class="line">g.throw(&apos;出错了&apos;);</div><div class="line">// 出错了</div></pre></td></tr></table></figure>
</li>
<li><p>异步任务的封装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">var fetch = require(&apos;node-fetch&apos;);</div><div class="line">function* gen()&#123;</div><div class="line">  var url = &apos;https://api.github.com/users/github&apos;;</div><div class="line">  var result = yield fetch(url);</div><div class="line">  console.log(result.bio);</div><div class="line">&#125;</div><div class="line">//执行这段代码的方法如下。</div><div class="line">var g = gen();</div><div class="line">var result = g.next();</div><div class="line">result.value.then(function(data)&#123;</div><div class="line">  return data.json();</div><div class="line">&#125;).then(function(data)&#123;</div><div class="line">  g.next(data);</div><div class="line">&#125;);</div><div class="line">/*可以看到，虽然 Generator 函数将异步操作表示得很简洁，</div><div class="line">但是流程管理却不方便（即何时执行第一阶段、何时执行第二阶段）。*/</div></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li>Thunk函数：自动执行 Generator 函数的一种方法，”传值调用”（call by value）/“传名调用”（call by name）</li>
</ol>
<h3 id="async-函数"><a href="#async-函数" class="headerlink" title="async 函数"></a>async 函数</h3><blockquote>
<p>ES7标准引入async函数使异步操作更加方便，本质是Generator函数的语法糖。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//Generator函数</div><div class="line">var fs = require(&apos;fs&apos;);</div><div class="line">var readFile = function (fileName) &#123;</div><div class="line">  return new Promise(function (resolve, reject) &#123;</div><div class="line">    fs.readFile(fileName, function(error, data) &#123;</div><div class="line">      if (error) reject(error);</div><div class="line">      resolve(data);</div><div class="line">    &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;;</div><div class="line">var gen = function* () &#123;</div><div class="line">  var f1 = yield readFile(&apos;/etc/fstab&apos;);</div><div class="line">  var f2 = yield readFile(&apos;/etc/shells&apos;);</div><div class="line">  console.log(f1.toString());</div><div class="line">  console.log(f2.toString());</div><div class="line">&#125;;</div><div class="line">//async 函数</div><div class="line">var asyncReadFile = async function () &#123;</div><div class="line">  var f1 = await readFile(&apos;/etc/fstab&apos;);</div><div class="line">  var f2 = await readFile(&apos;/etc/shells&apos;);</div><div class="line">  console.log(f1.toString());</div><div class="line">  console.log(f2.toString());</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
</blockquote>
<p><em>async其实就是将Generator函数的※替换成了async，将yield换成了await</em><br>改进如下：</p>
<ul>
<li>内置执行器<figure class="highlight plain"><figcaption><span>result = asyncReadFile();```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">- 更好的语义</div><div class="line">async和await，比起星号和yield，语义更清楚了。async表示函数里有异步操作，await表示紧跟在后面的表达式需要等待结果。</div><div class="line">- 更广的适用性</div><div class="line">co模块约定，yield命令后面只能是 Thunk 函数或 Promise 对象，而async函数的await命令后面，可以是Promise 对象和原始类型的值</div><div class="line">（数值、字符串和布尔值，但这时等同于同步操作）。</div><div class="line">- 返回值是Promise</div><div class="line">async函数的返回值是 Promise 对象，这比 Generator 函数的返回值是 Iterator 对象方便多了。</div><div class="line">2. 用法</div><div class="line">&gt;async函数返回一个 Promise 对象，可以使用then方法添加回调函数。当函数执行的时候，一旦遇到await就会先返回，</div><div class="line">等到异步操作完成，再接着执行函数体内后面的语句。</div></pre></td></tr></table></figure>
</li>
</ul>
<p>function timeout(ms) {<br>  return new Promise((resolve) =&gt; {<br>    setTimeout(resolve, ms);<br>  });<br>}<br>async function asyncPrint(value, ms) {<br>  await timeout(ms);<br>  console.log(value)<br>}<br>asyncPrint(‘hello world’, 50);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">3. 语法</div><div class="line">- 返回Promise对象</div></pre></td></tr></table></figure></p>
<p>async function f() {<br>  return ‘hello world’;<br>}<br>f().then(v =&gt; console.log(v))<br>// “hello world”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- 错误处理</div></pre></td></tr></table></figure></p>
<p>async function f() {<br>  await new Promise(function (resolve, reject) {<br>    throw new Error(‘出错了’);<br>  });<br>}<br>f()<br>.then(v =&gt; console.log(v))<br>.catch(e =&gt; console.log(e))<br>// Error：出错了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">4. async函数的实现原理：将 Generator 函数和自动执行器，包装在一个函数里。</div><div class="line">###  Classes</div><div class="line">&gt;ES6 classes are a simple sugar over the prototype-based OO pattern(ES6类是基于原型的（Object-Oriented）模式的简单糖).  </div><div class="line">Having a single convenient declarative form makes class patterns easier to use, </div><div class="line">and encourages interoperability(互通性).  Classes support prototype-based inheritance, super </div><div class="line">calls,instance and static methods and constructors(支持基于原型的继承，super calls，instance实例及静态方法和构造器).</div></pre></td></tr></table></figure></p>
<p>//class definition<br>class Shape {<br>    constructor (id, x, y) {<br>        this.id = id<br>        this.move(x, y)<br>    }<br>    move (x, y) {<br>        this.x = x<br>        this.y = y<br>    }<br>}<br>//ES5<br>var Shape = function (id, x, y) {<br>    this.id = id;<br>    this.move(x, y);<br>};<br>Shape.prototype.move = function (x, y) {<br>    this.x = x;<br>    this.y = y;<br>};<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">```</div><div class="line">//class inheritance</div><div class="line">class Rectangle extends Shape &#123;</div><div class="line">    constructor (id, x, y, width, height) &#123;</div><div class="line">        super(id, x, y)</div><div class="line">        this.width  = width</div><div class="line">        this.height = height</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">class Circle extends Shape &#123;</div><div class="line">    constructor (id, x, y, radius) &#123;</div><div class="line">        super(id, x, y)</div><div class="line">        this.radius = radius</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">//ES5</div><div class="line">var Rectangle = function (id, x, y, width, height) &#123;</div><div class="line">    Shape.call(this, id, x, y);</div><div class="line">    this.width  = width;</div><div class="line">    this.height = height;</div><div class="line">&#125;;</div><div class="line">Rectangle.prototype = Object.create(Shape.prototype);</div><div class="line">Rectangle.prototype.constructor = Rectangle;</div><div class="line">var Circle = function (id, x, y, radius) &#123;</div><div class="line">    Shape.call(this, id, x, y);</div><div class="line">    this.radius = radius;</div><div class="line">&#125;;</div><div class="line">Circle.prototype = Object.create(Shape.prototype);</div><div class="line">Circle.prototype.constructor = Circle;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><figcaption><span>inheritance from expressions</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div></pre></td><td class="code"><pre><div class="line">var aggregation = (baseClass, ...mixins) =&gt; &#123;</div><div class="line">    let base = class _Combined extends baseClass &#123;</div><div class="line">        constructor (...args) &#123;</div><div class="line">            super(...args)</div><div class="line">            mixins.forEach((mixin) =&gt; &#123;</div><div class="line">                mixin.prototype.initializer.call(this)</div><div class="line">            &#125;)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    let copyProps = (target, source) =&gt; &#123;</div><div class="line">        Object.getOwnPropertyNames(source)</div><div class="line">            .concat(Object.getOwnPropertySymbols(source))</div><div class="line">            .forEach((prop) =&gt; &#123;</div><div class="line">            if (prop.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/))</div><div class="line">                return</div><div class="line">            Object.defineProperty(target, prop, Object.getOwnPropertyDescriptor(source, prop))</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">    mixins.forEach((mixin) =&gt; &#123;</div><div class="line">        copyProps(base.prototype, mixin.prototype)</div><div class="line">        copyProps(base, mixin)</div><div class="line">    &#125;)</div><div class="line">    return base</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Colored &#123;</div><div class="line">    initializer ()     &#123; this._color = &quot;white&quot; &#125;</div><div class="line">    get color ()       &#123; return this._color &#125;</div><div class="line">    set color (v)      &#123; this._color = v &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class ZCoord &#123;</div><div class="line">    initializer ()     &#123; this._z = 0 &#125;</div><div class="line">    get z ()           &#123; return this._z &#125;</div><div class="line">    set z (v)          &#123; this._z = v &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Shape &#123;</div><div class="line">    constructor (x, y) &#123; this._x = x; this._y = y &#125;</div><div class="line">    get x ()           &#123; return this._x &#125;</div><div class="line">    set x (v)          &#123; this._x = v &#125;</div><div class="line">    get y ()           &#123; return this._y &#125;</div><div class="line">    set y (v)          &#123; this._y = v &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Rectangle extends aggregation(Shape, Colored, ZCoord) &#123;&#125;</div><div class="line">var rect = new Rectangle(7, 42)</div><div class="line">rect.z     = 1000</div><div class="line">rect.color = &quot;red&quot;</div><div class="line">console.log(rect.x, rect.y, rect.z, rect.color)</div><div class="line">//ES5</div><div class="line">var aggregation = function (baseClass, mixins) &#123;</div><div class="line">    var base = function () &#123;</div><div class="line">        baseClass.apply(this, arguments);</div><div class="line">        mixins.forEach(function (mixin) &#123;</div><div class="line">            mixin.prototype.initializer.call(this);</div><div class="line">        &#125;.bind(this));</div><div class="line">    &#125;;</div><div class="line">    base.prototype = Object.create(baseClass.prototype);</div><div class="line">    base.prototype.constructor = base;</div><div class="line">    var copyProps = function (target, source) &#123;</div><div class="line">        Object.getOwnPropertyNames(source).forEach(function (prop) &#123;</div><div class="line">            if (prop.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/))</div><div class="line">                return</div><div class="line">            Object.defineProperty(target, prop, Object.getOwnPropertyDescriptor(source, prop))</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">    mixins.forEach(function (mixin) &#123;</div><div class="line">        copyProps(base.prototype, mixin.prototype);</div><div class="line">        copyProps(base, mixin);</div><div class="line">    &#125;);</div><div class="line">    return base;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var Colored = function () &#123;&#125;;</div><div class="line">Colored.prototype = &#123;</div><div class="line">    initializer: function ()  &#123; this._color = &quot;white&quot;; &#125;,</div><div class="line">    getColor:    function ()  &#123; return this._color; &#125;,</div><div class="line">    setColor:    function (v) &#123; this._color = v; &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var ZCoord = function () &#123;&#125;;</div><div class="line">ZCoord.prototype = &#123;</div><div class="line">    initializer: function ()  &#123; this._z = 0; &#125;,</div><div class="line">    getZ:        function ()  &#123; return this._z; &#125;,</div><div class="line">    setZ:        function (v) &#123; this._z = v; &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var Shape = function (x, y) &#123;</div><div class="line">    this._x = x; this._y = y;</div><div class="line">&#125;;</div><div class="line">Shape.prototype = &#123;</div><div class="line">    getX: function ()  &#123; return this._x; &#125;,</div><div class="line">    setX: function (v) &#123; this._x = v; &#125;,</div><div class="line">    getY: function ()  &#123; return this._y; &#125;,</div><div class="line">    setY: function (v) &#123; this._y = v; &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var _Combined = aggregation(Shape, [ Colored, ZCoord ]);</div><div class="line">var Rectangle = function (x, y) &#123;</div><div class="line">    _Combined.call(this, x, y);</div><div class="line">&#125;;</div><div class="line">Rectangle.prototype = Object.create(_Combined.prototype);</div><div class="line">Rectangle.prototype.constructor = Rectangle;</div><div class="line"></div><div class="line">var rect = new Rectangle(7, 42);</div><div class="line">rect.setZ(1000);</div><div class="line">rect.setColor(&quot;red&quot;);</div><div class="line">console.log(rect.getX(), rect.getY(),rect.getZ(), rect.getColor());</div></pre></td></tr></table></figure>
<figure class="highlight plain"><figcaption><span>members</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">class Rectangle extends Shape &#123;</div><div class="line">    …</div><div class="line">    static defaultRectangle () &#123;</div><div class="line">        return new Rectangle(&quot;default&quot;, 0, 0, 100, 100)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">class Circle extends Shape &#123;</div><div class="line">    …</div><div class="line">    static defaultCircle () &#123;</div><div class="line">        return new Circle(&quot;default&quot;, 0, 0, 100)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">var defRectangle = Rectangle.defaultRectangle()</div><div class="line">var defCircle    = Circle.defaultCircle()</div><div class="line">//ES5</div><div class="line">var Rectangle = function (id, x, y, width, height) &#123;</div><div class="line">    …</div><div class="line">&#125;;</div><div class="line">Rectangle.defaultRectangle = function () &#123;</div><div class="line">    return new Rectangle(&quot;default&quot;, 0, 0, 100, 100);</div><div class="line">&#125;;</div><div class="line">var Circle = function (id, x, y, width, height) &#123;</div><div class="line">    …</div><div class="line">&#125;;</div><div class="line">Circle.defaultCircle = function () &#123;</div><div class="line">    return new Circle(&quot;default&quot;, 0, 0, 100);</div><div class="line">&#125;;</div><div class="line">var defRectangle = Rectangle.defaultRectangle();</div><div class="line">var defCircle    = Circle.defaultCircle();</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">class Rectangle &#123;</div><div class="line">    constructor (width, height) &#123;</div><div class="line">        this._width  = width</div><div class="line">        this._height = height</div><div class="line">    &#125;</div><div class="line">    set width  (width)  &#123; this._width = width               &#125;</div><div class="line">    get width  ()       &#123; return this._width                &#125;</div><div class="line">    set height (height) &#123; this._height = height             &#125;</div><div class="line">    get height ()       &#123; return this._height               &#125;</div><div class="line">    get area   ()       &#123; return this._width * this._height &#125;</div><div class="line">&#125;</div><div class="line">var r = new Rectangle(50, 20)</div><div class="line">r.area === 1000</div><div class="line">//ES5</div><div class="line">var Rectangle = function (width, height) &#123;</div><div class="line">    this._width  = width;</div><div class="line">    this._height = height;</div><div class="line">&#125;;</div><div class="line">Rectangle.prototype = &#123;</div><div class="line">    set width  (width)  &#123; this._width = width;               &#125;,</div><div class="line">    get width  ()       &#123; return this._width;                &#125;,</div><div class="line">    set height (height) &#123; this._height = height;             &#125;,</div><div class="line">    get height ()       &#123; return this._height;               &#125;,</div><div class="line">    get area   ()       &#123; return this._width * this._height; &#125;</div><div class="line">&#125;;</div><div class="line">var r = new Rectangle(50, 20);</div><div class="line">r.area === 1000;</div></pre></td></tr></table></figure>
<ul>
<li><p>constructor方法</p>
<blockquote>
<p>类的默认方法，通过new关键字生成对象实例时自动调用。一个类必须有constructor方法，如未定义默认添加。<br>默认返回实例对象(this)，完全可以指定另外一个对象。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">class Foo &#123;</div><div class="line">  constructor() &#123;</div><div class="line">    return Object.create(null);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">new Foo() instanceof Foo</div><div class="line">// false,类的构造函数不使用new是无法调用的，这点与普通构造函数的主要区别</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>类的实例对象</p>
<blockquote>
<p>与ES5一样，实例的属性除非显式定义在其本身（即定义在this对象上），否则都是定义在原型上（即定义在class上）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">//定义类</div><div class="line">class Point &#123;</div><div class="line"></div><div class="line">  constructor(x, y) &#123;</div><div class="line">    this.x = x;</div><div class="line">    this.y = y;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  toString() &#123;</div><div class="line">    return &apos;(&apos; + this.x + &apos;, &apos; + this.y + &apos;)&apos;;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">var point = new Point(2, 3);</div><div class="line">point.toString() // (2, 3)</div><div class="line">point.hasOwnProperty(&apos;x&apos;) // true</div><div class="line">point.hasOwnProperty(&apos;y&apos;) // true</div><div class="line">point.hasOwnProperty(&apos;toString&apos;) // false</div><div class="line">point.__proto__.hasOwnProperty(&apos;toString&apos;) // true</div><div class="line">//类的所有实例共享同一个原型对象，同ES5一样</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>不存在变量提升</p>
</li>
<li><p>Class表达式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">const MyClass = class Me &#123;</div><div class="line">  getClassName() &#123;</div><div class="line">    return Me.name;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">//类名为MyClass而非Me,Me只在Class内部代码可用，指代当前类，如果内部没用到可以省略</div><div class="line">//使用class关键字可以写出立即执行的Class</div><div class="line">let person = new class &#123;</div><div class="line">  constructor(name) &#123;</div><div class="line">    this.name = name;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  sayName() &#123;</div><div class="line">    console.log(this.name);</div><div class="line">  &#125;</div><div class="line">&#125;(&apos;张三&apos;);</div><div class="line"></div><div class="line">person.sayName(); // &quot;张三&quot;</div></pre></td></tr></table></figure>
</li>
<li><p>私有方法</p>
<blockquote>
<p>私有方法是常见需求，但 ES6 不提供，只能通过变通方法模拟实现。</p>
</blockquote>
</li>
<li>this指向<blockquote>
<p>类的方法内部如含有this，默认指向类的实例。但必须小心，一旦单独使用可能报错。<br>类和模块内部默认全是严格模式，name属性总是返回紧跟在class关键字后边的类名。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">class Logger &#123;</div><div class="line">  printName(name = &apos;there&apos;) &#123;</div><div class="line">    this.print(`Hello $&#123;name&#125;`);</div><div class="line">  &#125;</div><div class="line">  print(text) &#123;</div><div class="line">    console.log(text);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">const logger = new Logger();</div><div class="line">const &#123; printName &#125; = logger;</div><div class="line">printName(); // TypeError: Cannot read property &apos;print&apos; of undefine</div><div class="line">/*printName默认指向Logger实例。若将该方法提出使用，this会指向该方法运行时环境*/</div><div class="line">class Logger &#123;</div><div class="line">//构造方法中绑定this</div><div class="line">  constructor() &#123;</div><div class="line">    this.printName = this.printName.bind(this);</div><div class="line">  &#125;</div><div class="line">//箭头函数</div><div class="line">constructor() &#123;</div><div class="line">    this.printName = (name = &apos;there&apos;) =&gt; &#123;</div><div class="line">      this.print(`Hello $&#123;name&#125;`);</div><div class="line">    &#125;;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">//使用Proxy，获取方法的时候，自动绑定this</div><div class="line">function selfish (target) &#123;</div><div class="line">  const cache = new WeakMap();</div><div class="line">  const handler = &#123;</div><div class="line">    get (target, key) &#123;</div><div class="line">      const value = Reflect.get(target, key);</div><div class="line">      if (typeof value !== &apos;function&apos;) &#123;</div><div class="line">        return value;</div><div class="line">      &#125;</div><div class="line">      if (!cache.has(value)) &#123;</div><div class="line">        cache.set(value, value.bind(target));</div><div class="line">      &#125;</div><div class="line">      return cache.get(value);</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line">  const proxy = new Proxy(target, handler);</div><div class="line">  return proxy;</div><div class="line">&#125;</div><div class="line">const logger = selfish(new Logger());</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<ol>
<li>class继承<blockquote>
<p>Class之间可以通过extends关键字实现继承，这比ES5的通过修改原型链实现继承，要清晰和方便很多。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">class ColorPoint extends Point&#123;</div><div class="line"> constructor(x, y, color) &#123;</div><div class="line">    super(x, y); // 调用父类的constructor(x, y)</div><div class="line">    this.color = color;</div><div class="line">  &#125;</div><div class="line">  toString() &#123;</div><div class="line">    return this.color + &apos; &apos; + super.toString(); // 调用父类的toString()</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<p>上述实例中constructor和toString方法都出现了super，表示父类的构造函数，用来新建父类this对象。<br>子类必须在constructor方法中调用super方法，否则新建实例报错。只因子类无自身this对象，只有继承父类的然后<br>加工。如不调用super方法子类就得不到this对象。</p>
<blockquote>
<p>ES5的继承实例先造子类实例对象this，然后将父类的方法添加到this上。ES6则完全不同，先造父类实例对象this，然后<br>再用子类构造函数修改this。</p>
</blockquote>
<p>类的prototype属性和<strong>proto</strong>属性</p>
<blockquote>
<p>多数浏览器ES5实现之中，每个对象都有一个指向构造函数的<strong>proto</strong>属性。Class作为构造函数的语法糖，同时拥有prototype和<br><strong>proto</strong>属性，故同时存在两条继承链。作为一个对象，子类B的原型（<strong>proto</strong>属性）是父类；作为构造函数，子类B的原型(prototype<br>属性)是父类的实例。</p>
<ul>
<li>子类的<strong>proto</strong>属性，表示构造函数的继承，总是指向父类；</li>
<li>子类prototype属性的<strong>proto</strong>属性，表示方法的继承，指向父类的prototype属性。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">class A &#123;</div><div class="line">&#125;</div><div class="line">class B extends A &#123;</div><div class="line">&#125;</div><div class="line">B.__proto__ === A // true</div><div class="line">B.prototype.__proto__ === A.prototype // true</div><div class="line">//原理</div><div class="line">// B的实例继承A的实例</div><div class="line">Object.setPrototypeOf(B.prototype, A.prototype);</div><div class="line">const b = new B();</div><div class="line">// B的实例继承A的静态属性</div><div class="line">Object.setPrototypeOf(B, A);</div><div class="line"></div><div class="line">Object.setPropertypeOf=function (obj,proto)&#123;</div><div class="line">    obj.__proto__=proto;</div><div class="line">    return obj;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<ul>
<li><p>Extends 的继承目标<br>extends关键字后边可以继承多种类型的值，只要被继承者有prototype属性</p>
<ol>
<li><p>子类继承Object类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">class A extends Object&#123;&#125;</div><div class="line">A.__proto__===Objecdt;//true</div><div class="line">A.prototype.__proto__=Object.prototype;//true</div><div class="line">//A即构造函数Object的复制，A的实例即Object的实例</div></pre></td></tr></table></figure>
</li>
<li><p>不存在任何继承</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">class A&#123;&#125;</div><div class="line">A.__proto__===Function.prototype;//true</div><div class="line">A.prototype.__proto__===Object.prototype;//true</div><div class="line">//A作为一个基类(不存在任何继承)，即普通函数故直接继承Function.prototype。</div><div class="line">但当A调用后返回一个空对象(Object实例)，故A.prototype.__proto__指向构造函数(Object)的prototype属性。</div></pre></td></tr></table></figure>
</li>
<li><p>子类集成null</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">class A extends null&#123;&#125;</div><div class="line">A.__proto__===Function.prototype;//true</div><div class="line">A.prototype.__proto__===undefined;//true</div><div class="line">//实际上是</div><div class="line">class C extends null &#123;</div><div class="line">  constructor() &#123; return Object.create(null); &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>Object.getPropertyOf():从子类获取父类</p>
</li>
<li><p>super关键字</p>
<blockquote>
<p>既可以当函数使用也可以当对象使用，但用法完全不同。</p>
</blockquote>
<ol>
<li><p>作为函数，代表父类的构造函数,只能用在子类的构造函数中。(ES6规定子类构造函数必须执行一次super函数)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">class A&#123;&#125;</div><div class="line">class B extends A&#123;</div><div class="line">    constructor()&#123;</div><div class="line">        super();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">/*super虽然代表了父类A的构造函数，但返回的是子类的实例(super内this指向B)，</div><div class="line">此时super()相当于A.prototype.constructor.call(this).*/</div></pre></td></tr></table></figure>
<p>2.作为对象，指向父类的原型对象。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">class A&#123;</div><div class="line">    p()&#123;</div><div class="line">        return 2;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">class B extends A&#123;</div><div class="line">    constructor()&#123;</div><div class="line">        super();</div><div class="line">        console.log(super.p());</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">let b=new B();//2</div><div class="line">//ES6 规定，通过super调用父类的方法时，super会绑定子类的this。因此super就是this</div><div class="line">class A &#123;</div><div class="line">  constructor() &#123;</div><div class="line">    this.x = 1;</div><div class="line">  &#125;</div><div class="line">&#125;   </div><div class="line">class B extends A &#123;</div><div class="line">  constructor() &#123;</div><div class="line">    super();</div><div class="line">    this.x = 2;</div><div class="line">    super.x = 3;</div><div class="line">    console.log(super.x); // undefined,A.prototype.x</div><div class="line">    console.log(this.x); // 3</div><div class="line">  &#125;</div><div class="line">&#125;  </div><div class="line">let b = new B();</div><div class="line">/*使用super的时候，必须显式指定是作为函数、还是作为对象;由于对象都是继承其它对象的，</div><div class="line">所以可以在任意对象中使用super关键字*/</div><div class="line">var obj = &#123;</div><div class="line">  toString() &#123;</div><div class="line">    return &quot;MyObject: &quot; + super.toString();</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">obj.toString(); // MyObject: [object Object]</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>实例的<strong>proto</strong>属性</p>
<blockquote>
<p>子类实例的<strong>proto</strong>属性的<strong>proto</strong>属性，指向父类实例的<strong>prototype</strong>属性。<br>即子类原型的原型是父类的原型。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">var p1 = new Point(2, 3);</div><div class="line">var p2 = new ColorPoint(2, 3, &apos;red&apos;);</div><div class="line">p2.__proto__ === p1.__proto__ // false</div><div class="line">p2.__proto__.__proto__ === p1.__proto__ // true,ColorPoint继承了Point</div><div class="line">//通过子类实例的__proto__.__proto__属性，可以修改父类实例的行为</div><div class="line">p2.__proto__.__proto__.printName = function () &#123;</div><div class="line">  console.log(&apos;Ha&apos;);</div><div class="line">&#125;;</div><div class="line">p1.printName() // &quot;Ha&quot;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<ol>
<li><p>原生构造函数的继承—无法继承</p>
<ul>
<li>Boolean()</li>
<li>Number()</li>
<li>String()</li>
<li>Array()</li>
<li>Date()</li>
<li>Function()</li>
<li>RegExp()</li>
<li>Error()</li>
<li>Object()</li>
</ul>
</li>
<li><p>Class的取值函数getter和存值函数setter<br>存值函数和取值函数是设置在属性的descriptor对象上的,与ES5完全一致。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">lass MyClass &#123;</div><div class="line">  constructor() &#123;</div><div class="line">    // ...</div><div class="line">  &#125;</div><div class="line">  get prop() &#123;</div><div class="line">    return &apos;getter&apos;;</div><div class="line">  &#125;</div><div class="line">  set prop(value) &#123;</div><div class="line">    console.log(&apos;setter: &apos;+value);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">let inst = new MyClass();</div><div class="line">inst.prop = 123;</div><div class="line">// setter: 123</div><div class="line">inst.prop</div><div class="line">// &apos;getter&apos;</div><div class="line">//prop属性有对应的存值函数和取值函数，因此赋值和读取行为都被自定义了。</div></pre></td></tr></table></figure>
</li>
<li><p>Class的Generator方法</p>
<blockquote>
<p>某个方法之前加上*即为Generator函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">class Foo &#123;</div><div class="line">  constructor(...args) &#123;</div><div class="line">    this.args = args;</div><div class="line">  &#125;</div><div class="line">  * [Symbol.iterator]() &#123;</div><div class="line">    for (let arg of this.args) &#123;</div><div class="line">      yield arg;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">for (let x of new Foo(&apos;hello&apos;, &apos;world&apos;)) &#123;</div><div class="line">  console.log(x);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Class的静态方法</p>
<blockquote>
<p>类相当于实例的原型，故类中定义的方法都会被实例继承。若在一个方法上加上static关键字<br>则表示该方法不会被实例继承，而是直接通过类来调用，但可以被子类继承，也可以通过super对象调用所谓的‘静态方法’。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">class Foo&#123;</div><div class="line">    static classMethod()&#123;</div><div class="line">        return &apos;hello&apos;;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">Foo.classMethod();//&apos;hello&apos;</div><div class="line">var foo=new Foo();</div><div class="line">foo.classMethod();// TypeError: foo.classMethod is not a function</div><div class="line"> class Bar extends Foo &#123;</div><div class="line">   static classMethod() &#123;</div><div class="line">     return super.classMethod() + &apos;, too&apos;;</div><div class="line">   &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Class的静态属性和实例属性</p>
<blockquote>
<p>静态属性指Class本身的属性Class.propname,而非定义在实例对象this上的属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">class Foo&#123;</div><div class="line">    prop:2//无效</div><div class="line">    static prop:2//无效</div><div class="line">&#125;</div><div class="line">Foo.prop=1;</div><div class="line">Foo.prop;//1,只有这种写法可行，因为ES6明确规定，Class内部只有静态方法，没有静态属性。</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<p>ES7提议，Babel支持<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">//类的实例属性可以用等式，写入类的定义之中。</div><div class="line">class MyClass &#123;</div><div class="line">  myProp = 42;</div><div class="line">  constructor() &#123;</div><div class="line">    console.log(this.myProp); // 42</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">/*定义实例属性，之前只能写在类的constructor方法里面，如今可以不在。</div><div class="line">为了可读性的目的，对于那些在constructor里面已经定义的实例属性，</div><div class="line">新写法允许直接列出。*/</div><div class="line">class ReactCounter extends React.Component &#123;</div><div class="line">  state = &#123;</div><div class="line">    count: 0</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line">//类的静态属性，只需在实例属性前加上static关键字</div><div class="line">class MyClass &#123;</div><div class="line">  static myStaticProp = 42;</div><div class="line">  constructor() &#123;</div><div class="line">    console.log(MyClass.myStaticProp); // 42</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<ol>
<li><p>类的私有属性—提案，为class加了私有属性。方法是在属性名之前，使用#表示。</p>
<blockquote>
<p>之所以引入一个新的#表示私有属性而非private关键字是因为JS是一门动态语言，使用独立符号似乎是唯一<br>可靠方法，能够准确地区分属性之公私。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">class Point &#123;</div><div class="line">  #x;</div><div class="line">  constructor(x = 0) &#123;</div><div class="line">    #x = +x;</div><div class="line">  &#125;</div><div class="line">  get x() &#123; return #x &#125;</div><div class="line">  set x(value) &#123; #x = +value &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>new.target属性—确定构造函数如何调用的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">function Person(name) &#123;</div><div class="line">  if (new.target !== undefined) &#123;</div><div class="line">    this.name = name;</div><div class="line">  &#125; else &#123;</div><div class="line">    throw new Error(&apos;必须使用new生成实例&apos;);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">// 另一种写法</div><div class="line">function Person(name) &#123;</div><div class="line">  if (new.target === Person) &#123;</div><div class="line">    this.name = name;</div><div class="line">  &#125; else &#123;</div><div class="line">    throw new Error(&apos;必须使用new生成实例&apos;);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">var person = new Person(&apos;张三&apos;); // 正确</div><div class="line">var notAPerson = Person.call(person, &apos;张三&apos;);  // 报错</div><div class="line">//Class内调用new.target返回当前Class</div></pre></td></tr></table></figure>
</li>
<li><p>Mixin模式的实现</p>
<blockquote>
<p>将多个类的接口混入(mix in)另一个类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">function mix(...mixins) &#123;</div><div class="line">  class Mix &#123;&#125;</div><div class="line"></div><div class="line">  for (let mixin of mixins) &#123;</div><div class="line">    copyProperties(Mix, mixin);</div><div class="line">    copyProperties(Mix.prototype, mixin.prototype);</div><div class="line">  &#125;</div><div class="line">  return Mix;</div><div class="line">&#125;</div><div class="line">function copyProperties(target, source) &#123;</div><div class="line">  for (let key of Reflect.ownKeys(source)) &#123;</div><div class="line">    if ( key !== &quot;constructor&quot;</div><div class="line">      &amp;&amp; key !== &quot;prototype&quot;</div><div class="line">      &amp;&amp; key !== &quot;name&quot;</div><div class="line">    ) &#123;</div><div class="line">      let desc = Object.getOwnPropertyDescriptor(source, key);</div><div class="line">      Object.defineProperty(target, key, desc);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">class DistributedEdit extends mix(Loggable, Serializable) &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<p>More info: <a href="https://developer.mozilla.org/en/docs/Web//Reference/Classes" target="_blank" rel="external">MDN Classes</a></p>
<h3 id="decorator"><a href="#decorator" class="headerlink" title="decorator"></a>decorator</h3><blockquote>
<p>修饰器（Decorator）是一个函数，用来修改类的行为。这是ES7的一个提案，目前Babel转码器已经支持。</p>
</blockquote>
<ol>
<li>类的修饰</li>
<li>方法的修饰</li>
<li>不能用于函数</li>
<li>core-decorators.js</li>
<li>使用修饰器实现自动发布事件</li>
<li>mixin混入</li>
<li>trait</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">function factorial(n, acc = 1) &#123;</div><div class="line">    &apos;use strict&apos;;</div><div class="line">    if (n &lt;= 1) return acc;</div><div class="line">    return factorial(n - 1, n * acc);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// Stack overflow in most implementations today,</div><div class="line">// but safe on arbitrary inputs in ES6</div><div class="line">factorial(100000)</div></pre></td></tr></table></figure>
<h3 id="Modules模块"><a href="#Modules模块" class="headerlink" title="Modules模块"></a>Modules模块</h3><blockquote>
<p>Language-level support for modules for component definition.<br>Codifies patterns from popular  module loaders (AMD, CommonJS).<br>Runtime behaviour defined by a host-defined default loader.<br>Implicitly async model – no code executes until requested modules are available and processed.<br>组件定义的模块的语言级支持。编译流行模块加载程序（AMD，COMMONJS）的模式。<br>由主机定义的默认加载器定义的运行时行为。隐式异步模型 - 在请求的模块可用并处理之前，不执行代码。<br>ES6在语言标准层面上实现了模块功能，完全可以取代CommonJS，AMD规范，成为B/S通用的模块解决方案。<br>模块化设计思想是尽量静态化，使得编译时就能确定模块的依赖关系以及输入和输出的变量。</p>
</blockquote>
<p>好处：</p>
<pre><code>1. 不再需要UMD模块格式了，将来服务器和浏览器都会支持ES6模块格式；
2. 将来浏览器的新API就能用模块格式提供，不必做成全局变量或者navigator对象的属性；
3. 不再需要对象作为命名空间(如Math)，未来这些功能可以通过模块提供。
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// lib/math.js</div><div class="line">export function sum(x, y) &#123;</div><div class="line">  return x + y;</div><div class="line">&#125;</div><div class="line">export var pi = 3.141593;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// app.js</div><div class="line">import * as math from &quot;lib/math&quot;;</div><div class="line">alert(&quot;2π = &quot; + math.sum(math.pi, math.pi));</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// otherApp.js</div><div class="line">import &#123;sum, pi&#125; from &quot;lib/math&quot;;</div><div class="line">alert(&quot;2π = &quot; + sum(pi, pi));</div></pre></td></tr></table></figure>
<p>Some additional features include <code>export default</code> and <code>export *</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// lib/mathplusplus.js</div><div class="line">export * from &quot;lib/math&quot;;</div><div class="line">export var e = 2.71828182846;</div><div class="line">export default function(x) &#123;</div><div class="line">    return Math.log(x);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// app.js</div><div class="line">import ln, &#123;pi, e&#125; from &quot;lib/mathplusplus&quot;;</div><div class="line">alert(&quot;2π = &quot; + ln(e)*pi*2);</div></pre></td></tr></table></figure>
<ol>
<li>严格模式—自动设定为’use strict’</li>
<li>export,export default及import命令</li>
<li><p>模块的整体加载*</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">import * as circle from &apos;./circle&apos;;</div><div class="line">console.log(&apos;圆面积：&apos; + circle.area(4));</div><div class="line">console.log(&apos;圆周长：&apos; + circle.circumference(14));</div><div class="line">//注意：整体加载的模块所在的那个对象是可以静态分析的，不允许运行时改变</div><div class="line">circle.foo = &apos;hello&apos;;//不允许</div></pre></td></tr></table></figure>
</li>
<li><p>模块的继承</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// circleplus.js</div><div class="line"></div><div class="line">export * from &apos;circle&apos;;</div><div class="line">export var e = 2.71828182846;</div><div class="line">export default function(x) &#123;</div><div class="line">  return Math.exp(x);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>import():按需加载，条件加载，动态模块路径<br>More MDN info: <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Statements/import" target="_blank" rel="external">import statement</a>, <a href="https://developer.mozilla.org/en-US/docs/Web//Reference/Statements/export" target="_blank" rel="external">export statement</a></p>
<h3 id="Module-Loaders"><a href="#Module-Loaders" class="headerlink" title="Module Loaders"></a>Module Loaders</h3></li>
<li>浏览器加载</li>
</ol>
<ul>
<li><p>传统方法：script引入</p>
<blockquote>
<p>默认情况下，B是同步加载JS脚本，即渲染引擎遇到script就停下来直到脚本执行完，再继续向下循环。<br>如果是外部脚本，还必须加入脚本下载时间。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//defer:整个页面渲染结束才执行，渲染完再执行；async:一旦下载完，渲染引擎就会中断渲染，执行此脚本后再继续渲染，下载完就执行。</div><div class="line">&lt;script src=&quot;path/to/myModule.js&quot; defer&gt;&lt;/script&gt;</div><div class="line">&lt;script src=&quot;path/to/myModule.js&quot; async&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>加载规则：ES6模块也可以使用script标签，但要加入type=’module’属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;script type=&quot;module&quot; src=&quot;foo.js&quot;&gt;</div><div class="line"> import utils from &quot;./utils.js&quot;;</div><div class="line">&lt;/script&gt;</div><div class="line">&lt;!-- 等同于 --&gt;</div><div class="line">&lt;script type=&quot;module&quot; src=&quot;foo.js&quot; defer&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>对于外部模块脚本，注意以下几点：</p>
<pre><code>1. 代码在模块作用域之中运行而非全局，模块内顶层变量外部不可见
2. 模块脚本自动采用严格模式，无论声明与否；
3. 模块中可以使用import及export命令处理模块
4. 模块中，顶层的this关键字返回undefined而非window
5. 同一个模块如果加载多次，只执行一次
</code></pre><figure class="highlight plain"><figcaption><span>isNotModuleScript = this !== undefined;//侦测是否在ES6模块中```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">2. ES6模块与CommonJS模块差异</div><div class="line">两大重大差异：</div><div class="line">- 前者输出的是值的引用，后者是拷贝</div><div class="line">- 前者是编译时输出接口，后者是运行时加载</div><div class="line">&gt; CommonJS加载的是一个在脚本运行才会生成的对象，而ES6不是对象，其对外接口只是一种静态定义，</div><div class="line">在代码静态解析阶段就会生成。ES6的import有点像Unix系统的符号连接，原始值变了，import加载的值也变。</div><div class="line">故ES6模块是动态引用，不会缓存值，模块里的变量绑定其所在的模块。</div><div class="line">3. Node加载</div><div class="line">&gt;Node 对 ES6 模块的处理比较麻烦，因为它有自己的 CommonJS 模块格式，与 ES6 模块格式是不兼容的。</div><div class="line">目前的解决方案是，将两者分开，ES6 模块和 CommonJS 采用各自的加载方案。</div><div class="line"></div><div class="line">在静态分析阶段，一个模块脚本若含import或export语句，Node便认为其为ES6模块，否则就是CommonJS模块。</div><div class="line">若不输出任何接口但希望被认为是ES6模块，可在脚本中加入```export &#123;&#125;;//不输出任何脚本的ES6标准写法</div></pre></td></tr></table></figure>
<p>ES6模块中顶层的this指向undefined；而CommonJS模块的顶层this指向当前模块。</p>
<ul>
<li><p>import 命令加载CommonJS模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// a.js  CommonJS模块</div><div class="line">module.exports = &#123;</div><div class="line">  foo: &apos;hello&apos;,</div><div class="line">  bar: &apos;world&apos;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">// 等同于</div><div class="line">export default &#123;</div><div class="line">  foo: &apos;hello&apos;,</div><div class="line">  bar: &apos;world&apos;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p>require命令加载ES6模块</p>
<blockquote>
<p>采用require命令加载 ES6 模块时，ES6 模块的所有输出接口，会成为输入对象的属性。</p>
</blockquote>
</li>
</ul>
<ol>
<li>循环加载circular dependency</li>
</ol>
<ul>
<li>CommonJS模块加载原理<h3 id="Subclassable-Built-ins内嵌对象的亚类"><a href="#Subclassable-Built-ins内嵌对象的亚类" class="headerlink" title="Subclassable Built-ins内嵌对象的亚类"></a>Subclassable Built-ins内嵌对象的亚类</h3><blockquote>
<p>In ES6, built-ins like <code>Array</code>, <code>Date</code> and DOM <code>Element</code>s can be subclassed.<br>Object construction for a function named <code>Ctor</code> now uses two-phases (both virtually dispatched):</p>
</blockquote>
</li>
<li>Call <code>Ctor[@@create]</code> to allocate the object, installing any special behavior</li>
<li>Invoke constructor on new instance to initialize<br>The known <code>@@create</code> symbol is available via <code>Symbol.create</code>.  Built-ins now expose their <code>@@create</code> explicitly.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">// Pseudo-code of Array</div><div class="line">class Array &#123;</div><div class="line">    constructor(...args) &#123; /* ... */ &#125;</div><div class="line">    static [Symbol.create]() &#123;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// User code of Array subclass</div><div class="line">class MyArray extends Array &#123;</div><div class="line">    constructor(...args) &#123; super(...args); &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// Two-phase &apos;new&apos;:</div><div class="line">// 1) Call @@create to allocate object</div><div class="line">// 2) Invoke constructor on new instance</div><div class="line">var arr = new MyArray();</div><div class="line">arr[1] = 12;</div><div class="line">arr.length == 2</div></pre></td></tr></table></figure>
<h3 id="typed-arrays"><a href="#typed-arrays" class="headerlink" title="typed arrays"></a>typed arrays</h3><blockquote>
<p>支持任意基于字节的数据结构来实现网络协议，加密算法，文件格式操作等。<br><figure class="highlight plain"><figcaption><span>Example &#123;</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">    constructor (buffer = new ArrayBuffer(24)) &#123;</div><div class="line">        this.buffer = buffer</div><div class="line">    &#125;</div><div class="line">    set buffer (buffer) &#123;</div><div class="line">        this._buffer    = buffer</div><div class="line">        this._id        = new Uint32Array (this._buffer,  0,  1)</div><div class="line">        this._username  = new Uint8Array  (this._buffer,  4, 16)</div><div class="line">        this._amountDue = new Float32Array(this._buffer, 20,  1)</div><div class="line">    &#125;</div><div class="line">    get buffer ()     &#123; return this._buffer       &#125;</div><div class="line">    set id (v)        &#123; this._id[0] = v           &#125;</div><div class="line">    get id ()         &#123; return this._id[0]        &#125;</div><div class="line">    set username (v)  &#123; this._username[0] = v     &#125;</div><div class="line">    get username ()   &#123; return this._username[0]  &#125;</div><div class="line">    set amountDue (v) &#123; this._amountDue[0] = v    &#125;</div><div class="line">    get amountDue ()  &#123; return this._amountDue[0] &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">let example = new Example()</div><div class="line">example.id = 7</div><div class="line">example.username = &quot;John Doe&quot;</div><div class="line">example.amountDue = 42.0</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="internationalization-localization"><a href="#internationalization-localization" class="headerlink" title="internationalization-localization"></a>internationalization-localization</h3><blockquote>
<p>collation整理<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var list = [ &quot;ä&quot;, &quot;a&quot;, &quot;z&quot; ]</div><div class="line">var l10nDE = new Intl.Collator(&quot;de&quot;)</div><div class="line">var l10nSV = new Intl.Collator(&quot;sv&quot;)</div><div class="line">l10nDE.compare(&quot;ä&quot;, &quot;z&quot;) === -1</div><div class="line">l10nSV.compare(&quot;ä&quot;, &quot;z&quot;) === +1</div><div class="line">console.log(list.sort(l10nDE.compare)) // [ &quot;a&quot;, &quot;ä&quot;, &quot;z&quot; ]</div><div class="line">console.log(list.sort(l10nSV.compare)) // [ &quot;a&quot;, &quot;z&quot;, &quot;ä&quot; ]</div></pre></td></tr></table></figure></p>
<p>number formatting<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var l10nEN = new Intl.NumberFormat(&quot;en-US&quot;)</div><div class="line">var l10nDE = new Intl.NumberFormat(&quot;de-DE&quot;)</div><div class="line">l10nEN.format(1234567.89) === &quot;1,234,567.89&quot;</div><div class="line">l10nDE.format(1234567.89) === &quot;1.234.567,89&quot;</div></pre></td></tr></table></figure></p>
<p>current formatting<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var l10nUSD = new Intl.NumberFormat(&quot;en-US&quot;, &#123; style: &quot;currency&quot;, currency: &quot;USD&quot; &#125;)</div><div class="line">var l10nGBP = new Intl.NumberFormat(&quot;en-GB&quot;, &#123; style: &quot;currency&quot;, currency: &quot;GBP&quot; &#125;)</div><div class="line">var l10nEUR = new Intl.NumberFormat(&quot;de-DE&quot;, &#123; style: &quot;currency&quot;, currency: &quot;EUR&quot; &#125;)</div><div class="line">l10nUSD.format(100200300.40) === &quot;$100,200,300.40&quot;</div><div class="line">l10nGBP.format(100200300.40) === &quot;£100,200,300.40&quot;</div><div class="line">l10nEUR.format(100200300.40) === &quot;100.200.300,40 €&quot;</div></pre></td></tr></table></figure></p>
<p>date/time formating<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var l10nEN = new Intl.DateTimeFormat(&quot;en-US&quot;)</div><div class="line">var l10nDE = new Intl.DateTimeFormat(&quot;de-DE&quot;)</div><div class="line">l10nEN.format(new Date(&quot;2015-01-02&quot;)) === &quot;1/2/2015&quot;</div><div class="line">l10nDE.format(new Date(&quot;2015-01-02&quot;)) === &quot;2.1.2015&quot;</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="SIMD"><a href="#SIMD" class="headerlink" title="SIMD"></a>SIMD</h3><blockquote>
<p>SIMD（发音/sim-dee/）是“Single Instruction/Multiple Data”的缩写，意为“单指令，多数据”。<br>它是 JavaScript 操作 CPU 对应指令的接口，你可以看做这是一种不同的运算执行模式。<br>与它相对的是 SISD（“Single Instruction/Single Data”），即“单指令，单数据”。</p>
<h3 id="Good-Practise"><a href="#Good-Practise" class="headerlink" title="Good Practise"></a>Good Practise</h3><ol>
<li>块级作用域</li>
</ol>
</blockquote>
<pre><code>1. let取代var
2. 全局常量和线程安全
在let和const之间，建议优先使用const，尤其是在全局环境，不应该设置变量，只应设置常量
</code></pre><ol>
<li>字符串：``</li>
<li>解耦赋值：首选</li>
<li>对象：单行定义的对象，最后一个成员不以逗号结尾。多行定义的对象，最后一个成员以逗号结尾。</li>
<li>数组：使用扩展运算符配合Array.from方法</li>
<li>函数：</li>
<li>Map结构：区分Object和Map，只有模拟现实世界的实体对象采用Object。若是键值对结构首选Map</li>
<li>Class :首选</li>
<li>模块：import取代require</li>
<li>EsLint使用<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="#参考链接"></a>#参考链接</h3><a href="https://github.com/lukehoban/es6features#readme" target="_blank" rel="external">https://github.com/lukehoban/es6features#readme</a><br><a href="http://es6-features.org/#Constants" target="_blank" rel="external">http://es6-features.org/#Constants</a><br><a href="http://es6.ruanyifeng.com/" target="_blank" rel="external">http://es6.ruanyifeng.com/</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/04/python/" itemprop="url">
                  Python get started
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-03T18:25:40Z" content="2016-10-03">
              2016-10-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><blockquote>
<p>Python是一种解释型、面向对象、动态数据类型的高级程序设计语言。</p>
</blockquote>
<ul>
<li><p>Python 是一种解释型语言： 这意味着开发过程中没有了编译这个环节。类似于PHP和Perl语言。</p>
</li>
<li><p>Python 是交互式语言： 这意味着，您可以在一个Python提示符，直接互动执行写你的程序。</p>
</li>
<li><p>Python 是面向对象语言: 这意味着Python支持面向对象的风格或代码封装在对象的编程技术。</p>
</li>
<li><p>Python 是初学者的语言：Python 对初级程序员而言，是一种伟大的语言，它支持广泛的应用程序开发，从简单的文字处理到 WWW 浏览器再到游戏。</p>
</li>
</ul>
<h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ol>
<li><p>易于学习：Python有相对较少的关键字，结构简单，和一个明确定义的语法，学习起来更加简单。</p>
</li>
<li><p>易于阅读：Python代码定义的更清晰。</p>
</li>
<li><p>易于维护：Python的成功在于它的源代码是相当容易维护的。</p>
</li>
<li><p>一个广泛的标准库：Python的最大的优势之一是丰富的库，跨平台的，在UNIX，Windows和Macintosh兼容很好。</p>
</li>
<li><p>互动模式：互动模式的支持，您可以从终端输入执行代码并获得结果的语言，互动的测试和调试代码片断。</p>
</li>
<li><p>可移植：基于其开放源代码的特性，Python已经被移植（也就是使其工作）到许多平台。</p>
</li>
<li><p>可扩展：如果你需要一段运行很快的关键代码，或者是想要编写一些不愿开放的算法，你可以使用C或C++完成那部分程序，然后从你的Python程序中调用。</p>
</li>
<li><p>数据库：Python提供所有主要的商业数据库的接口。</p>
</li>
<li><p>GUI编程：Python支持GUI可以创建和移植到许多系统调用。</p>
</li>
<li><p>可嵌入: 你可以将Python嵌入到C/C++程序，让你的程序的用户获得”脚本化”的能力。</p>
</li>
</ol>
<h1 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h1><ul>
<li><p>标识符，保留字同JS</p>
</li>
<li><p>行和缩进</p>
</li>
</ul>
<blockquote>
<p>不使用大括号（{}）来控制类，函数以及其他逻辑判断。python最具特色的就是用缩进来写模块。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if True:</div><div class="line">    print &quot;True&quot;</div><div class="line">else:</div><div class="line">  print &quot;False&quot;</div></pre></td></tr></table></figure>
<ul>
<li>多行语句：一般以新行作为为语句的结束符。<br>但是我们可以使用斜杠（ \）将一行的语句分为多行显示</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">total = item_one + \</div><div class="line">        item_two + \</div><div class="line">        item_three</div><div class="line">#语句中包含[], &#123;&#125; 或 () 括号就不需要使用多行连接符</div><div class="line">days = [&apos;Monday&apos;, &apos;Tuesday&apos;, &apos;Wednesday&apos;,</div><div class="line">        &apos;Thursday&apos;, &apos;Friday&apos;]</div></pre></td></tr></table></figure>
<ul>
<li>引号（三引号可以由多行组成，编写多行文本的快捷语法，常用语文档字符串，在文件的特定地点，被当做注释。）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">word = &apos;word&apos;</div><div class="line">sentence = &quot;这是一个句子。&quot;</div><div class="line">paragraph = &quot;&quot;&quot;这是一个段落。</div><div class="line">包含了多个语句&quot;&quot;&quot;</div></pre></td></tr></table></figure>
<ul>
<li><p>注释（# 开头，三个单引号(‘’’)或三个双引号(“””)）     </p>
</li>
<li><p>空行：函数之间或类的方法之间用空行分隔，表示一段新的代码的开始。类和函数入口之间也用一行空行分隔，以突出函数入口的开始。</p>
</li>
</ul>
<h1 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h1><blockquote>
<p>变量存储在内存中的值。这就意味着在创建变量时会在内存中开辟一个空间。<br>基于变量的数据类型，解释器会分配指定内存，并决定什么数据可以被存储在内存中。<br>因此，变量可以指定不同的数据类型，这些变量可以存储整数，小数或字符。</p>
</blockquote>
<h2 id="赋值-不需要类型声明"><a href="#赋值-不需要类型声明" class="headerlink" title="赋值(不需要类型声明)"></a>赋值(不需要类型声明)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">counter = 100 # 赋值整型变量</div><div class="line">miles = 1000.0 # 浮点型</div><div class="line">name = &quot;John&quot; # 字符串</div><div class="line"> </div><div class="line">print (counter);</div><div class="line"></div><div class="line">print (miles);</div><div class="line"></div><div class="line">print (name);</div><div class="line"></div><div class="line"># 多个变量</div><div class="line">a, b, c = 1, 2, &quot;john&quot;</div><div class="line">a = b = c = 1</div></pre></td></tr></table></figure>
<h2 id="标准数据类型-五个，在内存中存储的数据可以有多种类型"><a href="#标准数据类型-五个，在内存中存储的数据可以有多种类型" class="headerlink" title="标准数据类型(五个，在内存中存储的数据可以有多种类型)"></a>标准数据类型(五个，在内存中存储的数据可以有多种类型)</h2><ul>
<li>Numbers（数字）</li>
<li>String（字符串）</li>
<li>List（列表，Python 中使用最频繁的数据类型）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">list = [ &apos;runoob&apos;, 786 , 2.23, &apos;john&apos;, 70.2 ]</div><div class="line">tinylist = [123, &apos;john&apos;]</div><div class="line"> </div><div class="line">print (list)               # 输出完整列表</div><div class="line">print (list[0]  )          # 输出列表的第一个元素</div><div class="line">print (list[1:3])          # 输出第二个至第三个的元素 </div><div class="line">print (list[2:])          # 输出从第三个开始至列表末尾的所有元素</div><div class="line">print (tinylist* 2)       # 输出列表两次</div><div class="line">print (list + tinylist)    # 打印组合的列表</div></pre></td></tr></table></figure>
<ul>
<li>Tuple（元组,另一个数据类型，类似于List（列表）,用”()”标识。内部元素用逗号隔开。但是元组不能二次赋值，相当于只读列表）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">tuple = ( &apos;runoob&apos;, 786 , 2.23, &apos;john&apos;, 70.2 )</div><div class="line">tinytuple = (123, &apos;john&apos;)</div><div class="line"> </div><div class="line">print (tuple)               # 输出完整列表</div><div class="line">print (tuple[0]  )          # 输出列表的第一个元素</div><div class="line">print (tuple[1:3])          # 输出第二个至第三个的元素 </div><div class="line">print (tuple[2:])          # 输出从第三个开始至列表末尾的所有元素</div><div class="line">print (tinytuple* 2)       # 输出列表两次</div><div class="line">print (tuple + tinytuple)    # 打印组合的列表</div></pre></td></tr></table></figure>
<ul>
<li>Dictionary（字典,列表是有序的对象结合，字典是无序的对象集合。字典当中的元素是通过键来存取的，而不是通过偏移存取。字典用”{ }”标识。字典由索引(key)和它对应的值value组成。）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">dict = &#123;&#125;</div><div class="line">dict[&apos;one&apos;] = &quot;This is one&quot;</div><div class="line">dict[2] = &quot;This is two&quot;</div><div class="line"> </div><div class="line">tinydict = &#123;&apos;name&apos;: &apos;john&apos;,&apos;code&apos;:6734, &apos;dept&apos;: &apos;sales&apos;&#125;</div><div class="line"> </div><div class="line"> </div><div class="line">print (dict[&apos;one&apos;])          # 输出键为&apos;one&apos; 的值</div><div class="line">print (dict[2])              # 输出键为 2 的值</div><div class="line">print (tinydict)             # 输出完整的字典</div><div class="line">print (tinydict.keys())      # 输出所有键</div><div class="line">print (tinydict.values())    # 输出所有值</div></pre></td></tr></table></figure>
<h2 id="数据类型转换：只需要将数据类型作为函数名即可"><a href="#数据类型转换：只需要将数据类型作为函数名即可" class="headerlink" title="数据类型转换：只需要将数据类型作为函数名即可"></a>数据类型转换：只需要将数据类型作为函数名即可</h2><h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><ul>
<li>算术运算符</li>
<li>比较（关系）运算符</li>
<li>赋值运算符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">**=	幂赋值运算符	c **= a 等效于 c = c ** a</div><div class="line">//=	取整除赋值运算符	c //= a 等效于 c = c // a</div></pre></td></tr></table></figure>
<ul>
<li><p>逻辑运算符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">and not or</div></pre></td></tr></table></figure>
</li>
<li><p>位运算符</p>
</li>
<li>成员运算符(字符串，列表或元组。in/not in)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">a = 10</div><div class="line">b = 20</div><div class="line">list = [1, 2, 3, 4, 5 ];</div><div class="line"></div><div class="line">if ( a in list ):</div><div class="line">   print (&quot;1 - variable a in the list &quot; )</div><div class="line">else:</div><div class="line">   print (&quot;1 - variable a not in the  list &quot;)</div><div class="line"></div><div class="line">if ( b not in list ):</div><div class="line">   print (&quot;2 - variable b not in the  list &quot;)</div><div class="line">else:</div><div class="line">   print (&quot;2 - variable b in the list &quot; )</div><div class="line"># modify the value of a</div><div class="line">a = 2</div><div class="line">if ( a in list ):</div><div class="line">   print (&quot;3 - variable a in the list &quot; )</div><div class="line">else:</div><div class="line">   print (&quot;3 - variable a not in the  list &quot;)</div></pre></td></tr></table></figure>
<ul>
<li>身份运算符(比较两个对象的存储单元 is/is not)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">a = 20</div><div class="line">b = 20</div><div class="line"></div><div class="line">if ( a is b ):</div><div class="line">   print (&quot;1 - a and b are  the same log&quot;)</div><div class="line">else:</div><div class="line">   print (&quot;1 - a and b are not the same log&quot;)</div><div class="line"></div><div class="line">if ( id(a) is not id(b) ):</div><div class="line">   print (&quot;2 - a and b are  the same log&quot;)</div><div class="line">else:</div><div class="line">   print (&quot;2 - a and b are not the same log&quot;)</div><div class="line"></div><div class="line"># modify the value of b</div><div class="line">b = 30</div><div class="line">if ( a is b ):</div><div class="line">   print (&quot;3 - a and b are  the same log&quot;)</div><div class="line">else:</div><div class="line">   print (&quot;3 - a and b are not the same log&quot;)</div><div class="line"></div><div class="line">if ( a is not b ):</div><div class="line">   print (&quot;4 - a and b are not the same log&quot;)</div><div class="line">else:</div><div class="line">   print (&quot;4 - a and b are  the same log&quot;)</div></pre></td></tr></table></figure>
<ul>
<li>运算符优先级</li>
</ul>
<h1 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">if ( var  == 100 ) : print (&quot;变量 var 的值为100&quot; )</div><div class="line"></div><div class="line">if condition：</div><div class="line">    Execute the statement...</div><div class="line">elseif：</div><div class="line">    Execute the statement...</div><div class="line">else：</div><div class="line">Execute the statement...</div></pre></td></tr></table></figure>
<h1 id="循环语句-没有do-while循环"><a href="#循环语句-没有do-while循环" class="headerlink" title="循环语句(没有do-while循环)"></a>循环语句(没有do-while循环)</h1><h2 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h2><h2 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h2><h2 id="嵌套循环"><a href="#嵌套循环" class="headerlink" title="嵌套循环"></a>嵌套循环</h2><h2 id="break语句"><a href="#break语句" class="headerlink" title="break语句"></a>break语句</h2><h2 id="continue语句"><a href="#continue语句" class="headerlink" title="continue语句"></a>continue语句</h2><h2 id="pass语句-不做任何事情，一般用做占位语句"><a href="#pass语句-不做任何事情，一般用做占位语句" class="headerlink" title="pass语句(不做任何事情，一般用做占位语句)"></a>pass语句(不做任何事情，一般用做占位语句)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">for letter in &apos;Python&apos;:</div><div class="line">   if letter == &apos;h&apos;:</div><div class="line">      pass</div><div class="line">      print (&apos;This is the block of pass &apos;)</div><div class="line">   print (&apos;The current letter is :&apos;, letter)</div><div class="line"></div><div class="line">print (&quot;Good bye!&quot;)</div></pre></td></tr></table></figure>
<h1 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h1><p>Python 支持四种不同的数值类型：</p>
<ul>
<li><p>整型(Int) 通常被称为是整型或整数，是正或负整数，不带小数点。</p>
</li>
<li><p>长整型(long integers)无限大小的整数，整数最后是一个大写或小写的L。</p>
</li>
<li><p>浮点型(floating point real values)浮点型由整数部分与小数部分组成，浮点型也可以使用科学计数法表示（2.5e2 = 2.5 x 102 = 250）</p>
</li>
<li><p>复数( (complex numbers))复数由实数部分和虚数部分构成，可以用a + bj,或者complex(a,b)表示， 复数的实部a和虚部b都是浮点型。</p>
</li>
</ul>
<h1 id="String"><a href="#String" class="headerlink" title="String"></a>String</h1><ul>
<li>访问字符串中的值</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var1 = &apos;Hello World!&apos;</div><div class="line">var2 = &quot;Python Runoob&quot;</div><div class="line"></div><div class="line">print (&quot;var1[0]: &quot;, var1[0])</div><div class="line">print (&quot;var2[1:5]: &quot;, var2[1:5])</div></pre></td></tr></table></figure>
<ul>
<li>更新</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var1 = &apos;Hello World!&apos;</div><div class="line"></div><div class="line">print (&quot;更新字符串 :- &quot;, var1[:6] + &apos;Runoob!&apos;)</div></pre></td></tr></table></figure>
<ul>
<li>字符串运算符</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">operator</th>
<th>describe</th>
<th style="text-align:right">instance</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">+</td>
<td>字符串连接</td>
<td style="text-align:right">‘a + b’ HelloPython’</td>
</tr>
<tr>
<td style="text-align:left">*</td>
<td>重复输出字符串</td>
<td style="text-align:right">a * 2’HelloHello’</td>
</tr>
<tr>
<td style="text-align:left">[]</td>
<td>通过索引获取字符串中字符</td>
<td style="text-align:right">a[1]’e’</td>
</tr>
<tr>
<td style="text-align:left">[:]</td>
<td>截取字符串中的一部分</td>
<td style="text-align:right">a[1:4]’ell’</td>
</tr>
<tr>
<td style="text-align:left">in</td>
<td>成员运算符 - 如果字符串中包含给定的字符返回 True</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:left">not in</td>
<td>成员运算符 - 如果字符串中不包含给定的字符返回 True</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:left">r/R</td>
<td>原始字符串 - 原始字符串：所有的字符串都是直接按照字面的意思来使用，没有转义特殊或不能打印的字符。 原始字符串除在字符串的第一个引号前加上字母”r”（可以大小写）以外，与普通字符串有着几乎完全相同的语法。</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:left">%</td>
<td>格式字符串</td>
<td style="text-align:right">print “My name is %s and weight is %d kg!” % (‘Zara’, 21)</td>
</tr>
</tbody>
</table>
<h1 id="日期和时间-time-和-calendar-模块"><a href="#日期和时间-time-和-calendar-模块" class="headerlink" title="日期和时间( time 和 calendar 模块)"></a>日期和时间( time 和 calendar 模块)</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">import time;  # 引入time模块</div><div class="line"></div><div class="line">ticks = time.time()</div><div class="line">print (ticks)</div></pre></td></tr></table></figure>
<h2 id="时间元祖"><a href="#时间元祖" class="headerlink" title="时间元祖"></a>时间元祖</h2><table>
<thead>
<tr>
<th style="text-align:left">list</th>
<th>Field</th>
<th style="text-align:right">value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">0</td>
<td>year</td>
<td style="text-align:right">2008</td>
</tr>
<tr>
<td style="text-align:left">1</td>
<td>month</td>
<td style="text-align:right">1-12</td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td>day</td>
<td style="text-align:right">1-31</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td>hour</td>
<td style="text-align:right">0-23</td>
</tr>
<tr>
<td style="text-align:left">4</td>
<td>minutes</td>
<td style="text-align:right">0-59</td>
</tr>
<tr>
<td style="text-align:left">5</td>
<td>seconds</td>
<td style="text-align:right">0-59</td>
</tr>
<tr>
<td style="text-align:left">6</td>
<td>day of week</td>
<td style="text-align:right">0-6</td>
</tr>
<tr>
<td style="text-align:left">7</td>
<td>day of year</td>
<td style="text-align:right">1-366</td>
</tr>
<tr>
<td style="text-align:left">8</td>
<td>summer time</td>
<td style="text-align:right">-1, 0, 1, -1是决定是否为夏令时的旗帜</td>
</tr>
</tbody>
</table>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">def printme( str ):</div><div class="line">   print (str)</div><div class="line">   return</div><div class="line"></div><div class="line">printme(&apos;hello&apos;)</div><div class="line">printme(&apos;python&apos;)</div></pre></td></tr></table></figure>
<h1 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h1><blockquote>
<p>Python 模块(Module)，是一个 Python 文件，以 .py 结尾，包含了 Python 对象定义和Python语句。<br>模块让你能够有逻辑地组织你的 Python 代码段。<br>把相关的代码分配到一个模块里能让你的代码更好用，更易懂。<br>模块能定义函数，类和变量，模块里也能包含可执行的代码。</p>
</blockquote>
<h2 id="import-from-import-from-import"><a href="#import-from-import-from-import" class="headerlink" title="import,from-import,from-import*"></a>import,from-import,from-import*</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">import module1[, module2[,... moduleN]</div><div class="line"># 从模块中导入一个指定的部分到当前命名空间中</div><div class="line">from modname import name1[, name2[, ... nameN]]</div><div class="line"># 把一个模块的所有内容全都导入到当前的命名空间也是可行的</div><div class="line">from modname import *</div></pre></td></tr></table></figure>
<h2 id="命名空间和作用域"><a href="#命名空间和作用域" class="headerlink" title="命名空间和作用域"></a>命名空间和作用域</h2><blockquote>
<p>变量是拥有匹配对象的名字（标识符）。命名空间是一个包含了变量名称们（键）和它们各自相应的对象们（值）的字典。<br>一个 Python 表达式可以访问局部命名空间和全局命名空间里的变量。如果一个局部变量和一个全局变量重名，则局部变量会覆盖全局变量。</p>
</blockquote>
<h2 id="dir-函数，排好序的字符串列表，内容是一个模块里定义过的名字。"><a href="#dir-函数，排好序的字符串列表，内容是一个模块里定义过的名字。" class="headerlink" title="dir()函数，排好序的字符串列表，内容是一个模块里定义过的名字。"></a>dir()函数，排好序的字符串列表，内容是一个模块里定义过的名字。</h2><h2 id="globals-和-locals-函数"><a href="#globals-和-locals-函数" class="headerlink" title="globals() 和 locals() 函数"></a>globals() 和 locals() 函数</h2><h2 id="reload-函数"><a href="#reload-函数" class="headerlink" title="reload() 函数"></a>reload() 函数</h2><h1 id="文件I-O"><a href="#文件I-O" class="headerlink" title="文件I/O"></a>文件I/O</h1><h1 id="file方法"><a href="#file方法" class="headerlink" title="file方法"></a>file方法</h1><h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="Yan Li" />
          <p class="site-author-name" itemprop="name">Yan Li</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">25</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/yanlee26" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/franklyan" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://stackoverflow.com/users/7261459/yan" target="_blank" title="stackoverflow">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  stackoverflow
                </a>
              </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://home.cnblogs.com/u/frank26/" title="cnblogs" target="_blank">cnblogs</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://twitter.com/?request_context=signup" title="Twitter" target="_blank">Twitter</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">您是第<span class="busuanzi-value" id="busuanzi_value_site_uv"></span>个小伙伴</span>
  

  
    <span class="site-pv">本站总浏览<span class="busuanzi-value" id="busuanzi_value_site_pv"></span>次</span>
  
  
</div>



        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yan Li</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io" rel="external nofollow">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next" rel="external nofollow">
    NexT.Pisces
  </a>
</div>

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"yanlee24"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementById('footer')
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  
<script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js">
</script>


  <!-- 背景动画 -->
  <script type="text/javascript" src="/js/src/particle.js"></script>
  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/src/love.js"></script>

</body>
</html>
